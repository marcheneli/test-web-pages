(window.webpackJsonpwww=window.webpackJsonpwww||[]).push([[42],{1459:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return u});var i=n(79),r=n(104),o=n(82),a=function(){return function(e,t){return e(o.default.isA5000?Object(i.Mb)():Object(i.h)())}},u=function(e,t){return function(n,o){return o().eventLine.data.foreach(function(a){Object(r.e)(o().forms,e).foreach(function(r){n(Object(i.H)(a.id,r.entity.formType.getFormTypeId(),e,t))})})}}},1461:function(e,t,n){"use strict";var i=n(6),r=n.n(i),o=n(10),a=n.n(o),u=n(7),c=n.n(u),l=n(8),s=n.n(l),p=n(2),f=n(14),d=n(1469),h=n(1459),m=n(320),v=n(69),g=n(0),y=n(624);t.a=function(e){return Object(f.connect)(function(e){return{auth:e.auth,websocket:e.websocket,routing:e.routing}})(function(e){return function(t){function n(){return r()(this,n),c()(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return s()(n,t),a()(n,[{key:"componentWillMount",value:function(){var e=this;this.props.auth.signedOut||this.props.websocket.active&&(this.props.auth.checking||this.props.auth.checked&&this.props.auth.signedIn||this.props.auth.signingIn||this.props.auth.signedIn||Object(g.toOption)(this.props.routing.location).map(function(t){Object(g.liftKey)(Object(y.a)(t.search),"token").map(function(t){t.map(function(t){e.props.dispatch(Object(d.d)(t)).catch(function(t){e.signOut()})})}).getOrElse(function(){e.props.auth.token.map(function(t){e.props.dispatch(Object(d.d)(t)).catch(function(t){e.signOut()})}).getOrElse(function(){e.signOut()})})}))}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.auth.signedOut||e.websocket.active&&(e.auth.checking||(e.auth.checked&&e.auth.signedIn||e.auth.signingIn||e.auth.signedIn)&&(!e.websocket.active||this.props.websocket.active)||e.auth.token.map(function(n){e.dispatch(Object(d.d)(n)).catch(function(e){t.signOut()})}).getOrElse(function(){t.signOut()}))}},{key:"signOut",value:function(){this.props.dispatch(Object(v.r)()),this.props.dispatch(Object(m.c)()),this.props.dispatch(Object(h.b)())}},{key:"render",value:function(){return this.props.auth.signedIn&&!this.props.auth.signingIn?p.createElement(e,this.props):p.createElement("div",null)}}]),n}(p.Component)}(e))}},1462:function(e,t,n){"use strict";var i=n(855);Object.defineProperty(t,"__esModule",{value:!0});var r={};Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o.default}});var o=i(n(1464));Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))})},1463:function(e,t,n){"use strict";var i=n(855),r=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(36)),a=r(n(2)),u=(r(n(31)),i(n(1462))),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var n=e.breakpoint,i=void 0===n?"sm":n;return(0,u.default)()(function(e){return a.default.createElement(t,(0,o.default)({fullScreen:(0,u.isWidthDown)(i,e.width)},e))})}};t.default=c},1464:function(e,t,n){"use strict";var i=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.isWidthDown=t.isWidthUp=void 0;var r=i(n(36)),o=i(n(39)),a=i(n(73)),u=i(n(74)),c=i(n(76)),l=i(n(77)),s=i(n(78)),p=i(n(2)),f=(i(n(31)),i(n(217))),d=i(n(373)),h=(n(61),i(n(539))),m=i(n(263)),v=n(859),g=i(n(860));t.isWidthUp=function(e,t){return arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?v.keys.indexOf(e)<v.keys.indexOf(t):v.keys.indexOf(e)<=v.keys.indexOf(t)};t.isWidthDown=function(e,t){return arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?v.keys.indexOf(t)<v.keys.indexOf(e):v.keys.indexOf(t)<=v.keys.indexOf(e)};var y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var n=e.withTheme,i=void 0!==n&&n,y=e.noSSR,b=void 0!==y&&y,O=e.initialWidth,j=e.resizeInterval,E=void 0===j?166:j,k=function(e){function n(e){var t;return(0,a.default)(this,n),(t=(0,c.default)(this,(0,l.default)(n).call(this,e))).state={width:b?t.getWidth():void 0},"undefined"!=typeof window&&(t.handleResize=(0,d.default)(function(){var e=t.getWidth();e!==t.state.width&&t.setState({width:e})},E)),t}return(0,s.default)(n,e),(0,u.default)(n,[{key:"componentDidMount",value:function(){var e=this.getWidth();e!==this.state.width&&this.setState({width:e})}},{key:"componentWillUnmount",value:function(){this.handleResize.clear()}},{key:"getWidth",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.innerWidth,t=this.props.theme.breakpoints,n=null,i=1;null===n&&i<v.keys.length;){var r=v.keys[i];if(e<t.values[r]){n=v.keys[i-1];break}i+=1}return n=n||"xl"}},{key:"render",value:function(){var e=(0,g.default)({theme:this.props.theme,name:"MuiWithWidth",props:(0,r.default)({},this.props)}),n=e.initialWidth,a=e.theme,u=e.width,c=(0,o.default)(e,["initialWidth","theme","width"]),l=(0,r.default)({width:u||this.state.width||n||O},c);return void 0===l.width?null:(i&&(l.theme=a),p.default.createElement(p.default.Fragment,null,p.default.createElement(t,l),p.default.createElement(f.default,{target:"window",onResize:this.handleResize})))}}]),n}(p.default.Component);return(0,h.default)(k,t),(0,m.default)()(k)}};t.default=y},1465:function(e,t,n){"use strict";var i=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.isHorizontal=j,t.getAnchor=E,t.default=t.styles=void 0;var r=i(n(36)),o=i(n(55)),a=i(n(39)),u=i(n(73)),c=i(n(74)),l=i(n(76)),s=i(n(77)),p=i(n(78)),f=i(n(2)),d=(i(n(31)),i(n(47))),h=i(n(625)),m=i(n(38)),v=i(n(858)),g=i(n(93)),y=n(110),b=n(321),O={left:"right",right:"left",top:"down",bottom:"up"};function j(e){return-1!==["left","right"].indexOf(e.anchor)}function E(e){return"rtl"===e.theme.direction&&j(e)?O[e.anchor]:e.anchor}var k=function(e){return{root:{},docked:{flex:"0 0 auto"},paper:{overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:e.zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:"none"},paperAnchorLeft:{left:0,right:"auto"},paperAnchorRight:{left:"auto",right:0},paperAnchorTop:{top:0,left:0,bottom:"auto",right:0,height:"auto",maxHeight:"100%"},paperAnchorBottom:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},paperAnchorDockedLeft:{borderRight:"1px solid ".concat(e.palette.divider)},paperAnchorDockedTop:{borderBottom:"1px solid ".concat(e.palette.divider)},paperAnchorDockedRight:{borderLeft:"1px solid ".concat(e.palette.divider)},paperAnchorDockedBottom:{borderTop:"1px solid ".concat(e.palette.divider)},modal:{}}};t.styles=k;var w=function(e){function t(){var e,n;(0,u.default)(this,t);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(n=(0,l.default)(this,(e=(0,s.default)(t)).call.apply(e,[this].concat(r)))).mounted=!1,n}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"render",value:function(){var e=this.props,t=(e.anchor,e.BackdropProps),n=e.children,i=e.classes,u=e.className,c=e.elevation,l=e.ModalProps,s=(l=void 0===l?{}:l).BackdropProps,p=(0,a.default)(l,["BackdropProps"]),m=e.onClose,b=e.open,j=e.PaperProps,k=e.SlideProps,w=(e.theme,e.transitionDuration),_=e.variant,T=(0,a.default)(e,["anchor","BackdropProps","children","classes","className","elevation","ModalProps","onClose","open","PaperProps","SlideProps","theme","transitionDuration","variant"]),C=E(this.props),D=f.default.createElement(g.default,(0,r.default)({elevation:"temporary"===_?c:0,square:!0,className:(0,d.default)(i.paper,i["paperAnchor".concat((0,y.capitalize)(C))],(0,o.default)({},i["paperAnchorDocked".concat((0,y.capitalize)(C))],"temporary"!==_))},j),n);if("permanent"===_)return f.default.createElement("div",(0,r.default)({className:(0,d.default)(i.root,i.docked,u)},T),D);var R=f.default.createElement(v.default,(0,r.default)({in:b,direction:O[C],timeout:w,appear:this.mounted},k),D);return"persistent"===_?f.default.createElement("div",(0,r.default)({className:(0,d.default)(i.root,i.docked,u)},T),R):f.default.createElement(h.default,(0,r.default)({BackdropProps:(0,r.default)({},t,s,{transitionDuration:w}),className:(0,d.default)(i.root,i.modal,u),open:b,onClose:m},T,p),R)}}]),t}(f.default.Component);w.defaultProps={anchor:"left",elevation:16,open:!1,transitionDuration:{enter:b.duration.enteringScreen,exit:b.duration.leavingScreen},variant:"temporary"};var _=(0,m.default)(k,{name:"MuiDrawer",flip:!1,withTheme:!0})(w);t.default=_},1473:function(e,t,n){"use strict";var i=n(12);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.default}});var r=i(n(1463))},1474:function(e,t,n){"use strict";var i=n(12);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.default}});var r=i(n(1465))},1485:function(e,t,n){"use strict";var i=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(2)),o=(0,i(n(44)).default)(r.default.createElement(r.default.Fragment,null,r.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),r.default.createElement("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})),"MoreVert");t.default=o},1548:function(e,t,n){"use strict";var i=n(17),r=n(6),o=n.n(r),a=n(7),u=n.n(a),c=n(8),l=n.n(c),s=n(18),p=(function(e){function t(e){return o()(this,t),u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"InternetDomains","Request",{id:e}))}l()(t,e)}(s.a),function(e){function t(e){return o()(this,t),u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"InternetDomains","List",{orgId:e}))}return l()(t,e),t}(s.a)),f=function(e){function t(e){return o()(this,t),u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"InternetDomains","Update",{page:e}))}return l()(t,e),t}(s.a),d=function(e){function t(e){return o()(this,t),u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"InternetDomains","Create",{page:e}))}return l()(t,e),t}(s.a),h=function(e){function t(e){return o()(this,t),u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"InternetDomains","Delete",{id:e}))}return l()(t,e),t}(s.a),m=n(21);n.d(t,"c",function(){return v}),n.d(t,"d",function(){return g}),n.d(t,"a",function(){return y}),n.d(t,"b",function(){return b});var v=function(e){return i.a.send(new p(e),Object(m.g)())},g=function(e){return i.a.send(new f(e),Object(m.f)())},y=function(e){return i.a.send(new d(e),Object(m.c)())},b=function(e){return i.a.send(new h(e),Object(m.d)())}},1596:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return u});var i=n(445),r=n(1548),o=n(87),a=function(e){return function(t,n){return t(Object(i.e)()),r.c(e).then(function(e){return t(Object(i.f)(e.list)),e.list}).catch(function(e){throw t(Object(i.d)(e)),e})}},u=function(e){return function(t){return t(Object(o.b)(function(e){return!e.internetDomains.fetching&&e.internetDomains.fetched},a(e)))}}},1833:function(e,t,n){"use strict";var i=n(6),r=n.n(i),o=n(10),a=n.n(o),u=n(7),c=n.n(u),l=n(8),s=n.n(l),p=n(11),f=n.n(p),d=n(2),h=n(14),m=n(95),v=n(13),g=n(26),y=n.n(g),b=n(0),O=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var u=e.length-1;u>=0;u--)(r=e[u])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},j=function(e){function t(){return r()(this,t),c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s()(t,e),a()(t,[{key:"onKeyDown",value:function(e){"Enter"===e.key&&!1===e.shiftKey&&(e.preventDefault(),this.props.handleSubmit(this.props.submitHandler)(e))}},{key:"render",value:function(){var e=this.props.fields.removeConfirmationStr;return d.createElement("form",null,d.createElement(y.a,{fullWidth:!0,label:this.props.i18n.t("Подтверждение удаление проекта"),value:e.value,onKeyDown:this.onKeyDown,onChange:e.onChange,error:e.touched&&e.error,helperText:e.touched&&Object(b.toOption)(e.error).map(function(e){return e}).getOrNull()}))}}]),t}(d.Component);j=O([v.autobind],j),t.a=Object(h.connect)(function(e){return{i18n:e.i18n}},function(e){return{}},function(e,t,n){return Object.assign({},e,n)},{withRef:!0})(Object(m.reduxForm)({form:"deleteConfirmationForm",fields:["removeConfirmationStr","id"],validate:function(e,t){var n={};return e.removeConfirmationStr!=="DELETE "+e.id&&(n.removeConfirmationStr=t.i18n.t("Необходимо подтверждение")),n}})(j))},1839:function(e,t,n){"use strict";var i=n(6),r=n.n(i),o=n(10),a=n.n(o),u=n(7),c=n.n(u),l=n(8),s=n.n(l),p=n(11),f=n.n(p),d=n(2),h=n(14),m=n(95),v=n(13),g=n(30),y=n.n(g),b=n(24),O=n.n(b),j=n(34),E=n.n(j),k=n(32),w=n.n(k),_=n(26),T=n.n(_),C=n(54),D=n.n(C),R=n(156),x=n.n(R),P=n(1),I=n(0),L=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var u=e.length-1;u>=0;u--)(r=e[u])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},S=function(e){function t(){return r()(this,t),c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s()(t,e),a()(t,[{key:"onDomainTargetTypeChanged",value:function(e){this.props.fields.domainTargetType.onChange(e.target.value)}},{key:"getDomainValue",value:function(){return"https://"+this.props.fields.domain.value}},{key:"onDomainChange",value:function(e){this.props.fields.domain.onChange(e.target.value.slice(8))}},{key:"render",value:function(){var e=this.props.fields,t=e.name,n=e.domainTargetType,i=e.domain;return d.createElement("form",{style:{display:"flex",flexWrap:"wrap"}},d.createElement(T.a,{fullWidth:!0,autoFocus:!0,value:t.value,onChange:t.onChange,label:this.props.i18n.t("Название"),error:t.touched&&t.error,helperText:t.touched&&Object(I.toOption)(t.error).map(function(e){return e}).getOrNull()}),d.createElement(w.a,{fullWidth:!0},d.createElement(E.a,null,this.props.i18n.t("Тип")),d.createElement(y.a,{value:n.value,onChange:this.onDomainTargetTypeChanged,error:n.touched&&n.error,fullWidth:!0},d.createElement(O.a,{value:P.DomainTargetOrganisation.$Type.value},d.createElement(D.a,{primary:this.props.i18n.t("Организация")})),d.createElement(O.a,{value:P.DomainTargetWebPage.$Type.value},d.createElement(D.a,{primary:this.props.i18n.t("Веб страница")}))),Object(I.toOption)(n.error).map(function(e){return d.createElement(x.a,null,e)}).getOrNull()),d.createElement(T.a,{fullWidth:!0,autoFocus:!0,value:this.getDomainValue(),onChange:this.onDomainChange,label:this.props.i18n.t("Домен"),error:i.touched&&i.error,helperText:i.touched&&Object(I.toOption)(i.error).map(function(e){return e}).getOrNull()}))}}]),t}(d.Component);S=L([v.autobind],S),t.a=Object(h.connect)(function(e){return{i18n:e.i18n}},function(e){return{}},function(e,t,n){return Object.assign({},e,n)},{withRef:!0})(Object(m.reduxForm)({form:"newDomainForm",fields:["name","domainTargetType","domain"],validate:function(e,t){var n={};return e.name&&0!==e.name.trim().length||(n.name=t.i18n.t("Обязательное значение")),e.domainTargetType&&0!==e.domainTargetType.trim().length||(n.domainTargetType=t.i18n.t("Обязательное значение")),e.domain&&0!==e.domain.trim().length?!/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9](?:\.[a-zA-Z]{2,})+$/i.test(e.domain)&&e.domain.indexOf("localhost")<0&&(n.domain=t.i18n.t("Неверный домен")):n.domain=t.i18n.t("Обязательное значение"),n}})(S))},1840:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(1),r=function(e,t){return new i.InternetDomain(e.name,t,e.domain,function(e){switch(e.domainTargetType){case i.DomainTargetOrganisation.$Type.value:return new i.DomainTargetOrganisation;case i.DomainTargetWebPage.$Type.value:return new i.DomainTargetWebPage;default:throw"Unknown domain target type"}}(e))}},2360:function(e,t,n){var i,r=r||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},i=t.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in i,o=/constructor/i.test(e.HTMLElement)||e.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent),u=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},c=function(e){setTimeout(function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()},4e4)},l=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},s=function(t,s,p){p||(t=l(t));var f,d=this,h="application/octet-stream"===t.type,m=function(){!function(e,t,n){for(var i=(t=[].concat(t)).length;i--;){var r=e["on"+t[i]];if("function"==typeof r)try{r.call(e,n||e)}catch(e){u(e)}}}(d,"writestart progress write writeend".split(" "))};if(d.readyState=d.INIT,r)return f=n().createObjectURL(t),void setTimeout(function(){var e,t;i.href=f,i.download=s,e=i,t=new MouseEvent("click"),e.dispatchEvent(t),m(),c(f),d.readyState=d.DONE});!function(){if((a||h&&o)&&e.FileReader){var i=new FileReader;return i.onloadend=function(){var t=a?i.result:i.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,d.readyState=d.DONE,m()},i.readAsDataURL(t),void(d.readyState=d.INIT)}f||(f=n().createObjectURL(t)),h?e.location.href=f:e.open(f,"_blank")||(e.location.href=f);d.readyState=d.DONE,m(),c(f)}()},p=s.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=l(e)),navigator.msSaveOrOpenBlob(e,t)}:(p.abort=function(){},p.readyState=p.INIT=0,p.WRITING=1,p.DONE=2,p.error=p.onwritestart=p.onprogress=p.onwrite=p.onabort=p.onerror=p.onwriteend=null,function(e,t,n){return new s(e,t||e.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */e.exports?e.exports.saveAs=r:null!==n(2361)&&null!==n(2362)&&(void 0===(i=function(){return r}.call(t,n,t,e))||(e.exports=i))},2361:function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},2362:function(e,t,n){e.exports=n(97)(339)},2363:function(e,t,n){var i=n(2364);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(121)(i,r);i.locals&&(e.exports=i.locals)},2364:function(e,t,n){(e.exports=n(120)(!1)).push([e.i,".TemplatesList__inputs {\n  display: flex;\n  align-items: flex-end; }\n  .TemplatesList__inputs > div:last-child {\n    margin-left: 20px; }\n\n.TemplatesList__buttons {\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 15px; }\n  .TemplatesList__buttons > div:not(:last-child) {\n    margin-right: 20px; }\n\n.TemplatesList__remove {\n  position: absolute;\n  top: 0;\n  right: 0; }\n",""])},2732:function(e,t,n){"use strict";n.r(t);var i=n(6),r=n.n(i),o=n(10),a=n.n(o),u=n(7),c=n.n(u),l=n(8),s=n.n(l),p=n(11),f=n.n(p),d=n(2),h=n(13),m=n(14),v=n(2360),g=n(25),y=n.n(g),b=n(19),O=n.n(b),j=n(93),E=n.n(j),k=n(86),w=n.n(k),_=n(414),T=n.n(_),C=n(1485),D=n.n(C),R=n(415),x=n(678),P=n(495),I=n(17),L=n(18),S=function(e){function t(){return r()(this,t),c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"ConfigTemplates","List"))}return s()(t,e),t}(L.a),N=function(e){function t(e,n,i){return r()(this,t),c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"ConfigTemplates","CreateEventlineTemplate",{name:e,description:n,eventLineId:i}))}return s()(t,e),t}(L.a),F=function(e){function t(e,n){return r()(this,t),c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"ConfigTemplates","ApplyTemplate",{templateId:e,name:n}))}return s()(t,e),t}(L.a),W=function(e){function t(e){return r()(this,t),c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"ConfigTemplates","SaveToFile",{templateId:e}))}return s()(t,e),t}(L.a),A=function(e){function t(e,n){return r()(this,t),c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"ConfigTemplates","LoadFromFile",{name:e,fileId:n}))}return s()(t,e),t}(L.a),M=function(e){function t(e){return r()(this,t),c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"ConfigTemplates","Delete",{templateId:e}))}return s()(t,e),t}(L.a),z=n(21),q=function(){return function(e){return e(Object(P.e)()),I.a.send(new S,Object(z.g)()).then(function(t){return e(Object(P.f)(t.list)),t}).catch(function(t){throw e(Object(P.d)(t)),t})}},B=function(e){return I.a.send(new M(e),Object(z.f)())},U=n(1),H=n(0),V=n(95),$=n(32),K=n.n($),Z=n(26),G=n.n(Z),J=n(34),Y=n.n(J),Q=n(24),X=n.n(Q),ee=n(30),te=n.n(ee),ne=n(1596),ie=n(620),re=n(542),oe=n.n(re),ae=n(71),ue=n(201),ce=n(1839),le=n(1548),se=n(83),pe=n(1840),fe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var u=e.length-1;u>=0;u--)(r=e[u])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},de=function(e){function t(){return r()(this,t),c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s()(t,e),a()(t,[{key:"onDomainChange",value:function(e){this.props.fields.domain.onChange(e.target.value)}},{key:"renderDomainEditor",value:function(){return d.createElement("div",{style:{display:"flex",flexDirection:"column"}},d.createElement("div",{style:{flex:1}},d.createElement(K.a,{fullWidth:!0},d.createElement(Y.a,null,this.props.i18n.t("Домен")),d.createElement(te.a,{value:this.props.fields.domain.value,onChange:this.onDomainChange},this.props.internetDomains.list.filter(function(e){return e.entity.target.tpe.value===U.DomainTargetOrganisation.$Type.value}).map(function(e){return d.createElement(X.a,{value:e.id.value,key:e.id.value},e.entity.name)})))),d.createElement("div",{style:{marginTop:"15px"}},d.createElement("a",{href:"#",onClick:this.onDomainCreateRequested,style:{color:"#4285f4"}},this.props.i18n.t("Или добавить новый административный домен"))))}},{key:"onDomainCreateRequested",value:function(e){var t=this;e.preventDefault();var n=void 0,i=this.props.openDialog(this.props.i18n.t("Создание домена"),d.createElement(ce.a,{ref:function(e){return n=Object(H.toOption)(e).flatMap(function(e){return Object(H.toOption)(e.wrappedInstance)})},onSubmit:function(e){return function(e,n){return new Promise(function(i,r){return t.props.organisation.data.map(function(o){Object(le.a)(Object(pe.a)(e,o.id)).then(function(e){i(e),t.props.dispatch(Object(ne.a)(o.id)),t.props.dispatch(Object(ae.h)(t.props.i18n.t("Домен создан!"))),t.props.handleDialogClose(n)}).catch(function(e){r(e)})}).getOrElse(function(){r("Organisation has not been provided")})}).catch(function(e){return t.props.dispatch(Object(ue.b)(e))})}(e,i)}}),[d.createElement(oe.a,{variant:"raised",style:{marginRight:"10px"},onClick:function(){return t.props.handleDialogClose(i)}},this.props.i18n.t("Закрыть")),d.createElement(oe.a,{variant:"raised",onClick:function(){return n.map(function(e){return e.submit()})},color:"primary"},this.props.i18n.t("Сохранить"))])}},{key:"render",value:function(){var e=this.props,t=e.handleSubmit,n=(e.pristine,e.submitting,e.fields),i=n.name,r=n.description;return d.createElement("form",{onSubmit:t},d.createElement(G.a,{fullWidth:!0,autoFocus:!0,value:i.value,onChange:i.onChange,label:this.props.i18n.t("Название"),error:i.touched&&i.error,helperText:i.touched&&Object(H.toOption)(i.error).map(function(e){return e}).getOrNull()}),d.createElement(G.a,{fullWidth:!0,value:r.value,onChange:r.onChange,label:this.props.i18n.t("Описание")}),this.renderDomainEditor())}}]),t}(d.Component);de=fe([h.autobind],de);var he=Object(m.connect)(function(e){return{i18n:e.i18n,currentForm:e.currentForm,formFields:e.fields,organisation:e.organisation,internetDomains:e.internetDomains}},function(e){return{}},function(e,t,n){return Object.assign({},e,n)},{withRef:!0})(Object(V.reduxForm)({form:"newProjectForm",fields:["name","description","domain"],validate:function(e,t){var n={};return e.name&&0!==e.name.trim().length||(n.name=t.i18n.t("Обязательное значение!")),n}})(Object(ie.a)([function(e){e.organisation.organisationId.foreach(function(t){e.dispatch(Object(ne.b)(t))})}])(Object(se.a)(de)))),me=n(98),ve=n.n(me),ge=n(107),ye=n.n(ge),be=n(631),Oe=n.n(be),je=(n(2363),n(623)),Ee=n(99),ke=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var u=e.length-1;u>=0;u--)(r=e[u])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},we=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_e=function(e){function t(e){r()(this,t);var n=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={selectedTemplate:new H.None,name:"",applying:!1},n}return s()(t,e),a()(t,[{key:"handleNameChange",value:function(e){this.setState({name:e.target.value})}},{key:"handleItemClick",value:function(e){this.setState({selectedTemplate:Object(H.toOption)(e)})}},{key:"handleApplyTemplate",value:function(){var e=this;this.setState({applying:!0}),this.state.selectedTemplate.foreach(function(t){return e.props.handleSubmit((n=t,i=e.state.name,I.a.send(new F(n,i),Object(z.f)())),"create");var n,i})}},{key:"handleTemplateDelete",value:function(){var e=this;this.state.selectedTemplate.foreach(function(t){return B(t).then(function(t){return e.props.dispatch(q())})})}},{key:"handleTemplateSave",value:function(){var e=this;this.state.selectedTemplate.foreach(function(t){return e.props.auth.token.foreach(function(n){return(i=t,I.a.send(new W(i),Object(z.f)())).then(function(t){return Object(je.b)(t.id,n,e.props.cdnAddress)});var i})})}},{key:"fileInputHandler",value:function(e){this.fileInput=Object(H.toOption)(e)}},{key:"fileChanged",value:function(e){var t=this,n=e.target.files[0];Object(Ee.h)(n,this.props.cdnAddress,this.props.auth.token,this.props.organisation.organisationId,new H.None,new H.None,new H.None).then(function(e){return t.props.handleSubmit((n=t.state.name,i=e,I.a.send(new A(n,i),Object(z.f)())),"create");var n,i}).catch(function(e){return console.error("File uploaded with error",e)})}},{key:"onFileLoadClick",value:function(){this.fileInput.foreach(function(e){e.click()})}},{key:"render",value:function(){var e=this;return d.createElement("div",null,d.createElement("input",{ref:this.fileInputHandler,type:"file",onChange:this.fileChanged,style:{display:"none"}}),d.createElement("div",{className:"TemplatesList__inputs"},d.createElement(G.a,{fullWidth:!0,label:this.props.i18n.t("Название"),value:this.state.name,onChange:this.handleNameChange}),d.createElement(O.a,{style:{minWidth:200},disabled:!this.state.name,onClick:this.onFileLoadClick},d.createElement(Oe.a,null),this.props.i18n.t("Создать из файла"))),d.createElement(ve.a,{style:{width:"100%"}},this.props.eventLineTemplates.list.map(function(t,n){return d.createElement(ye.a,{key:n,onClick:function(n){return e.handleItemClick(t.id)}},d.createElement("div",{className:"TemplatesList__itemInfo"},t.id.value,". ",t.entity.name),e.state.selectedTemplate.filter(function(e){return e.value===t.id.value}).map(function(n){return d.createElement("div",{className:"TemplatesList__hidden"},d.createElement("div",{className:"TemplatesList__description"},t.entity.description),d.createElement("div",{className:"TemplatesList__remove"},d.createElement(y.a,{onClick:e.handleTemplateDelete},d.createElement(T.a,null))),d.createElement("div",{className:"TemplatesList__buttons"},d.createElement(O.a,{onClick:e.handleTemplateSave},e.props.i18n.t("Сохранить в файл")),d.createElement(O.a,{color:"primary",disabled:e.state.applying||!e.state.name,onClick:e.handleApplyTemplate},e.props.i18n.t("Выбрать"))))}).getOrNull())})))}}]),t}(d.Component);_e=ke([h.autobind,we("design:paramtypes",[Object])],_e);var Te,Ce=Object(m.connect)(function(e){return{organisation:e.organisation,auth:e.auth,i18n:e.i18n,eventLineTemplates:e.eventLineTemplates,cdnAddress:e.config.cdnAddress}})(_e),De=n(216),Re=n(627),xe=n(1467),Pe=n(3),Ie=n(136),Le=n(1461),Se=n(59),Ne=n(46),Fe=n(633),We=n(1833),Ae=n(262),Me=n(79),ze=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var u=e.length-1;u>=0;u--)(r=e[u])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},qe=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Be=Te=function(e){function t(e){return r()(this,t),c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,xe.a.screenInitialState()))}return s()(t,e),a()(t,[{key:"renderNavigation",value:function(){return d.createElement(Re.a,null)}},{key:"openEventLineSettings",value:function(e,t){"create"===t&&this.props.dispatch(Object(Me.L)(e,new U.Id(U.FormType.FORM)))}},{key:"handleSubmit",value:function(e,t){var n=this;return new Promise(function(i,r){return e.then(function(e){i(e),n.props.dispatch(Object(ae.h)(n.props.i18n.t(("create"===t?"Создание":"Сохранение")+" успешно завершено"))),n.handleDialogClose(!1),n.props.user.userRole.map(function(e){return n.props.dispatch(Object(x.d)(e.entity.organisationId))}),n.openEventLineSettings(e.id,t)}).catch(function(e){r(e),n.props.dispatch(Object(ae.h)(n.props.i18n.t(("create"===t?"Создание":"Сохранение")+" завершилось ошибкой")))})})}},{key:"openTemplates",value:function(){this.props.dispatch(q()),this.openDialog(this.props.i18n.t("Создать на основе шаблона"),d.createElement(Ce,{handleSubmit:this.handleSubmit}))}},{key:"openEditForm",value:function(e,t,n){var i=this,r=void 0;this.openDialog(e,d.createElement(he,{ref:function(e){return r=Object(H.toOption)(e).flatMap(function(e){return Object(H.toOption)(e.wrappedInstance)})},initialValues:n,onSubmit:t}),[d.createElement(O.a,{onClick:function(){return i.handleDialogClose(!1)},style:{marginRight:"10px"}},this.props.i18n.t("Закрыть")),d.createElement(Fe.a,{variant:"raised",color:"primary",onClick:function(){return r.map(function(e){return e.submit()})},formName:"newProjectForm"},this.props.i18n.t("Сохранить"))])}},{key:"onCreateRequest",value:function(){var e=this;this.openEditForm(this.props.i18n.t("Новый проект"),function(t){return e.handleSubmit(Object(x.a)(new U.EventLine(t.name,Object(H.toOption)(t.description),e.props.user.userRole.map(function(e){return e.entity.organisationId}).getOrElse(function(){throw"UserRole has not been loaded"}),Se.v4(),Object(H.toOption)(t.domain).map(function(e){return new U.Id(e)}))),"create")},Te.defaultValues())}},{key:"onEditRequest",value:function(e){var t=this;this.openEditForm(this.props.i18n.t("Редактирование проекта"),function(n){return t.handleSubmit(Object(x.e)(Pe(e,{entity:{$set:new U.EventLine(n.name,Object(H.toOption)(n.description),e.entity.organisationId,e.entity.uid,Object(H.toOption)(n.domain).map(function(e){return new U.Id(e)}))}})),"update")},{name:e.entity.name,description:e.entity.description.getOrNull(),domain:e.entity.domainId.map(function(e){return e.value}).getOrElse(function(){return""}),logo:void 0,emails:[]})}},{key:"onExportFilesRequest",value:function(e){var t=this;this.props.auth.token.matchWith(function(t){Object(x.c)(t,e.id).then(function(e){Object(v.saveAs)(e,"archive.zip")})},function(){t.props.dispatch(Object(ae.h)(t.props.i18n.t("Токен авторизации отсутствует")))}),this.props.closeMenu()}},{key:"onDeleteRequest",value:function(e){var t=this,n=this.props.i18n;this.openDeleteForm(n.t("Удаление проекта"),function(n){return n.removeConfirmationStr==="DELETE "+e.id.value?Object(x.b)(e.id).then(function(e){t.props.dispatch(Object(ae.h)(t.props.i18n.t("Удаление успешно завершено"))),t.handleDialogClose(!1),t.props.dispatch(Object(x.d)(new U.Id(t.props.params.formId)))}).catch(function(e){t.props.dispatch(Object(ae.h)(t.props.i18n.t("Удаление завершилось ошибкой")))}):new Promise(function(e,t){})},e,{id:e.id.value})}},{key:"openDeleteForm",value:function(e,t,n,i){var r=this,o=this.props.i18n,a=void 0;this.openDialog(e,d.createElement("div",null,d.createElement("p",null,this.props.i18n.t("Данное действие невозможно отменить"),"."),d.createElement("p",null,o.t("ИД проекта")," - ",n.id.value),d.createElement("p",null,o.t("Название проекта")," - ",n.entity.name),d.createElement("p",null,o.t("Введите")," ",d.createElement("strong",null,"DELETE ",n.id.value)," ",o.t('если действительно хотите удалить проект и нажмите "ОК"')),d.createElement(We.a,{ref:function(e){return a=Object(H.toOption)(e).flatMap(function(e){return Object(H.toOption)(e.wrappedInstance)})},initialValues:i,submitHandler:function(e){return t(e)},onSubmit:t})),[d.createElement(O.a,{variant:"raised",onClick:function(){return r.handleDialogClose(!0)},style:{marginRight:"10px"}},this.props.i18n.t("Отмена")),d.createElement(Fe.a,{type:"submit",variant:"raised",color:"primary",formName:"deleteConfirmationForm",onClick:function(){return a.map(function(e){return e.submit()})}},this.props.i18n.t("ОК"))])}},{key:"canEdit",value:function(e){return this.props.user.userRole.map(function(t){return t.entity.canAdminEvent(e)}).getOrElse(function(){return!1})}},{key:"isTemplateExist",value:function(e){return this.props.eventLineTemplates.list.filter(function(e){return e.entity.template instanceof U.EventLineDef}).findIndex(function(t){return t.entity.template.eventLine.id.value===e.value})>=0}},{key:"createTemplate",value:function(e,t,n,i){var r=this;this.props.dispatch(Object(P.e)()),function(e,t,n){return I.a.send(new N(e,t,n),Object(z.c)())}(e,t,n).then(function(e){r.props.dispatch(q()),r.props.dispatch(Object(ae.h)(r.props.i18n.t(i?"Шаблон успешно обновлен":"Шаблон успешно создан")))}).catch(function(e){r.props.dispatch(Object(P.d)(e)),r.props.dispatch(Object(ae.h)(r.props.i18n.t("Во время создания шаблона произошла ошибка")))})}},{key:"handleCreateTemplate",value:function(e,t,n){var i=this;this.isTemplateExist(n)?Object(H.headOption)(this.props.eventLineTemplates.list.filter(function(e){return e.entity.template instanceof U.EventLineDef}).filter(function(e){return e.entity.template.eventLine.id.value===n.value})).map(function(e){return e.id}).foreach(function(r){return B(r).then(function(r){return i.createTemplate(e,t,n,!0)})}):this.createTemplate(e,t,n);this.props.closeMenu()}},{key:"onMoreClick",value:function(e,t){var n=this;this.props.openMenu(e.currentTarget,[d.createElement(X.a,{key:"exportFiles",onClick:function(){return n.onExportFilesRequest(t)}},this.props.i18n.t("Выгрузить системные файлы")),d.createElement(X.a,{key:"archive",onClick:function(){return n.handleCreateTemplate(t.entity.name,t.entity.description.getOrElse(function(){return""}),t.id)}},this.props.i18n.t("Создать шаблон"))])}},{key:"render",value:function(){var e=this;return this.renderScreenBody({className:""},d.createElement(E.a,{className:"DefaultPage__paper",style:{flex:1}},d.createElement(De.b,{leftButtonGroup:[d.createElement(O.a,{onClick:function(){return e.openTemplates()}},this.props.i18n.t("Создать используя шаблон"))]},d.createElement(O.a,{variant:"raised",color:"primary",onClick:function(){return e.onCreateRequest()}},this.props.i18n.t("Создать"))),d.createElement(R.a,{showId:!0,withActions:!0,fetching:this.props.eventLines.fetching,onRecordSelected:this.onEditRequest,error:this.props.eventLines.error,empty:!this.props.eventLines.fetching&&0===this.props.eventLines.list.length,headers:[{id:"evenLineName",title:this.props.i18n.t("Название")}],rows:this.props.eventLines.fetching?[]:this.props.eventLines.list.map(function(t){return{payload:t,id:t.id.value,fields:[t.entity.name],buttons:e.canEdit(t.id)?[d.createElement(y.a,{key:"edit",style:Ne.f,onClick:function(){return e.onEditRequest(t)}},d.createElement(w.a,{style:Ne.g})),d.createElement(y.a,{key:"delete",style:Ne.f,onClick:function(){return e.onDeleteRequest(t)}},d.createElement(T.a,{style:Ne.g})),d.createElement(y.a,{key:"more",style:Ne.f,onClick:function(n){return e.onMoreClick(n,t)}},d.createElement(D.a,{style:Ne.g}))]:[d.createElement(y.a,null),d.createElement(y.a,null)],canEdit:e.canEdit(t.id)}})})))}}],[{key:"defaultValues",value:function(){return{name:"",emails:[]}}}]),t}(xe.a);Be=Te=ze([h.autobind,qe("design:paramtypes",[Object])],Be);t.default=Object(m.connect)(function(e){return{eventLines:e.eventLines,eventLineTemplates:e.eventLineTemplates,i18n:e.i18n,user:e.user,auth:e.auth}})(Object(Le.a)(Object(Ie.a)(function(e){e.isTokenChecked&&e.dispatch(q())},function(){},function(e,t){e.isTokenChecked&&!t.isTokenChecked&&e.dispatch(q())})(Object(Ae.a)(Be))))}}]);