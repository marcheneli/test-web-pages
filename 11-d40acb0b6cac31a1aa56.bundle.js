(window.webpackJsonpwww=window.webpackJsonpwww||[]).push([[11],{1471:function(e,t,n){"use strict";var i=n(1536),o=n(1537);var r=function(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:Object(o.default)(e,t,n)},a=n(431);var c=function(e,t){for(var n=e.length;n--&&Object(a.a)(t,e[n],0)>-1;);return n};var u=function(e,t){for(var n=-1,i=e.length;++n<i&&Object(a.a)(t,e[n],0)>-1;);return n};var l=function(e){return e.split("")},s=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var f=function(e){return s.test(e)},p="[\\ud800-\\udfff]",d="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",h="\\ud83c[\\udffb-\\udfff]",m="[^\\ud800-\\udfff]",g="(?:\\ud83c[\\udde6-\\uddff]){2}",b="[\\ud800-\\udbff][\\udc00-\\udfff]",v="(?:"+d+"|"+h+")"+"?",O="[\\ufe0e\\ufe0f]?"+v+("(?:\\u200d(?:"+[m,g,b].join("|")+")[\\ufe0e\\ufe0f]?"+v+")*"),y="(?:"+[m+d+"?",d,g,b,p].join("|")+")",E=RegExp(h+"(?="+h+")|"+y+O,"g");var w=function(e){return e.match(E)||[]};var j=function(e){return f(e)?w(e):l(e)},x=n(444),k=/^\s+|\s+$/g;t.a=function(e,t,n){if((e=Object(x.default)(e))&&(n||void 0===t))return e.replace(k,"");if(!e||!(t=Object(i.default)(t)))return e;var o=j(e),a=j(t),l=u(o,a),s=c(o,a)+1;return r(o,l,s).join("")}},1497:function(e,t,n){"use strict";var i=n(6),o=n.n(i),r=n(10),a=n.n(r),c=n(7),u=n.n(c),l=n(8),s=n.n(l),f=n(11),p=n.n(f),d=n(2),h=n(13),m=n(160),g=n.n(m),b=function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":p()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},v=function(e){function t(){return o()(this,t),u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s()(t,e),a()(t,[{key:"render",value:function(){return d.createElement("div",{style:{height:"210px",boxSizing:"border-box",width:"100%",textAlign:"center",padding:"30px",opacity:1}},d.createElement(g.a,{size:150,thickness:2}))}}]),t}(d.Component);v=b([h.autobind],v),t.a=v},1536:function(e,t,n){e.exports=n(49)(157)},1537:function(e,t,n){e.exports=n(49)(196)},1546:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return c});var i=n(130),o=n(1469),r=n(425),a=function(){return function(e,t){t().organisation.infoFetching||t().organisation.infoFetched||(e(Object(i.t)()),o.f().then(function(t){e(Object(i.q)(t))}).catch(function(t){e(Object(i.s)(t))}))}},c=function(e){return function(t){return t(Object(i.m)()),r.e(e).then(function(e){return t(Object(i.n)(e.list)),e}).catch(function(e){throw t(Object(i.l)(e)),e})}}},1614:function(e,t,n){e.exports=n(49)(39)},1627:function(e,t,n){e.exports=n(97)(363)},1817:function(e,t,n){e.exports=n(49)(117)},1818:function(e,t,n){e.exports=n(49)(65)},1819:function(e,t,n){e.exports=n(49)(94)},1834:function(e,t,n){e.exports=n(49)(27)},1835:function(e,t,n){e.exports=n(49)(36)},1836:function(e,t,n){e.exports=n(49)(42)},1837:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"c",function(){return u}),n.d(t,"d",function(){return l}),n.d(t,"b",function(){return s});var i=n(1964),o=n.n(i),r=n(485),a=n(82),c="https://www.facebook.com/v2.11/dialog/oauth",u="https://accounts.google.com/o/oauth2/v2/auth",l="https://www.linkedin.com/oauth/v2/authorization",s=function(){return function(e){e(Object(r.e)()),o()({method:"post",url:a.default.server_address+"/api/oauth/params"}).then(function(t){e(Object(r.f)({facebook:{clientId:t.data.facebook.clientId,redirectUrl:t.data.facebook.redirectUrl},google:{clientId:t.data.google.clientId,redirectUrl:t.data.google.redirectUrl},linkedIn:{clientId:t.data.linkedin.clientId,redirectUrl:t.data.linkedin.redirectUrl}}))}).catch(function(t){e(Object(r.d)(t))})}}},1897:function(e,t,n){e.exports=n(49)(233)},1898:function(e,t,n){e.exports=n(49)(40)},1900:function(e,t,n){e.exports=n(49)(116)},1901:function(e,t,n){e.exports=n(49)(26)},1902:function(e,t,n){e.exports=n(49)(245)},1948:function(e,t,n){e.exports=n(49)(97)},1949:function(e,t,n){e.exports=n(49)(118)},1950:function(e,t,n){e.exports=n(49)(105)},1951:function(e,t,n){e.exports=n(49)(249)},1952:function(e,t,n){e.exports=n(49)(96)},1953:function(e,t,n){e.exports=n(49)(264)},1954:function(e,t,n){e.exports=n(49)(265)},1955:function(e,t,n){e.exports=n(49)(111)},1956:function(e,t,n){e.exports=n(49)(241)},1957:function(e,t,n){e.exports=n(49)(102)},1958:function(e,t,n){e.exports=n(49)(247)},1959:function(e,t,n){e.exports=n(49)(230)},1960:function(e,t,n){var i=n(1961);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(121)(i,o);i.locals&&(e.exports=i.locals)},1961:function(e,t,n){(e.exports=n(120)(!1)).push([e.i,".signinPage {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  padding-top: 0;\n  background-color: #fff; }\n\n.signinPage {\n  padding-top: 60px;\n  height: auto; }\n  .signinPage .form {\n    width: 300px;\n    margin: auto; }\n    .signinPage .form .field {\n      height: 72px;\n      display: flex;\n      justify-content: center;\n      align-items: flex-end; }\n\n.SigninPage .Screen__container {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  min-height: 0;\n  width: 100%;\n  background-color: #eeeded;\n  padding: 20px; }\n\n.SigninPage__paper {\n  display: flex;\n  flex-direction: column;\n  min-height: 0;\n  width: 300px; }\n",""])},1962:function(e,t,n){"use strict";var i=n(2),o=n(94),r=n.n(o);t.a=function(e){return i.createElement(r.a,Object.assign({},e),i.createElement("path",{d:"M17,2V2H17V6H15C14.31,6 14,6.81 14,7.5V10H14L17,10V14H14V22H10V14H7V10H10V6A4,4 0 0,1 14,2H17Z"}))}},1963:function(e,t,n){"use strict";var i=n(2),o=n(94),r=n.n(o);t.a=function(e){return i.createElement(r.a,Object.assign({},e),i.createElement("path",{d:"M21.35,11.1H12.18V13.83H18.69C18.36,17.64 15.19,19.27 12.19,19.27C8.36,19.27 5,16.25 5,12C5,7.9 8.2,4.73 12.2,4.73C15.29,4.73 17.1,6.7 17.1,6.7L19,4.72C19,4.72 16.56,2 12.1,2C6.42,2 2.03,6.8 2.03,12C2.03,17.05 6.16,22 12.25,22C17.6,22 21.5,18.33 21.5,12.91C21.5,11.76 21.35,11.1 21.35,11.1V11.1Z"}))}},2656:function(e,t,n){var i=n(2657);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(121)(i,o);i.locals&&(e.exports=i.locals)},2657:function(e,t,n){(e.exports=n(120)(!1)).push([e.i,"input:-webkit-autofill {\n  -webkit-box-shadow: 0 0 0 300px white inset; }\n",""])},2658:function(e,t,n){"use strict";var i=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(2)),r=(0,i(n(44)).default)(o.default.createElement(o.default.Fragment,null,o.default.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"}),o.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),"AccountCircle");t.default=r},2741:function(e,t,n){"use strict";n.r(t);var i,o=n(6),r=n.n(o),a=n(10),c=n.n(a),u=n(7),l=n.n(u),s=n(8),f=n.n(s),p=n(11),d=n.n(p),h=n(2),m=n(13),g=n(14),b=n(1471),v=n(93),O=n.n(v),y=n(1),E=n(95),w=n(234),j=n(26),x=n.n(j),k=n(30),C=n.n(k),S=n(45),_=n.n(S),A=n(25),I=n.n(A),R=n(54),P=n.n(R),L=n(33),F=n.n(L),T=n(203),M=n.n(T),W=n(24),U=n.n(W),N=n(189),V=n.n(N),H=n(32),D=n.n(H),z=n(34),B=n.n(z),G=n(357),q=n(358),J=n(1947),Z=n.n(J),$=(n(2656),n(154)),K=n(82),Q=n(0),X=n(51),Y=n(633),ee=function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":d()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},te=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":d()(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ne=i=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={languageSwitchAnchorElement:new Q.None},n}return f()(t,e),c()(t,[{key:"componentWillReceiveProps",value:function(e){e.error&&this.props.error!==e.error&&Object(Q.toOption)(this.captcha).foreach(function(e){e.reset()})}},{key:"onChangeLanguage",value:function(e){var t=this;w.changeLanguage(e,function(n,i){return t.props.dispatch(Object($.h)({func:i,code:e}))})}},{key:"onCheck",value:function(e){this.props.fields.specifyTerminal.onChange(e),e||this.props.fields.terminalID.onChange("")}},{key:"onLanguageMenuOpen",value:function(e){this.setState({languageSwitchAnchorElement:new Q.Some(Object(X.findDOMNode)(e.currentTarget))})}},{key:"onLanguageMenuClosed",value:function(){this.setState({languageSwitchAnchorElement:new Q.None})}},{key:"handleFormSubmit",value:function(e){this.props.submitFailed&&this.props.dispatch({type:"redux-form/STOP_SUBMIT",form:"signinForm"}),e.preventDefault(),K.default.captcha_enabled?(e.persist(),this.captcha.execute(),this.formSubmitEvent=e):this.props.handleSubmit&&this.props.handleSubmit(e)}},{key:"handleCaptchaChange",value:function(){if(this.formSubmitEvent)try{this.props.handleSubmit&&this.props.handleSubmit(this.formSubmitEvent)}catch(e){console.log(e,"handleCaptchaChange() {")}}},{key:"render",value:function(){var e=this,t=this.props,n=t.fields,o=n.name,r=n.email,a=n.password,c=n.terminalID,u=n.specifyTerminal,l=n.isAccount,s=n.captchaValue,f=(t.handleSubmit,this.props.terminals.list.sort(function(e,t){return"WEB"===e.entity.name?-1:"WEB"===t.entity.name?1:e.entity.name<t.entity.name?-1:e.entity.name>t.entity.name?1:0}).map(function(e){return h.createElement(U.a,{value:e.id.value,key:e.id.value},e.entity.name)}));return h.createElement("form",{onSubmit:this.handleFormSubmit,style:{position:"relative",margin:"20px 20px 0 20px"}},this.props.error?h.createElement("div",{style:{textAlign:"center",color:"#f44336",marginTop:"20px"}},this.props.error):null,!l.value&&h.createElement("div",null,h.createElement(x.a,{fullWidth:!0,value:o.value,onChange:function(t){e.props.submitFailed&&e.props.dispatch({type:"redux-form/STOP_SUBMIT",form:"signinForm"}),o.onChange(t.target.value)},label:this.props.i18n.t("Логин"),error:o.touched&&o.error,helperText:o.touched&&Object(Q.toOption)(o.error).map(function(e){return e}).getOrNull()})),l.value&&h.createElement("div",null,h.createElement(x.a,{fullWidth:!0,value:r.value,onChange:function(e){return r.onChange(e.target.value)},label:this.props.i18n.t("Email"),error:r.touched&&r.error,helperText:r.touched&&Object(Q.toOption)(r.error).map(function(e){return e}).getOrNull()})),h.createElement("div",null,h.createElement(x.a,{fullWidth:!0,type:"password",value:a.value,onChange:function(t){!0===e.props.submitFailed&&e.props.dispatch({type:"redux-form/STOP_SUBMIT",form:"signinForm"}),a.onChange(t.target.value)},label:this.props.i18n.t("Пароль"),error:a.touched&&a.error,helperText:a.touched&&Object(Q.toOption)(a.error).map(function(e){return e}).getOrNull()})),!l.value&&!this.props.withoutTerminals&&h.createElement("div",{style:{marginTop:"20px"}},h.createElement(F.a,{control:h.createElement(_.a,{checked:u.value,onChange:function(t,n){return e.onCheck(n)}}),label:this.props.i18n.t("Указать терминал")})),l.value||this.props.withoutTerminals||!0!==u.value?null:h.createElement("div",null,h.createElement(D.a,{fullWidth:!0},h.createElement(B.a,{htmlFor:"terminal"},this.props.i18n.t("Терминал")),h.createElement(C.a,{fullWidth:!0,inputProps:{id:"terminal"},value:c.value||"",onChange:function(e){return c.onChange(e.target.value)}},f))),K.default.captcha_enabled&&h.createElement("div",null,h.createElement(Z.a,{ref:function(t){e.captcha=t},size:"invisible",sitekey:K.default.captcha_key,onChange:function(t){s.onChange(t),e.handleCaptchaChange()}})),h.createElement("div",{style:{textAlign:"center",marginTop:"15px",marginBottom:"15px"}},h.createElement(Y.a,{type:"submit",formName:"signinForm",onClick:function(){}},this.props.i18n.t("auth|Войти"))),h.createElement("div",{style:{position:"absolute",right:"-15px",top:"-20px"}},h.createElement(I.a,{"aria-owns":this.state.languageSwitchAnchorElement.map(function(e){return"simple-menu"}).getOrElse(function(){return""}),"aria-haspopup":"true",onClick:this.onLanguageMenuOpen},i.getCurrentLanguageIcon()),h.createElement(M.a,{id:"simple-menu",anchorEl:this.state.languageSwitchAnchorElement.getOrUndefined(),open:this.state.languageSwitchAnchorElement.nonEmpty(),onClose:this.onLanguageMenuClosed},h.createElement(U.a,{onClick:function(){e.onChangeLanguage("ru"),e.onLanguageMenuClosed()}},h.createElement(V.a,null,h.createElement(G.a,null)),h.createElement(P.a,{primary:this.props.i18n.t("Русский")})),h.createElement(U.a,{onClick:function(){e.onChangeLanguage("en"),e.onLanguageMenuClosed()}},h.createElement(V.a,null,h.createElement(q.a,null)),h.createElement(P.a,{primary:this.props.i18n.t("English")})))))}}],[{key:"getCurrentLanguageIcon",value:function(){switch(w.language){case"ru":return h.createElement(G.a,null);case"en":return h.createElement(q.a,null);default:throw"unknown language"}}}]),t}(h.Component);ne=i=ee([m.autobind,te("design:paramtypes",[Object])],ne);var ie=Object(g.connect)(function(e){return{i18n:e.i18n,terminals:e.terminals,organisation:e.organisation}})(Object(E.reduxForm)({form:"signinForm",fields:["name","email","password","specifyTerminal","terminalID","isAccount","captchaValue"],validate:function(e,t){var n={};return e.isAccount||e.name&&0!==e.name.trim().length||(n.name=t.i18n.t("Обязательно для заполнения")),e.password&&0!==e.password.trim().length||(n.password=t.i18n.t("Обязательно для заполнения")),n}})(ne)),oe=n(1469),re=n(1837),ae=n(79),ce=n(130),ue=n(1546),le=n(1467),se=n(136),fe=n(1497),pe=n(140),de=n.n(pe),he=n(2658),me=n.n(he),ge=n(1962),be=n(1963),ve=function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":d()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},Oe=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":d()(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ye=function(e){function t(e){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return f()(t,e),c()(t,[{key:"render",value:function(){return h.createElement("div",null,h.createElement("div",{style:{textAlign:"center",marginTop:"20px"}},h.createElement(de.a,{onClick:this.props.onNewAccountClick},h.createElement(me.a,null)),h.createElement(de.a,{onClick:this.props.onFacebookLoginClick},h.createElement(ge.a,null)),h.createElement(de.a,{onClick:this.props.onGoogleLoginClick},h.createElement(be.a,null))))}}]),t}(h.Component),Ee=ye=ve([m.autobind,Oe("design:paramtypes",[Object])],ye),we=(n(1960),function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":d()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a}),je=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":d()(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},xe=function(e){function t(e){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,le.a.screenInitialState()))}return f()(t,e),c()(t,[{key:"renderNavigation",value:function(){return h.createElement("div",null)}},{key:"renderSidebar",value:function(){return h.createElement("div",null)}},{key:"handleUserSigninFormSubmit",value:function(e){var t=this;return this.props.organisation.organisationId.matchWith(function(n){var i=e.terminalID?Object(Q.headOption)(t.props.terminals.list.filter(function(t){return t.id.value===e.terminalID})):Object(Q.headOption)(t.props.terminals.list),o=Object(Q.toOption)(e.captchaValue);return new Promise(function(r,a){return i.map(function(i){return t.props.dispatch(Object(oe.h)(Object(b.a)(e.name),Object(b.a)(e.password),i.id,n,o)).then(function(e){t.props.dispatch(Object(ae.p)(e.role.entity)),r()}).catch(function(e){a({_error:t.props.i18n.t("Неправильный логин или пароль")})})}).getOrElse(function(){return new Promise(function(e,t){t()})}).catch(function(){return a({_error:t.props.i18n.t("Терминал не найден")})})})},function(){return new Promise(function(e,t){t()})})}},{key:"handleAccountSigninFormSubmit",value:function(e){var t=this,n=Object(Q.toOption)(e.captchaValue);return new Promise(function(i,o){var r=t.props.organisation.organisationId;t.props.dispatch(r.isEmpty()?Object(oe.a)(Object(b.a)(e.email),Object(b.a)(e.password),n):Object(oe.e)(Object(b.a)(e.email),Object(b.a)(e.password),n)).then(function(e){e instanceof y.AccountInfo&&t.props.dispatch(r.isEmpty()?Object(ae.tb)():e.userContext.map(function(e){return Object(ae.p)(e.role.entity)}).getOrElse(function(){return Object(ae.tb)()})),i()}).catch(function(e){o({_error:t.props.i18n.t("Неправильный email или пароль")})})})}},{key:"handleSigninSubmit",value:function(e){return this.props.params.isAccount&&!K.default.isA5000?this.handleAccountSigninFormSubmit(e):this.handleUserSigninFormSubmit(e)}},{key:"getGoogleOauthApiUrl",value:function(){return this.props.oauth.data.map(function(e){return re.c+"?client_id="+e.google.clientId+"&redirect_uri="+e.google.redirectUrl+"/api/oauth/login/google&response_type=code&prompt=select_account&scope=profile email"})}},{key:"getFacebookOauthApiUrl",value:function(){return this.props.oauth.data.map(function(e){return re.a+"?client_id="+e.facebook.clientId+"&redirect_uri="+e.facebook.redirectUrl+"/api/oauth/login/facebook&scope=public_profile,email&response_type=code"})}},{key:"onNewAccountClick",value:function(){this.props.dispatch(Object(ae.f)())}},{key:"onGoogleLoginClick",value:function(){var e=this;this.getGoogleOauthApiUrl().foreach(function(t){e.openOauthWindow(t)})}},{key:"onFacebookLoginClick",value:function(){var e=this;this.getFacebookOauthApiUrl().foreach(function(t){e.openOauthWindow(t)})}},{key:"openOauthWindow",value:function(e){var t=this,n=Math.min(window.innerHeight-100,500),i=Math.min(window.innerWidth-100,800),o=(window.innerWidth-i)/2,r=(window.innerHeight-n)/2;Object(Q.toOption)(window.open(e,"_blank","toolbar=yes,scrollbars=yes,resizable=yes,top="+r+",left="+o+",width="+i+",height="+n)).foreach(function(e){t.addOauthWindowMessageListener(e)})}},{key:"addOauthWindowMessageListener",value:function(e){var t=this;window.addEventListener("message",function n(i){i.data.data.error?e.close():(e.close(),t.props.dispatch(Object(oe.d)(i.data.data.token)).then(function(e){e instanceof y.TwoFactorCodeRequired||t.props.organisation.organisationId.matchWith(function(n){e instanceof y.AccountInfo&&e.userContext.matchWith(function(e){t.props.dispatch(Object(ae.p)(e.role.entity))},function(){Object(Q.headOption)(e.users.filter(function(e){return e.organisationId.value===n.value})).matchWith(function(e){t.props.dispatch(Object(oe.c)(e.id,e.webTerminalId)).then(function(e){t.props.dispatch(Object(ae.p)(e.role.entity))})},function(){t.props.dispatch(Object(ce.r)()),t.props.dispatch(Object(ae.tb)())})})},function(){t.props.dispatch(Object(ae.tb)())})})),window.removeEventListener("message",n)})}},{key:"getLogoSrc",value:function(e){return this.props.cdnAddress+"/free/"+e.value}},{key:"render",value:function(){var e=this,t=this.props,n=(t.terminals,t.i18n,this.props.params.isAccount&&!K.default.isA5000);return this.renderScreenBody({className:"SigninPage"},n||this.props.organisation.organisationId.nonEmpty()?h.createElement("div",null,this.props.organisation.logo.map(function(t){return h.createElement("div",{style:{width:"300px",marginBottom:"50px",textAlign:"center"}},h.createElement("img",{style:{height:"100px"},src:e.getLogoSrc(t)}))}).getOrNull(),h.createElement(O.a,{className:"SigninPage__paper"},h.createElement(ie,{onSubmit:this.handleSigninSubmit,initialValues:{isAccount:n}}),!K.default.isA5000&&n&&!this.props.oauth.fetching&&this.props.oauth.error.isEmpty()&&h.createElement(Ee,{onNewAccountClick:this.onNewAccountClick,onFacebookLoginClick:this.onFacebookLoginClick,onGoogleLoginClick:this.onGoogleLoginClick}))):h.createElement(fe.a,null))}}]),t}(le.a);xe=we([m.autobind,je("design:paramtypes",[Object])],xe);var ke=function(e){return K.default.isA5000?y.Id.createId("1"):K.default.isSuperAdmin?y.Id.createId("2"):y.Id.createId(e.params.organisationId)};t.default=Object(g.connect)(function(e){return{terminals:e.terminals,oauth:e.oauth,organisation:e.organisation,i18n:e.i18n,cdnAddress:e.config.cdnAddress}})(Object(se.a)(function(e){(K.default.isA5000||K.default.isSuperAdmin)&&e.params.isAccount?e.dispatch(Object(ae.Mb)()):(ke(e).isEmpty()&&e.dispatch(Object(ue.b)()),e.dispatch(Object(re.b)()))},function(){},function(e,t){!e.organisation.infoFetching&&e.organisation.infoError.isEmpty()&&e.organisation.organisationId.isEmpty()&&(ke(e).isEmpty()&&e.dispatch(Object(ue.b)()))})(xe))}}]);