(window.webpackJsonpwww=window.webpackJsonpwww||[]).push([[18],{1459:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return c});var r=n(79),a=n(104),o=n(82),i=function(){return function(e,t){return e(o.default.isA5000?Object(r.Mb)():Object(r.h)())}},c=function(e,t){return function(n,o){return o().eventLine.data.foreach(function(i){Object(a.e)(o().forms,e).foreach(function(a){n(Object(r.H)(i.id,a.entity.formType.getFormTypeId(),e,t))})})}}},1461:function(e,t,n){"use strict";var r=n(6),a=n.n(r),o=n(10),i=n.n(o),c=n(7),l=n.n(c),u=n(8),s=n.n(u),p=n(2),f=n(14),d=n(1469),h=n(1459),m=n(320),y=n(69),g=n(0),v=n(624);t.a=function(e){return Object(f.connect)(function(e){return{auth:e.auth,websocket:e.websocket,routing:e.routing}})(function(e){return function(t){function n(){return a()(this,n),l()(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return s()(n,t),i()(n,[{key:"componentWillMount",value:function(){var e=this;this.props.auth.signedOut||this.props.websocket.active&&(this.props.auth.checking||this.props.auth.checked&&this.props.auth.signedIn||this.props.auth.signingIn||this.props.auth.signedIn||Object(g.toOption)(this.props.routing.location).map(function(t){Object(g.liftKey)(Object(v.a)(t.search),"token").map(function(t){t.map(function(t){e.props.dispatch(Object(d.d)(t)).catch(function(t){e.signOut()})})}).getOrElse(function(){e.props.auth.token.map(function(t){e.props.dispatch(Object(d.d)(t)).catch(function(t){e.signOut()})}).getOrElse(function(){e.signOut()})})}))}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.auth.signedOut||e.websocket.active&&(e.auth.checking||(e.auth.checked&&e.auth.signedIn||e.auth.signingIn||e.auth.signedIn)&&(!e.websocket.active||this.props.websocket.active)||e.auth.token.map(function(n){e.dispatch(Object(d.d)(n)).catch(function(e){t.signOut()})}).getOrElse(function(){t.signOut()}))}},{key:"signOut",value:function(){this.props.dispatch(Object(y.r)()),this.props.dispatch(Object(m.c)()),this.props.dispatch(Object(h.b)())}},{key:"render",value:function(){return this.props.auth.signedIn&&!this.props.auth.signingIn?p.createElement(e,this.props):p.createElement("div",null)}}]),n}(p.Component)}(e))}},1478:function(e,t,n){"use strict";var r=n(6),a=n.n(r),o=n(10),i=n.n(o),c=n(7),l=n.n(c),u=n(8),s=n.n(u),p=n(2),f=n(218),d=n.n(f),h=n(25),m=n.n(h),y=n(1476),g=n.n(y),v=(n(1481),n(52)),b=n.n(v),O=function(e){function t(){return a()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s()(t,e),i()(t,[{key:"render",value:function(){return p.createElement(d.a,{className:"PageHeader__main"},this.props.onGoBackRequested?p.createElement(m.a,{onClick:this.props.onGoBackRequested,style:{flexShrink:0}},p.createElement(g.a,null)):p.createElement("div",{style:{display:"inline-block"}}),p.createElement(b.a,{variant:"title",align:"center",style:{flex:1}},this.props.title),p.createElement("div",{style:{flexShrink:0}},this.props.rightButtonGroup))}}]),t}(p.Component);t.a=O},1481:function(e,t,n){var r=n(1482);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(121)(r,a);r.locals&&(e.exports=r.locals)},1482:function(e,t,n){(e.exports=n(120)(!1)).push([e.i,".PageHeader__main {\n  display: flex;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  margin-bottom: 10px;\n  background-color: #fff !important;\n  height: 48px !important;\n  width: 100% !important;\n  flex-shrink: 0;\n  padding: 0; }\n",""])},1491:function(e,t,n){"use strict";var r=n(21),a=(n(221),n(6)),o=n.n(a),i=n(7),c=n.n(i),l=n(8),u=n.n(l),s=n(18),p=(function(e){function t(e){return o()(this,t),c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Import.Pipelines","List",{form:e}))}u()(t,e)}(s.a),function(e){function t(e){return o()(this,t),c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Import.Pipelines","ListDescriptions",{form:e}))}return u()(t,e),t}(s.a)),f=(function(e){function t(e){return o()(this,t),c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Import.Pipelines","ListEventLineDescriptions",{id:e}))}u()(t,e)}(s.a),function(e){function t(e){return o()(this,t),c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Import.Pipelines","ListEventLine",{id:e}))}u()(t,e)}(s.a),function(e){function t(e){return o()(this,t),c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Import.Pipelines","Create",{pipeline:e}))}return u()(t,e),t}(s.a)),d=function(e){function t(e){return o()(this,t),c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Import.Pipelines","Update",{pipeline:e}))}return u()(t,e),t}(s.a),h=function(e){function t(e){return o()(this,t),c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Import.Pipelines","Request",{id:e}))}return u()(t,e),t}(s.a),m=function(e){function t(e){return o()(this,t),c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Import.Pipelines","Delete",{id:e}))}return u()(t,e),t}(s.a),y=n(17),g=n(644),v=n(82),b=n(428);n.d(t,"a",function(){return O}),n.d(t,"h",function(){return w}),n.d(t,"b",function(){return E}),n.d(t,"e",function(){return I}),n.d(t,"c",function(){return C}),n.d(t,"d",function(){return F}),n.d(t,"g",function(){return j}),n.d(t,"f",function(){return P});var O=function(e){return y.a.send(new f(e),Object(r.f)())},w=function(e){return y.a.send(new d(e),Object(r.f)())},E=function(e){return y.a.send(new m(e),Object(r.f)())},I=function(e){return y.a.send(new h(e),Object(r.e)())},C=function(e){return function(t){return t(Object(b.e)()),y.a.send(new h(e),Object(r.e)()).then(function(e){return t(Object(b.f)(e.record)),e}).catch(function(e){throw t(Object(b.d)(e)),e})}},F=function(e){return y.a.send(new p(e),function(e){return e})},j=function(e,t,n){var r=new FormData;return r.append("file",e),r.append("config",n),g.b(r,v.default.server_address+"/api/app/files/import",t,function(e){return e})},P=function(e,t,n){var r=new FormData;return r.append("file",e),g.b(r,v.default.server_address+"/api/app/files/import/"+n.value,t,function(e){return e})}},1494:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return c}),n.d(t,"c",function(){return l});var r=n(221),a=n(1491),o=n(87),i=function(e){return function(t,n){return t(Object(r.k)(e)),a.d(e).then(function(n){return t(Object(r.l)({form:e,result:n})),n}).catch(function(n){throw t(Object(r.j)({form:e,error:n})),n})}},c=function(e){return function(t,n){return t(Object(o.b)(function(e){return!e.importPipelines.descriptionsFetching&&e.importPipelines.descriptionsFetching},i(e)))}},l=function(e){return function(t,n){return t(Object(o.b)(function(e){return!e.importPipelines.eventLineDescriptionsFetching&&e.importPipelines.eventLineDescriptionsFetching},function(e){return function(t,n){return t(Object(r.n)(e)),a.d(e).then(function(n){return t(Object(r.o)({eventLineId:e,result:n})),n}).catch(function(n){throw t(Object(r.m)({eventLineId:e,error:n})),n})}}(e)))}}},1883:function(e,t,n){"use strict";var r,a,o,i,c,l,u,s,p,f,d=n(4),h=n.n(d),m=n(1),y=n(56),g=(r={},h()(r,m.FileFetchStageDummy.$Type.value,function(e){return new m.FileFetchStageDummy}),h()(r,m.FileFetchStageFtpFile.$Type.value,function(e){return new m.FileFetchStageFtpFile(e.login,e.password,e.path)}),h()(r,m.FileFetchStageFtpFolder.$Type.value,function(e){return new m.FileFetchStageFtpFolder(e.login,e.password,e.path)}),h()(r,m.FileFetchStageUrlArchive.$Type.value,function(e){return new m.FileFetchStageUrlArchive(e.uri)}),r),v=function(e){return new m.ImportParamsFileStages(m.Id.createId(e.organisationId).getOrElse(function(){throw"wrong organisation id"}),e.schedulerStage.map(function(e){return function(e){return new m.ImportFileStageScheduler(e.enabled,e.repeatInterval.duration,e.shiftTime.duration)}(e)}),(n=e.fetchStage,Object(y.b)(n.tpe.value)(g).matchWith(function(e){return e(n)},function(){throw"unknown fetch type"})),(t=e.hydrationStage,new m.ImportFileStageHydrate(m.Id.createId(t.formId).getOrElse(function(){throw"wrong form id"}),m.Id.createId(t.identityField).getOrElse(function(){throw"wrong form field id"}),m.Id.createId(t.filesField).getOrElse(function(){throw"wrong form field id"}),t.replaceExisting,t.conversionScript)));var t,n},b=(a={},h()(a,m.FtpCredentialsNormal.$Type.value,function(e){return new m.FtpCredentialsNormal(e.user,e.password)}),h()(a,m.FtpCredentialsKeyFile.$Type.value,function(e){return new m.FtpCredentialsKeyFile(e.user,m.Id.createId(e.fileId).getOrElse(function(){throw"wrong file id"}),e.passphrase)}),a),O=(o={},h()(o,m.FtpProtoFtp.$Type.value,function(e){return new m.FtpProtoFtp(new m.FtpCredentialsNormal(e.credentials.user,e.credentials.password),e.path)}),h()(o,m.FtpProtoSFtp.$Type.value,function(e){return new m.FtpProtoSFtp((t=e.credentials,Object(y.b)(t.tpe.value)(b).matchWith(function(e){return e(t)},function(){throw"unknown credential type"})),e.path);var t}),o),w=(i={},h()(i,m.XeroEntityTypeAccount.$Type.value,function(e){return new m.XeroEntityTypeAccount}),h()(i,m.XeroEntityTypeContact.$Type.value,function(e){return new m.XeroEntityTypeContact}),h()(i,m.XeroEntityTypeInvoice.$Type.value,function(e){return new m.XeroEntityTypeInvoice}),i),E=(c={},h()(c,m.HttpMethodGET.$Type.value,function(e){return new m.HttpMethodGET}),h()(c,m.HttpMethodPOST.$Type.value,function(e){return new m.HttpMethodPOST(e.body)}),h()(c,m.HttpMethodPUT.$Type.value,function(e){return new m.HttpMethodPUT(e.body)}),c),I=function(e){return Object(y.b)(e.tpe.value)(E).matchWith(function(t){return t(e)},function(){throw"unknown httpMethod type"})},C=n(0),F=function(e){return new m.HttpHeader(e.key,e.value)},j=function e(t){return new m.TokenFetch(t.enabled,new m.ImportOperationResourceUriResource(t.resource.uri,I(t.resource.method),t.resource.headers.map(function(e){return F(e)}),t.resource.tokenFetch.map(function(t){return e(t)})),t.jsonPath,new m.TokenCache(t.cache.enabled,t.cache.expiredIn.duration))},P=(l={},h()(l,m.ImportOperationResourceApiResource.$Type.value,function(e){return new m.ImportOperationResourceApiResource}),h()(l,m.ImportOperationResourceFtpResource.$Type.value,function(e){return new m.ImportOperationResourceFtpResource(e.host,e.port,(t=e.proto,Object(y.b)(t.tpe.value)(O).matchWith(function(e){return e(t)},function(){throw"unknown proto type"})));var t}),h()(l,m.ImportOperationResourceGMailResource.$Type.value,function(e){return new m.ImportOperationResourceGMailResource(m.Id.createId(e.connection).getOrElse(function(){throw"wrong connection id"}),new C.None)}),h()(l,m.ImportOperationResourceXeroResource.$Type.value,function(e){return new m.ImportOperationResourceXeroResource(m.Id.createId(e.connection).getOrElse(function(){throw"wrong connection id"}),(t=e.entityType,Object(y.b)(t.tpe.value)(w).matchWith(function(e){return e(t)},function(){throw"unknown credential type"})));var t}),h()(l,m.ImportOperationResourceFileResource.$Type.value,function(e){return new m.ImportOperationResourceFileResource(m.Id.createId(e.file).getOrElse(function(){throw"wrong connection id"}))}),h()(l,m.ImportOperationResourceUriResource.$Type.value,function(e){return new m.ImportOperationResourceUriResource(e.uri,I(e.method),e.headers.map(function(e){return F(e)}),e.tokenFetch.map(function(e){return j(e)}))}),l),D=function(e){return new m.ImportPipelineStageFetch((t=e.resource,Object(y.b)(t.tpe.value)(P).matchWith(function(e){return e(t)},function(){throw"unknown import operation resource type"})),e.tokenFetch.map(function(e){return j(e)}));var t},T=(u={},h()(u,m.DataFormatExcel.$Type.value,function(e){return new m.DataFormatExcel}),h()(u,m.DataFormatJsScript.$Type.value,function(e){return new m.DataFormatJsScript(e.script,e.fileExtension)}),h()(u,m.DataFormatCsv.$Type.value,function(e){return new m.DataFormatCsv}),h()(u,m.DataFormatJson.$Type.value,function(e){return new m.DataFormatJson}),h()(u,m.DataFormatText.$Type.value,function(e){return new m.DataFormatText(e.config)}),u),k=function(e){return new m.ImportPipelineStageRead((t=e.readerFormat,Object(y.b)(t.tpe.value)(T).matchWith(function(e){return e(t)},function(){throw"unknown dataFormat type"})),e.startLine,e.endLine);var t},S=(s={},h()(s,m.ParentRef.$Type.value,function(e){return new m.ParentRef(m.Id.createId(e.formId).getOrElse(function(){throw"wrong form id"}),m.Id.createId(e.refId).getOrElse(function(){throw"wrong form field id"}),e.onCreateOnly,e.appendData)}),h()(s,m.ParentSearch.$Type.value,function(e){return new m.ParentSearch(m.Id.createId(e.formId).getOrElse(function(){throw"wrong form id"}),m.Id.createId(e.refId).getOrElse(function(){throw"wrong form field id"}),m.Id.createId(e.searchId).getOrElse(function(){throw"wrong form field id"}),e.firstMatch,e.onCreateOnly,e.appendData)}),h()(s,m.ObjectRef.$Type.value,function(e){return new m.ObjectRef(m.Id.createId(e.field).getOrElse(function(){throw"wrong form field id"}),m.Id.createId(e.form).getOrElse(function(){throw"wrong form id"}),e.appendData)}),h()(s,m.DateFormat.$Type.value,function(e){return new m.DateFormat(e.format,e.zoneId)}),h()(s,m.ConfigName.$Type.value,function(e){return new m.ConfigName}),h()(s,m.SourceName.$Type.value,function(e){return new m.SourceName}),s),R=function(e){return new m.ImportDataFormatCell(e.alias,m.Id.createId(e.formField).getOrElse(function(){throw"wrong form field id"}),e.listValuesDelimiter,e.params.map(function(e){return t=e,Object(y.b)(t.tpe.value)(S).matchWith(function(e){return e(t)},function(){throw"unknown formatParams type"});var t}),e.transformScript.map(function(e){return t=e,new m.CellFormatScript(t.body);var t}))},_=(p={},h()(p,m.IdentityTypeCreateOnly.$Type.value,function(e){return new m.IdentityTypeCreateOnly}),h()(p,m.IdentityTypeFull.$Type.value,function(e){return new m.IdentityTypeFull}),h()(p,m.IdentityTypeUpdateOnly.$Type.value,function(e){return new m.IdentityTypeUpdateOnly}),p),$=function(e){return new m.ImportPipelineStageMaterialize((t=e.identityType,Object(y.b)(t.tpe.value)(_).matchWith(function(e){return e(t)},function(){throw"unknown identityType type"})),e.identityField.flatMap(function(e){return m.Id.createId(e)}),e.filter,e.deleteNonExistedRecords);var t},x=function(e){return new m.ImportParamsFormDataStages(D(e.fetchStage),k(e.readStage),(t=e.formatStage,new m.ImportPipelineStageFormat(t.cells.map(function(e){return R(e)}))),$(e.materialize),e.repeat.map(function(e){return t=e,new m.ImportPipelineStageRepeat(t.enabled,t.linkTemplate,t.timeTemplate,t.startTime.getTime(),t.repeatInterval.duration,t.shiftTime.duration);var t}));var t},q=(f={},h()(f,m.ImportParamsFileStages.$Type.value,function(e){return v(e)}),h()(f,m.ImportParamsFormDataStages.$Type.value,function(e){return x(e)}),f);t.a=function(e){return Object(y.b)(e.tpe.value)(q).matchWith(function(t){return t(e)},function(){throw"unknown params type"})}},1908:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a});var r={fontSize:20},a={width:30,height:30}},1909:function(e,t,n){"use strict";var r,a=n(6),o=n.n(a),i=n(10),c=n.n(i),l=n(7),u=n.n(l),s=n(8),p=n.n(s),f=n(4),d=n.n(f),h=n(11),m=n.n(h),y=n(2),g=n(14),v=n(13),b=n(416),O=n.n(b),w=n(33),E=n.n(w),I=n(319),C=n.n(I),F=n(271),j=n.n(F),P=n(267),D=n.n(P),T=n(1),k=n(356),S=n(56),R=n(70),_=function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":m()(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},$=(r={},d()(r,T.IdentityTypeFull.$Type.value,function(){return new k.b}),d()(r,T.IdentityTypeUpdateOnly.$Type.value,function(){return new k.c}),d()(r,T.IdentityTypeCreateOnly.$Type.value,function(){return new k.a}),r),x=function(e){function t(){return o()(this,t),u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p()(t,e),c()(t,[{key:"onImportTypeChanged",value:function(e,t){var n=this;Object(S.b)(t)($).map(function(e){return e()}).matchWith(function(e){n.props.dispatch(Object(R.mb)(e))},function(){throw"unknown identity type"})}},{key:"render",value:function(){return y.createElement("div",null,y.createElement("h4",null,this.props.i18n.t("Тип импорта")),y.createElement("div",{style:{marginLeft:"20px"}},y.createElement(O.a,{name:"readerFormat",onChange:this.onImportTypeChanged,value:this.props.identityType.tpe.value},y.createElement(E.a,{control:y.createElement(C.a,{style:{width:30,height:30},icon:y.createElement(j.a,{style:{fontSize:20}}),checkedIcon:y.createElement(D.a,{style:{fontSize:20}})}),value:T.IdentityTypeFull.$Type.value,label:this.props.i18n.t("Обновление и создание")}),y.createElement(E.a,{control:y.createElement(C.a,{style:{width:30,height:30},icon:y.createElement(j.a,{style:{fontSize:20}}),checkedIcon:y.createElement(D.a,{style:{fontSize:20}})}),value:T.IdentityTypeUpdateOnly.$Type.value,label:this.props.i18n.t("Только обновление")}),y.createElement(E.a,{control:y.createElement(C.a,{style:{width:30,height:30},icon:y.createElement(j.a,{style:{fontSize:20}}),checkedIcon:y.createElement(D.a,{style:{fontSize:20}})}),value:T.IdentityTypeCreateOnly.$Type.value,label:this.props.i18n.t("Только создание новых")}))))}}]),t}(y.Component);x=_([v.autobind],x),t.a=Object(g.connect)(function(e,t){return{i18n:e.i18n}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n},areStatePropsEqual:function(e,t){return e.i18n===t.i18n}})(x)},1910:function(e,t,n){"use strict";var r=n(6),a=n.n(r),o=n(10),i=n.n(o),c=n(7),l=n.n(c),u=n(8),s=n.n(u),p=n(11),f=n.n(p),d=n(2),h=n(14),m=n(13),y=n(45),g=n.n(y),v=n(33),b=n.n(v),O=n(555),w=n.n(O),E=n(552),I=n.n(E),C=n(70),F=function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},j=function(e){function t(){return a()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s()(t,e),i()(t,[{key:"ondDeleteNonExistedChanged",value:function(e,t){this.props.dispatch(Object(C.jb)(t))}},{key:"render",value:function(){return d.createElement(b.a,{style:{marginLeft:"5px"},label:this.props.i18n.t("Удалять анкеты, отсутствующие в файле"),control:d.createElement(g.a,{style:{width:30,height:30},onChange:this.ondDeleteNonExistedChanged,checked:this.props.deleteNonExistedRecords,icon:d.createElement(w.a,{style:{fontSize:20}}),checkedIcon:d.createElement(I.a,{style:{fontSize:20}})})})}}]),t}(d.Component);j=F([m.autobind],j),t.a=Object(h.connect)(function(e,t){return{i18n:e.i18n}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n},areStatePropsEqual:function(e,t){return e.i18n===t.i18n}})(j)},1918:function(e,t,n){"use strict";var r,a,o=n(6),i=n.n(o),c=n(10),l=n.n(c),u=n(7),s=n.n(u),p=n(8),f=n.n(p),d=n(11),h=n.n(d),m=n(2),y=n(14),g=n(13),v=n(540),b=n.n(v),O=n(628),w=n.n(O),E=n(318),I=n.n(E),C=n(175),F=n.n(C),j=n(25),P=n.n(j),D=n(688),T=n.n(D),k=function(e){function t(){return i()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f()(t,e),l()(t,[{key:"render",value:function(){return m.createElement(w.a,{style:{borderTop:"1px solid rgb(224, 224, 224)"}},m.createElement(I.a,null,m.createElement(F.a,null,this.props.headers.length>0?this.props.i18n.t("Заголовок"):this.props.i18n.t("Номер колонки/ключ json")),m.createElement(F.a,null,this.props.i18n.t("Связанное поле")),m.createElement(F.a,{style:{width:"48px"}},this.props.i18n.t("Поле для поиска")),m.createElement(F.a,{style:{width:"48px"}},m.createElement("div",{style:{display:"inline-block"}},m.createElement(P.a,null,m.createElement(T.a,null))))))}}]),t}(m.Component),S=Object(y.connect)(function(e,t){return{i18n:e.i18n}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n},areStatePropsEqual:function(e,t){return e.i18n===t.i18n}})(k),R=n(629),_=n.n(R),$=n(4),x=n.n($),q=n(32),N=n.n(q),L=n(26),W=n.n(L),A=n(30),M=n.n(A),H=n(1),z=n(70),U=n(56),X=(r={},x()(r,H.XeroEntityTypeContact.$Type.value,function(){return new H.XeroEntityTypeContact}),x()(r,H.XeroEntityTypeAccount.$Type.value,function(){return new H.XeroEntityTypeAccount}),x()(r,H.XeroEntityTypeInvoice.$Type.value,function(){return new H.XeroEntityTypeInvoice}),[new H.ImportDataFormatCell("name",new H.Id("")),new H.ImportDataFormatCell("firstName",new H.Id("")),new H.ImportDataFormatCell("lastName",new H.Id("")),new H.ImportDataFormatCell("emailAddress",new H.Id("")),new H.ImportDataFormatCell("skypeUserName",new H.Id("")),new H.ImportDataFormatCell("bankAccountDetails",new H.Id("")),new H.ImportDataFormatCell("taxNumber",new H.Id("")),new H.ImportDataFormatCell("accountsReceivableTaxType",new H.Id("")),new H.ImportDataFormatCell("accountsPayableTaxType",new H.Id("")),new H.ImportDataFormatCell("isSupplier",new H.Id("")),new H.ImportDataFormatCell("isCustomer",new H.Id("")),new H.ImportDataFormatCell("defaultCurrency",new H.Id("")),new H.ImportDataFormatCell("xeroNetworkKey",new H.Id("")),new H.ImportDataFormatCell("salesDefaultAccountCode",new H.Id("")),new H.ImportDataFormatCell("purchasesDefaultAccountCode",new H.Id("")),new H.ImportDataFormatCell("trackingCategoryName",new H.Id("")),new H.ImportDataFormatCell("trackingCategoryOption",new H.Id("")),new H.ImportDataFormatCell("paymentTerms.bills.day",new H.Id("")),new H.ImportDataFormatCell("paymentTerms.bills.type",new H.Id("")),new H.ImportDataFormatCell("paymentTerms.sales.day",new H.Id("")),new H.ImportDataFormatCell("paymentTerms.sales.type",new H.Id("")),new H.ImportDataFormatCell("updatedDateUTC",new H.Id("")),new H.ImportDataFormatCell("website",new H.Id("")),new H.ImportDataFormatCell("brandingTheme.brandingThemeID",new H.Id("")),new H.ImportDataFormatCell("brandingTheme.name",new H.Id("")),new H.ImportDataFormatCell("brandingTheme.sortOrder",new H.Id("")),new H.ImportDataFormatCell("brandingTheme.createdDateUTC",new H.Id("")),new H.ImportDataFormatCell("batchPayments.bankAccountNumber",new H.Id("")),new H.ImportDataFormatCell("batchPayments.bankAccountName",new H.Id("")),new H.ImportDataFormatCell("batchPayments.details",new H.Id("")),new H.ImportDataFormatCell("batchPayments.code",new H.Id("")),new H.ImportDataFormatCell("batchPayments.reference",new H.Id("")),new H.ImportDataFormatCell("discount",new H.Id("")),new H.ImportDataFormatCell("balances.accountsReceivable.outstanding",new H.Id("")),new H.ImportDataFormatCell("balances.accountsReceivable.overdue",new H.Id("")),new H.ImportDataFormatCell("balances.accountsPayable.outstanding",new H.Id("")),new H.ImportDataFormatCell("balances.accountsPayable.overdue",new H.Id("")),new H.ImportDataFormatCell("hasAttachments",new H.Id("")),new H.ImportDataFormatCell("hasValidationErrors",new H.Id(""))]),V=[new H.ImportDataFormatCell("code",new H.Id("")),new H.ImportDataFormatCell("name",new H.Id("")),new H.ImportDataFormatCell("accountID",new H.Id("")),new H.ImportDataFormatCell("type",new H.Id("")),new H.ImportDataFormatCell("bankAccountNumber",new H.Id("")),new H.ImportDataFormatCell("status",new H.Id("")),new H.ImportDataFormatCell("description",new H.Id("")),new H.ImportDataFormatCell("bankAccountType",new H.Id("")),new H.ImportDataFormatCell("currencyCode",new H.Id("")),new H.ImportDataFormatCell("taxType",new H.Id("")),new H.ImportDataFormatCell("enablePaymentsToAccount",new H.Id("")),new H.ImportDataFormatCell("showInExpenseClaims",new H.Id("")),new H.ImportDataFormatCell("propertyClass",new H.Id("")),new H.ImportDataFormatCell("systemAccount",new H.Id("")),new H.ImportDataFormatCell("reportingCode",new H.Id("")),new H.ImportDataFormatCell("reportingCodeName",new H.Id("")),new H.ImportDataFormatCell("hasAttachments",new H.Id("")),new H.ImportDataFormatCell("updatedDateUTC",new H.Id(""))],J=[new H.ImportDataFormatCell("type",new H.Id("")),new H.ImportDataFormatCell("contactId",new H.Id("")),new H.ImportDataFormatCell("date",new H.Id("")),new H.ImportDataFormatCell("dueDate",new H.Id("")),new H.ImportDataFormatCell("lineAmountTypes",new H.Id("")),new H.ImportDataFormatCell("invoiceNumber",new H.Id("")),new H.ImportDataFormatCell("reference",new H.Id("")),new H.ImportDataFormatCell("brandingThemeID",new H.Id("")),new H.ImportDataFormatCell("url",new H.Id("")),new H.ImportDataFormatCell("currencyCode",new H.Id("")),new H.ImportDataFormatCell("currencyRate",new H.Id("")),new H.ImportDataFormatCell("status",new H.Id("")),new H.ImportDataFormatCell("sentToContact",new H.Id("")),new H.ImportDataFormatCell("expectedPaymentDate",new H.Id("")),new H.ImportDataFormatCell("plannedPaymentDate",new H.Id("")),new H.ImportDataFormatCell("subTotal",new H.Id("")),new H.ImportDataFormatCell("totalTax",new H.Id("")),new H.ImportDataFormatCell("total",new H.Id("")),new H.ImportDataFormatCell("totalDiscount",new H.Id("")),new H.ImportDataFormatCell("invoiceID",new H.Id("")),new H.ImportDataFormatCell("hasAttachments",new H.Id("")),new H.ImportDataFormatCell("isDiscounted",new H.Id("")),new H.ImportDataFormatCell("amountDue",new H.Id("")),new H.ImportDataFormatCell("amountPaid",new H.Id("")),new H.ImportDataFormatCell("fullyPaidOnDate",new H.Id("")),new H.ImportDataFormatCell("amountCredited",new H.Id("")),new H.ImportDataFormatCell("updatedDateUTC",new H.Id("")),new H.ImportDataFormatCell("hasErrors",new H.Id("")),new H.ImportDataFormatCell("statusAttributeString",new H.Id(""))],G=n(256),K=function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":h()(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},Z=(a={},x()(a,H.XeroEntityTypeAccount.$Type.value,function(){return V}),x()(a,H.XeroEntityTypeInvoice.$Type.value,function(){return J}),x()(a,H.XeroEntityTypeContact.$Type.value,function(){return X}),a),B=function(e){function t(){return i()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f()(t,e),l()(t,[{key:"onCellAliasChanged",value:function(e){this.props.dispatch(Object(z.ab)({cell:this.props.cell,alias:e.target.value}))}},{key:"renderTextEditor",value:function(){return m.createElement(W.a,{value:this.props.cell.alias,onChange:this.onCellAliasChanged})}},{key:"renderSelectEditor",value:function(e){return m.createElement(N.a,{fullWidth:!0},m.createElement(M.a,{value:this.props.cell.alias,onChange:this.onCellAliasChanged},e.map(function(e,t){return m.createElement("option",{key:t,value:e},e)})))}},{key:"renderEditor",value:function(){return this.props.headers.length>0?this.renderSelectEditor(this.props.headers):this.props.fetch.resource instanceof G.f?this.renderSelectEditor(Object(U.b)(this.props.fetch.resource.entityType.tpe.value)(Z).matchWith(function(e){return e().map(function(e){return e.alias})},function(){throw"unknown xero entity type"})):this.renderTextEditor()}},{key:"render",value:function(){return m.createElement(N.a,{fullWidth:!0},this.renderEditor())}}]),t}(m.Component);B=K([g.autobind],B);var Q=Object(y.connect)(function(e,t){return{i18n:e.i18n}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n},areStatePropsEqual:function(e,t){return e.i18n===t.i18n}})(B),Y=n(45),ee=n.n(Y),te=n(0),ne=function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":h()(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},re=function(e){function t(){return i()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f()(t,e),l()(t,[{key:"onSearchChange",value:function(e,t){this.props.dispatch(Object(z.lb)(Object(te.toOption)(this.props.cell.formField).filter(function(){return t})))}},{key:"render",value:function(){var e=this;return m.createElement(ee.a,{checked:this.props.materialize.identityField.filter(function(t){return t===e.props.cell.formField}).nonEmpty(),onChange:this.onSearchChange})}}]),t}(m.Component);re=ne([g.autobind],re);var ae=Object(y.connect)(function(e,t){return{i18n:e.i18n}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n},areStatePropsEqual:function(e,t){return e.i18n===t.i18n}})(re),oe=n(19),ie=n.n(oe),ce=n(414),le=n.n(ce),ue=n(94),se=n.n(ue),pe=function(e){return m.createElement(se.a,Object.assign({},e),m.createElement("path",{d:"M3,3H21V21H3V3M7.73,18.04C8.13,18.89 8.92,19.59 10.27,19.59C11.77,19.59 12.8,18.79 12.8,17.04V11.26H11.1V17C11.1,17.86 10.75,18.08 10.2,18.08C9.62,18.08 9.38,17.68 9.11,17.21L7.73,18.04M13.71,17.86C14.21,18.84 15.22,19.59 16.8,19.59C18.4,19.59 19.6,18.76 19.6,17.23C19.6,15.82 18.79,15.19 17.35,14.57L16.93,14.39C16.2,14.08 15.89,13.87 15.89,13.37C15.89,12.96 16.2,12.64 16.7,12.64C17.18,12.64 17.5,12.85 17.79,13.37L19.1,12.5C18.55,11.54 17.77,11.17 16.7,11.17C15.19,11.17 14.22,12.13 14.22,13.4C14.22,14.78 15.03,15.43 16.25,15.95L16.67,16.13C17.45,16.47 17.91,16.68 17.91,17.26C17.91,17.74 17.46,18.09 16.76,18.09C15.93,18.09 15.45,17.66 15.09,17.06L13.71,17.86Z"}))},fe=n(83),de=n(3),he=function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":h()(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},me=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":h()(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ye=function(e){function t(e){i()(this,t);var n=s()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={script:new te.None},n}return f()(t,e),l()(t,[{key:"componentDidMount",value:function(){this.props.saveSubscribe(this.onSave),this.setState(de(this.state,{script:{$set:this.props.script}}))}},{key:"onSave",value:function(){this.props.onSave(this.state.script)}},{key:"onScriptChange",value:function(e){this.setState(de(this.state,{script:{$set:Object(te.toOption)(e.target.value)}}))}},{key:"render",value:function(){return m.createElement("div",null,m.createElement(W.a,{fullWidth:!0,multiline:!0,rows:10,rowsMax:15,value:this.state.script.getOrElse(function(){return""}),onChange:this.onScriptChange,label:this.props.i18n.t("Скрипт")}))}}]),t}(m.Component);ye=he([g.autobind,me("design:paramtypes",[Object])],ye);var ge=Object(y.connect)(function(e){return{i18n:e.i18n}})(ye),ve=function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":h()(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},be=function(e){function t(){return i()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f()(t,e),l()(t,[{key:"onJsRequested",value:function(){var e=this,t=[],n=this.props.openDialog(this.props.i18n.t("Скрипт обработки"),m.createElement(ge,{script:this.props.cell.transformScript.map(function(e){return e.body}),saveSubscribe:function(e){t.push(e)},onSave:function(t){e.props.dispatch(Object(z.eb)({cell:e.props.cell,script:t})),e.props.handleDialogClose(n)}}),[m.createElement(ie.a,{variant:"raised",key:"close",onClick:function(){return e.props.handleDialogClose(n)},style:{marginRight:"10px"}},this.props.i18n.t("Закрыть")),m.createElement(ie.a,{variant:"raised",key:"save",onClick:function(){t.forEach(function(e){e()})},color:"primary"},this.props.i18n.t("Сохранить"))])}},{key:"onDeleteRequested",value:function(){this.props.onHeadersDelete(this.props.cellIdx),this.props.dispatch(Object(z.bb)(this.props.cell))}},{key:"render",value:function(){return m.createElement(m.Fragment,null,this.props.headers.length>0?null:m.createElement(P.a,{onClick:this.onJsRequested},m.createElement(pe,null)),m.createElement(P.a,{onClick:this.onDeleteRequested},m.createElement(le.a,null)))}}]),t}(m.Component);be=ve([g.autobind],be);var Oe,we,Ee=Object(y.connect)(function(e,t){return{i18n:e.i18n}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n},areStatePropsEqual:function(e,t){return e.i18n===t.i18n}})(Object(fe.a)(be)),Ie=n(34),Ce=n.n(Ie),Fe=n(237),je=function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":h()(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},Pe=(Oe={},x()(Oe,H.ParentRef.$Type.value,function(){return new Fe.d("","",!1,!1)}),x()(Oe,H.ParentSearch.$Type.value,function(){return new Fe.e("","","",!1,!1,!1)}),x()(Oe,H.SourceName.$Type.value,function(){return new Fe.f}),x()(Oe,H.ConfigName.$Type.value,function(){return new Fe.a}),Oe),De=(we={},x()(we,H.ParentRef.$Type.value,function(e){return e("Записать в анкету с ИД")}),x()(we,H.ParentSearch.$Type.value,function(e){return e("Поиск по полю")}),x()(we,H.SourceName.$Type.value,function(e){return e("Название конфигурации")}),x()(we,H.ConfigName.$Type.value,function(e){return e("Название файла")}),we),Te=function(e){function t(){return i()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f()(t,e),l()(t,[{key:"onCellOperationChanged",value:function(e){var t=this;this.props.dispatch(Object(z.Z)({cell:this.props.cell,params:Object(te.toOption)(e.target.value).filter(function(e){return"EmptyOperation"!==e}).flatMap(function(e){return t.getFormatParams(e)})}))}},{key:"getFormatParams",value:function(e){return Object(U.b)(e)(Pe).map(function(e){return e()})}},{key:"systemFieldTpeToName",value:function(e){var t=this;return Object(U.b)(e)(De).map(function(e){return e(t.props.i18n.t)}).getOrElse(function(){throw"unknown format params type"})}},{key:"render",value:function(){return m.createElement(N.a,{style:{flex:1,marginLeft:15}},m.createElement(Ce.a,{shrink:!0},this.props.i18n.t("Тип операции")),m.createElement(M.a,{native:!0,fullWidth:!0,onChange:this.onCellOperationChanged,value:this.props.cell.params.map(function(e){return e.tpe.value}).getOrElse(function(){return""})},m.createElement("optgroup",null,m.createElement("option",{value:"EmptyOperation"},this.props.i18n.t("Записать значение")),m.createElement("option",{value:H.ParentRef.$Type.value},this.systemFieldTpeToName(H.ParentRef.$Type.value)),m.createElement("option",{value:H.ConfigName.$Type.value},this.systemFieldTpeToName(H.ConfigName.$Type.value)),m.createElement("option",{value:H.SourceName.$Type.value},this.systemFieldTpeToName(H.SourceName.$Type.value)),m.createElement("option",{value:H.ParentSearch.$Type.value},this.systemFieldTpeToName(H.ParentSearch.$Type.value)))))}}]),t}(m.Component);Te=je([g.autobind],Te);var ke=Object(y.connect)(function(e,t){return{i18n:e.i18n}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n},areStatePropsEqual:function(e,t){return e.i18n===t.i18n}})(Te),Se=n(33),Re=n.n(Se),_e=function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":h()(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},$e=function(e){function t(){return i()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f()(t,e),l()(t,[{key:"onParamsChanged",value:function(e){this.props.dispatch(Object(z.Z)({cell:this.props.cell,params:e}))}},{key:"onParentFormChanged",value:function(e){this.onParamsChanged(this.props.cell.params.map(function(t){return de(t,{formId:{$set:e.target.value}})}))}},{key:"onRefFieldChanged",value:function(e){this.onParamsChanged(this.props.cell.params.map(function(t){return de(t,{refId:{$set:e.target.value}})}))}},{key:"onCreateOnlyChanged",value:function(e,t){this.onParamsChanged(this.props.cell.params.map(function(e){return de(e,{onCreateOnly:{$set:t}})}))}},{key:"onAppendChanged",value:function(e,t){this.onParamsChanged(this.props.cell.params.map(function(e){return de(e,{appendData:{$set:t}})}))}},{key:"render",value:function(){var e=this;return m.createElement("div",null,m.createElement("div",{style:{display:"flex"}},m.createElement(N.a,{style:{flex:1}},m.createElement(Ce.a,null,this.props.i18n.t("Форма родителя")),m.createElement(M.a,{native:!0,onChange:this.onParentFormChanged,value:this.props.cell.params.map(function(e){return e.formId}).getOrUndefined()},m.createElement("optgroup",null,m.createElement("option",null),this.props.forms.list.filter(function(t){return e.props.eventLineId.map(function(e){return t.entity.eventLineId.value===e.value}).getOrElse(function(){return!1})}).map(function(e){return m.createElement("option",{value:e.id.value,key:e.id.value},e.entity.name)})))),m.createElement(N.a,{style:{flex:1,marginLeft:15}},m.createElement(Ce.a,null,this.props.i18n.t("Поле для ссылки")),m.createElement(M.a,{native:!0,onChange:this.onRefFieldChanged,value:this.props.cell.params.map(function(e){return e.refId}).getOrUndefined()},m.createElement("optgroup",null,m.createElement("option",null),Object(te.liftKey)(this.props.formFields.list,this.props.cell.params.map(function(e){return e.formId}).getOrElse(function(){return""})).getOrElse(function(){return[]}).map(function(e){return m.createElement("option",{value:e.id.value,key:e.id.value},e.entity.name)}))))),m.createElement("div",null,m.createElement(Re.a,{style:{marginLeft:15},label:this.props.i18n.t("не записывать ссылку при обновлении анкеты"),control:m.createElement(ee.a,{checked:this.props.cell.params.map(function(e){return e.onCreateOnly}).getOrElse(function(){return!1}),onChange:this.onCreateOnlyChanged})}),m.createElement(Re.a,{style:{marginLeft:15},label:this.props.i18n.t("Добавлять ссылку (не перезаписывать)"),control:m.createElement(ee.a,{checked:this.props.cell.params.map(function(e){return e.appendData}).getOrElse(function(){return!1}),onChange:this.onAppendChanged})})))}}]),t}(m.Component);$e=_e([g.autobind],$e);var xe=Object(y.connect)(function(e,t){return{i18n:e.i18n,formFields:e.fields,forms:e.forms,eventLineId:e.eventLine.eventLineId}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n&&e.fields===t.fields&&e.forms===t.forms},areStatePropsEqual:function(e,t){return e.i18n===t.i18n&&e.formFields===t.formFields&&e.forms===t.forms}})($e),qe=function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":h()(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},Ne=function(e){function t(){return i()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f()(t,e),l()(t,[{key:"onParamsChanged",value:function(e){this.props.dispatch(Object(z.Z)({cell:this.props.cell,params:e}))}},{key:"onParentFormChanged",value:function(e){this.onParamsChanged(this.props.cell.params.map(function(t){return de(t,{formId:{$set:e.target.value}})}))}},{key:"onRefFieldChanged",value:function(e){this.onParamsChanged(this.props.cell.params.map(function(t){return de(t,{refId:{$set:e.target.value}})}))}},{key:"onSearchFieldChanged",value:function(e){this.onParamsChanged(this.props.cell.params.map(function(t){return de(t,{searchId:{$set:e.target.value}})}))}},{key:"onFirstMatchChanged",value:function(e,t){this.onParamsChanged(this.props.cell.params.map(function(e){return de(e,{firstMatch:{$set:t}})}))}},{key:"onCreateOnlyChanged",value:function(e,t){this.onParamsChanged(this.props.cell.params.map(function(e){return de(e,{onCreateOnly:{$set:t}})}))}},{key:"onAppendChanged",value:function(e,t){this.onParamsChanged(this.props.cell.params.map(function(e){return de(e,{appendData:{$set:t}})}))}},{key:"render",value:function(){return m.createElement("div",null,m.createElement("div",null,m.createElement(N.a,{style:{marginLeft:15}},m.createElement(Ce.a,null,this.props.i18n.t("Форма родителя")),m.createElement(M.a,{native:!0,onChange:this.onParentFormChanged,value:this.props.cell.params.map(function(e){return e.formId}).getOrElse(function(){return""})},m.createElement("optgroup",null,m.createElement("option",null),this.props.forms.list.map(function(e){return m.createElement("option",{value:e.id.value,key:e.id.value},e.entity.name)})))),m.createElement(N.a,{style:{marginLeft:15}},m.createElement(Ce.a,null,this.props.i18n.t("Поле для ссылки")),m.createElement(M.a,{native:!0,onChange:this.onRefFieldChanged,value:this.props.cell.params.map(function(e){return e.refId}).getOrUndefined()},m.createElement("optgroup",null,m.createElement("option",null),Object(te.liftKey)(this.props.formFields.list,this.props.cell.params.map(function(e){return e.refId}).getOrElse(function(){return""})).getOrElse(function(){return[]}).map(function(e){return m.createElement("option",{value:e.id.value,key:e.id.value},e.entity.name)})))),m.createElement(N.a,{style:{marginLeft:15}},m.createElement(Ce.a,null,this.props.i18n.t("Поле для поиска")),m.createElement(M.a,{native:!0,onChange:this.onSearchFieldChanged,value:this.props.cell.params.map(function(e){return e.searchId}).getOrUndefined()},m.createElement("optgroup",null,m.createElement("option",null),Object(te.liftKey)(this.props.formFields.list,this.props.cell.params.map(function(e){return e.formId}).getOrElse(function(){return""})).getOrElse(function(){return[]}).map(function(e){return m.createElement("option",{value:e.id.value,key:e.id.value},e.entity.name)}))))),m.createElement("div",null,m.createElement(Re.a,{style:{marginLeft:15},label:this.props.i18n.t("Записывать в первую найденную"),control:m.createElement(ee.a,{checked:this.props.cell.params.map(function(e){return e.firstMatch}).getOrElse(function(){return!1}),onChange:this.onFirstMatchChanged})}),m.createElement(Re.a,{style:{marginLeft:15},label:this.props.i18n.t("не записывать ссылку при обновлении анкеты"),control:m.createElement(ee.a,{checked:this.props.cell.params.map(function(e){return e.onCreateOnly}).getOrElse(function(){return!1}),onChange:this.onCreateOnlyChanged})}),m.createElement(Re.a,{style:{marginLeft:15},label:this.props.i18n.t("Добавлять ссылку (не перезаписывать)"),control:m.createElement(ee.a,{checked:this.props.cell.params.map(function(e){return e.appendData}).getOrElse(function(){return!1}),onChange:this.onAppendChanged})})))}}]),t}(m.Component);Ne=qe([g.autobind],Ne);var Le=Object(y.connect)(function(e,t){return{i18n:e.i18n,formFields:e.fields,forms:e.forms,eventLineId:e.eventLine.eventLineId}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n&&e.fields===t.fields&&e.forms===t.forms},areStatePropsEqual:function(e,t){return e.i18n===t.i18n&&e.formFields===t.formFields&&e.forms===t.forms}})(Ne),We=n(29),Ae=n(68),Me=function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":h()(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},He=function(e){function t(){return i()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f()(t,e),l()(t,[{key:"onDelimiterChange",value:function(e){this.props.dispatch(Object(z.cb)({cell:this.props.cell,delimiter:Object(te.toOption)(e.target.value)}))}},{key:"render",value:function(){return m.createElement(W.a,{fullWidth:!0,label:this.props.i18n.t("Разделитель значений"),value:this.props.cell.listValuesDelimiter.getOrUndefined(),onChange:this.onDelimiterChange})}}]),t}(m.Component);He=Me([g.autobind],He);var ze=Object(y.connect)(function(e,t){return{i18n:e.i18n}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n},areStatePropsEqual:function(e,t){return e.i18n===t.i18n}})(He),Ue=function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":h()(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},Xe=function(e){function t(){return i()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f()(t,e),l()(t,[{key:"onCellFieldObjectReferenceSelected",value:function(e){var t=this;e.foreach(function(e){t.props.dispatch(Object(z.db)({cell:t.props.cell,objectRefField:e.value,objectRefForm:Object(te.toOption)(t.props.objRefFormId.value),appendData:t.props.cell.params.filter(function(e){return e instanceof Fe.c}).map(function(e){return e}).map(function(e){return e.appendData}).getOrElse(function(){return!1})}))})}},{key:"onCellFieldAppendDataChanged",value:function(e,t){var n=this;this.props.cell.params.filter(function(e){return e instanceof Fe.c}).map(function(e){return e}).foreach(function(e){n.props.dispatch(Object(z.db)({cell:n.props.cell,objectRefField:e.field,objectRefForm:Object(te.toOption)(e.form),appendData:t}))})}},{key:"render",value:function(){return m.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"flex-end"}},m.createElement(Ae.a,{fullWidth:!0,style:{marginTop:0},value:this.props.cell.params.flatMap(function(e){return H.Id.createId(e.field)}),fields:Object(We.e)(this.props.fields,this.props.objRefFormId).getOrElse(function(){return[]}),labelText:new te.None,errorText:new te.None,onChanged:this.onCellFieldObjectReferenceSelected}),m.createElement(Re.a,{label:this.props.i18n.t("Добавлять ссылку"),control:m.createElement(ee.a,{checked:this.props.cell.params.filter(function(e){return e instanceof Fe.c}).map(function(e){return e}).map(function(e){return e.appendData}).getOrElse(function(){return!1}),style:{marginBottom:"12pxe"},onChange:this.onCellFieldAppendDataChanged})}),m.createElement(ze,{cell:this.props.cell}))}}]),t}(m.Component);Xe=Ue([g.autobind],Xe);var Ve=Object(y.connect)(function(e,t){return{i18n:e.i18n,fields:e.fields}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n&&e.fields===t.fields},areStatePropsEqual:function(e,t){return e.i18n===t.i18n&&e.fields===t.fields}})(Xe),Je=function(e){function t(){return i()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f()(t,e),l()(t,[{key:"render",value:function(){return m.createElement(ze,{cell:this.props.cell})}}]),t}(m.Component),Ge=Object(y.connect)(function(e,t){return{i18n:e.i18n}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n},areStatePropsEqual:function(e,t){return e.i18n===t.i18n}})(Je),Ke=n(54),Ze=n.n(Ke),Be=n(24),Qe=n.n(Be),Ye=n(162),et=n.n(Ye),tt=n(86),nt=n.n(tt),rt=n(262),at=n(50),ot=function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":h()(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},it=function(e){function t(){return i()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f()(t,e),l()(t,[{key:"onParamsChanged",value:function(e){this.props.dispatch(Object(z.hb)({cell:this.props.cell,params:Object(te.toOption)(e)}))}},{key:"onTimeZoneChanged",value:function(e){this.onParamsChanged(de(this.props.cell,{format:{$set:e.target.value}}))}},{key:"onTimeFormatChanged",value:function(e){}},{key:"onTimeFormatSelected",value:function(e){this.onParamsChanged(de(this.props.cell,{format:{$set:e}}))}},{key:"onTimeFormatIconClick",value:function(e){var t=this;this.props.openMenu(e.currentTarget,H.TimeFormats.map(function(e,n){return m.createElement(Qe.a,{key:n,value:e.format,onClick:function(){return t.onTimeFormatSelected(e.format)}},Object(at.S)(e.$Type.value,t.props.i18n.t))}))}},{key:"render",value:function(){var e=this.props.cell.params.map(function(e){return e.format}).getOrElse(function(){return""}),t=this.props.cell.params.map(function(e){return e.zoneId}).flatMap(function(e){return e}).getOrElse(function(){return""});return m.createElement("div",null,m.createElement(W.a,{fullWidth:!0,label:this.props.i18n.t("Формат данных источника"),value:e,onChange:this.onTimeFormatChanged,InputProps:{endAdornment:m.createElement(et.a,{position:"end"},m.createElement(P.a,{onClick:this.onTimeFormatIconClick},m.createElement(nt.a,{style:{fontSize:20,cursor:"pointer",fill:"#9E9E9E"}})))}}),m.createElement(N.a,{fullWidth:!0},m.createElement(Ce.a,null,this.props.i18n.t("Часовой пояс")),m.createElement(M.a,{value:t,onChange:this.onTimeZoneChanged,fullWidth:!0},H.TimeZones.map(function(e,t){return m.createElement(Qe.a,{key:t,value:e.name.replace("GMT","")},m.createElement(Ze.a,{primary:e.name}))}))))}}]),t}(m.Component);it=ot([g.autobind],it);var ct,lt=Object(y.connect)(function(e,t){return{i18n:e.i18n}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n},areStatePropsEqual:function(e,t){return e.i18n===t.i18n}})(Object(rt.a)(it)),ut=(ct={},x()(ct,H.ValueTypeObjectRefs.$Type.value,function(e,t){return m.createElement(Ve,{cell:e,objRefFormId:t.entity.valueType.family})}),x()(ct,H.ValueTypeValuesList.$Type.value,function(e,t){return m.createElement(Ge,{cell:e})}),x()(ct,H.ValueTypeDate.$Type.value,function(e,t){return m.createElement(lt,{cell:e})}),ct),st=function(e){function t(){return i()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f()(t,e),l()(t,[{key:"render",value:function(){var e=this;return Object(We.e)(this.props.fields,this.props.formId).flatMap(function(t){return Object(te.headOption)(t.filter(function(t){return t.id.value===e.props.cell.formField})).flatMap(function(t){return Object(U.b)(t.entity.valueType.tpe.value)(ut).map(function(n){return n(e.props.cell,t)})})}).getOrNull()}}]),t}(m.Component),pt=Object(y.connect)(function(e,t){return{i18n:e.i18n,fields:e.fields}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n&&e.fields===t.fields},areStatePropsEqual:function(e,t){return e.i18n===t.i18n&&e.fields===t.fields}})(st),ft=function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":h()(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},dt=function(e){function t(){return i()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f()(t,e),l()(t,[{key:"onCellFieldSelected",value:function(e){var t=this;e.foreach(function(e){t.props.dispatch(Object(z.fb)({cell:t.props.cell,formField:e.value}))})}},{key:"render",value:function(){return m.createElement(Ae.a,{native:!0,style:{flex:1},value:H.Id.createId(this.props.cell.formField),fields:this.props.fields.getOrElse(function(){return new Array}),labelText:new te.None,errorText:new te.None,onChanged:this.onCellFieldSelected,initWithFirstField:this.props.initWithFirstField})}}]),t}(m.Component);dt=ft([g.autobind],dt);var ht=Object(y.connect)(function(e,t){return{i18n:e.i18n,fields:Object(We.e)(e.fields,t.formId)}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n&&e.fields===t.fields},areStatePropsEqual:function(e,t){return e.i18n===t.i18n&&Object(te.isEqual)(e.fields,t.fields)}})(dt),mt=function(e){function t(){return i()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f()(t,e),l()(t,[{key:"isParentRef",value:function(){return this.props.cell.params.map(function(e){return e instanceof H.ParentRef}).getOrElse(function(){return!1})}},{key:"isParentSearch",value:function(){return this.props.cell.params.map(function(e){return e instanceof H.ParentSearch}).getOrElse(function(){return!1})}},{key:"render",value:function(){return m.createElement(m.Fragment,null,m.createElement("div",{style:{display:"flex"}},m.createElement(ht,{formId:this.props.formId,cell:this.props.cell,initWithFirstField:this.props.initWithFirstField}),m.createElement(ke,{cell:this.props.cell})),this.props.cell.params.nonEmpty()&&this.isParentRef()&&m.createElement(xe,{cell:this.props.cell}),this.props.cell.params.nonEmpty()&&this.isParentSearch()&&m.createElement(Le,{cell:this.props.cell}),m.createElement(pt,{cell:this.props.cell,formId:this.props.formId}))}}]),t}(m.Component),yt=Object(y.connect)(function(e,t){return{i18n:e.i18n}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n},areStatePropsEqual:function(e,t){return e.i18n===t.i18n}})(mt),gt=function(e){function t(){return i()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f()(t,e),l()(t,[{key:"render",value:function(){return m.createElement(I.a,null,m.createElement(F.a,null,m.createElement(Q,{cell:this.props.cell,headers:this.props.headers,fetch:this.props.fetch})),m.createElement(F.a,null,m.createElement(yt,{formId:this.props.formId,cell:this.props.cell,initWithFirstField:this.props.initWithFirstField})),m.createElement(F.a,{style:{width:"48px"}},m.createElement(ae,{cell:this.props.cell,materialize:this.props.materialize})),m.createElement(F.a,{style:{width:"100px"}},m.createElement(Ee,{cell:this.props.cell,cellIdx:this.props.cellIdx,headers:this.props.headers,onHeadersDelete:this.props.onHeadersDelete})))}}]),t}(m.Component),vt=Object(y.connect)(function(e,t){return{i18n:e.i18n}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n},areStatePropsEqual:function(e,t){return e.i18n===t.i18n}})(gt),bt=function(e){function t(){return i()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f()(t,e),l()(t,[{key:"render",value:function(){var e=this;return m.createElement(_.a,{style:{overflow:"hidden",overflowY:"auto"}},this.props.format.cells.map(function(t,n){return m.createElement(vt,{key:n,formId:e.props.formId,headers:e.props.headers,initWithFirstField:e.props.initWithFirstField,cell:t,cellIdx:n,materialize:e.props.materialize,fetch:e.props.fetch,onHeadersDelete:e.props.onHeadersDelete})}),0===this.props.format.cells.length?m.createElement(I.a,null,m.createElement(F.a,null,m.createElement("div",{style:{textAlign:"center"}},this.props.i18n.t("Список соответствий колонок и полей пуст")))):null)}}]),t}(m.Component),Ot=Object(y.connect)(function(e,t){return{i18n:e.i18n}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n},areStatePropsEqual:function(e,t){return e.i18n===t.i18n}})(bt),wt=function(e){function t(){return i()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f()(t,e),l()(t,[{key:"render",value:function(){return m.createElement(b.a,{style:{height:"100%"}},m.createElement(S,{headers:this.props.headers}),m.createElement(Ot,{formId:this.props.formId,format:this.props.format,fetch:this.props.fetch,materialize:this.props.materialize,headers:this.props.headers,initWithFirstField:this.props.initWithFirstField,onHeadersDelete:this.props.onHeadersDelete}))}}]),t}(m.Component),Et=Object(y.connect)(function(e,t){return{i18n:e.i18n}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n},areStatePropsEqual:function(e,t){return e.i18n===t.i18n}})(wt),It=n(43),Ct=n.n(It),Ft=n(216),jt=function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":h()(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},Pt=function(e){function t(){return i()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f()(t,e),l()(t,[{key:"onAutoSelect",value:function(){var e=this,t=function(e){return e.replace(/ /g,"").toLowerCase()},n=this.props.fields.getOrElse(function(){return[]});this.props.headers.forEach(function(r,a){n.forEach(function(n){t(r)===t(n.entity.caption)&&Object(te.lift)(e.props.format.cells,a).foreach(function(t){e.onCellFieldSelected(t,n.id)})})})}},{key:"getNextField",value:function(){var e=this.props.fields.getOrElse(function(){return[]}).map(function(e){return e.id.value}),t=this.props.format.cells.map(function(e){return e.formField});if(0===t.length)return Object(te.headOption)(e);var n=Object(te.headOption)([].concat(Ct()(t)).reverse()),r=Object(te.headOption)([].concat(Ct()(e)).reverse());return Object(te.isEqual)(n,r)?n:n.map(function(t){return e.findIndex(function(e){return e===t})}).flatMap(function(t){return Object(te.lift)(e,t+1)})}},{key:"onNewFieldRequested",value:function(){var e=this;this.getNextField().foreach(function(t){e.props.dispatch(Object(z.gb)(t))})}},{key:"onCellFieldSelected",value:function(e,t){this.props.dispatch(Object(z.fb)({cell:e,formField:t.value}))}},{key:"render",value:function(){return m.createElement(Ft.b,{leftButtonGroup:[]},this.props.headers.length>0?m.createElement(ie.a,{variant:"raised",onClick:this.onAutoSelect,color:"primary"},this.props.i18n.t("Сопоставить автоматически")):m.createElement(ie.a,{variant:"raised",onClick:this.onNewFieldRequested,color:"primary"},this.props.i18n.t("Добавить")))}}]),t}(m.Component);Pt=jt([g.autobind],Pt);var Dt=Object(y.connect)(function(e,t){return{i18n:e.i18n,fields:Object(We.e)(e.fields,t.formId)}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n},areStatePropsEqual:function(e,t){return e.i18n===t.i18n}})(Pt),Tt=function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":h()(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},kt=function(e){function t(){return i()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f()(t,e),l()(t,[{key:"render",value:function(){return m.createElement(m.Fragment,null,m.createElement(Et,{formId:this.props.formId,format:this.props.format,fetch:this.props.fetch,headers:this.props.headers,initWithFirstField:this.props.initWithFirstField,materialize:this.props.materialize,onHeadersDelete:this.props.onHeadersDelete}),m.createElement(Dt,{formId:this.props.formId,format:this.props.format,headers:[]}))}}]),t}(m.Component);kt=Tt([g.autobind],kt);t.a=Object(y.connect)(function(e,t){return{i18n:e.i18n}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n},areStatePropsEqual:function(e,t){return e.i18n===t.i18n}})(kt)},2115:function(e,t,n){"use strict";var r=n(6),a=n.n(r),o=n(10),i=n.n(o),c=n(7),l=n.n(c),u=n(8),s=n.n(u),p=n(4),f=n.n(p),d=n(11),h=n.n(d),m=n(2),y=n(14),g=n(13),v=n(1),b=n(3),O=n(26),w=n.n(O),E=n(70),I=function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":h()(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},C=function(e){function t(){return a()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s()(t,e),i()(t,[{key:"onValuesSeparatorChanged",value:function(e){this.props.dispatch(Object(E.ob)(b(this.props.readerFormat,{delimiter:{$set:e}})))}},{key:"onLinesSeparatorChanged",value:function(e){this.props.dispatch(Object(E.ob)(b(this.props.readerFormat,{lineTerminator:{$set:e.replace(/\\n/gi,String.fromCharCode(10)).replace(/\\r/gi,String.fromCharCode(13))}})))}},{key:"onStringQuotationChanged",value:function(e){this.props.dispatch(Object(E.ob)(b(this.props.readerFormat,{quoteChar:{$set:e}})))}},{key:"onEscapeCharacterChanged",value:function(e){this.props.dispatch(Object(E.ob)(b(this.props.readerFormat,{escapeChar:{$set:e}})))}},{key:"onEncodingChanged",value:function(e){this.props.dispatch(Object(E.ob)(b(this.props.readerFormat,{encoding:{$set:e}})))}},{key:"render",value:function(){var e=this;return m.createElement("div",{style:{width:"100%"}},m.createElement(w.a,{fullWidth:!0,onChange:function(t){return e.onValuesSeparatorChanged(t.target.value)},label:this.props.i18n.t("Разделитель значений"),value:this.props.readerFormat.delimiter}),m.createElement(w.a,{fullWidth:!0,onChange:function(t){return e.onLinesSeparatorChanged(t.target.value)},label:this.props.i18n.t("Разделитель строк"),value:this.props.readerFormat.lineTerminator.replace(new RegExp("\n","g"),"\\n").replace(new RegExp("\r","g"),"\\r")}),m.createElement(w.a,{fullWidth:!0,onChange:function(t){return e.onStringQuotationChanged(t.target.value)},label:this.props.i18n.t("Символ для представления строк"),value:this.props.readerFormat.quoteChar}),m.createElement(w.a,{fullWidth:!0,onChange:function(t){return e.onEscapeCharacterChanged(t.target.value)},label:this.props.i18n.t("Символ экранирования"),value:this.props.readerFormat.escapeChar}),m.createElement(w.a,{fullWidth:!0,onChange:function(t){return e.onEncodingChanged(t.target.value)},label:this.props.i18n.t("Кодировка"),value:this.props.readerFormat.encoding}))}}]),t}(m.Component);C=I([g.autobind],C);var F=Object(y.connect)(function(e,t){return{i18n:e.i18n}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n},areStatePropsEqual:function(e,t){return e.i18n===t.i18n}})(C),j=n(0),P=function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":h()(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},D=function(e){function t(){return a()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s()(t,e),i()(t,[{key:"onSheetIdxChanged",value:function(e){this.props.dispatch(Object(E.ob)(b(this.props.readerFormat,{sheetIdx:{$set:e&&e.trim().length>0?Object(j.toOption)(parseInt(e)):new j.None}})))}},{key:"render",value:function(){var e=this;return m.createElement("div",null,m.createElement(w.a,{fullWidth:!0,label:this.props.i18n.t("Номер листа с данными"),onChange:function(t){return e.onSheetIdxChanged(t.target.value)},value:this.props.readerFormat.sheetIdx.map(function(e){return e.toString()}).getOrElse(function(){return"0"})}))}}]),t}(m.Component);D=P([g.autobind],D);var T=Object(y.connect)(function(e,t){return{i18n:e.i18n}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n},areStatePropsEqual:function(e,t){return e.i18n===t.i18n}})(D),k=function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":h()(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},S=function(e){function t(){return a()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s()(t,e),i()(t,[{key:"onRootPathChanged",value:function(e){this.props.dispatch(Object(E.ob)(b(this.props.readerFormat,{rootPath:{$set:e.target.value}})))}},{key:"render",value:function(){return m.createElement("div",null,m.createElement(w.a,{fullWidth:!0,onChange:this.onRootPathChanged,label:this.props.i18n.t("Путь до массива с данными"),value:this.props.readerFormat.rootPath}))}}]),t}(m.Component);S=k([g.autobind],S);var R=Object(y.connect)(function(e,t){return{i18n:e.i18n}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n},areStatePropsEqual:function(e,t){return e.i18n===t.i18n}})(S),_=function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":h()(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},$=function(e){function t(){return a()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s()(t,e),i()(t,[{key:"onConfigChanged",value:function(e){this.props.dispatch(Object(E.ob)(b(this.props.readerFormat,{config:{$set:e.target.value}})))}},{key:"render",value:function(){return m.createElement("div",null,m.createElement(w.a,{fullWidth:!0,onChange:this.onConfigChanged,multiline:!0,rows:10,rowsMax:20,label:this.props.i18n.t("Конфигурация"),value:this.props.readerFormat.config}))}}]),t}(m.Component);$=_([g.autobind],$);var x,q=Object(y.connect)(function(e,t){return{i18n:e.i18n}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n},areStatePropsEqual:function(e,t){return e.i18n===t.i18n}})($),N=n(56),L=n(416),W=n.n(L),A=n(33),M=n.n(A),H=n(319),z=n.n(H),U=n(271),X=n.n(U),V=n(267),J=n.n(V),G=n(1908),K=n(371),Z=function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":h()(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},B=(x={},f()(x,v.DataFormatExcel.$Type.value,function(){return new K.b}),f()(x,v.DataFormatCsv.$Type.value,function(){return new K.a}),f()(x,v.DataFormatJson.$Type.value,function(){return new K.d}),f()(x,v.DataFormatText.$Type.value,function(){return new K.e("")}),x),Q=function(e){function t(){return a()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s()(t,e),i()(t,[{key:"onReaderFormatChanged",value:function(e,t){var n=this;Object(N.b)(t)(B).map(function(e){return e()}).matchWith(function(e){n.props.dispatch(Object(E.ob)(e))},function(){throw"Uknown data format type"})}},{key:"render",value:function(){return m.createElement(m.Fragment,null,m.createElement(W.a,{name:"readerFormat",onChange:this.onReaderFormatChanged,value:this.props.read.readerFormat.tpe.value},m.createElement(M.a,{control:m.createElement(z.a,{style:G.b,icon:m.createElement(X.a,{style:G.a}),checkedIcon:m.createElement(J.a,{style:G.a})}),value:v.DataFormatExcel.$Type.value,label:this.props.i18n.t("Excel")}),m.createElement(M.a,{control:m.createElement(z.a,{style:G.b,icon:m.createElement(X.a,{style:G.a}),checkedIcon:m.createElement(J.a,{style:G.a})}),value:v.DataFormatCsv.$Type.value,label:this.props.i18n.t("CSV")}),m.createElement(M.a,{control:m.createElement(z.a,{style:G.b,icon:m.createElement(X.a,{style:G.a}),checkedIcon:m.createElement(J.a,{style:G.a})}),value:v.DataFormatJson.$Type.value,label:this.props.i18n.t("JSON")}),m.createElement(M.a,{control:m.createElement(z.a,{style:G.b,icon:m.createElement(X.a,{style:G.a}),checkedIcon:m.createElement(J.a,{style:G.a})}),value:v.DataFormatText.$Type.value,label:this.props.i18n.t("Текст")})))}}]),t}(m.Component);Q=Z([g.autobind],Q);var Y=Object(y.connect)(function(e,t){return{i18n:e.i18n}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n},areStatePropsEqual:function(e,t){return e.i18n===t.i18n}})(Q),ee=function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":h()(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},te=function(e){function t(){return a()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s()(t,e),i()(t,[{key:"onStartLineChanged",value:function(e){var t="0"===e.target.value?new j.None:Object(j.toOption)(Number.parseInt(e.target.value));this.props.dispatch(Object(E.xb)(t))}},{key:"onEndLineChanged",value:function(e){var t="0"===e.target.value?new j.None:Object(j.toOption)(Number.parseInt(e.target.value));this.props.dispatch(Object(E.nb)(t))}},{key:"render",value:function(){return m.createElement(m.Fragment,null,m.createElement(w.a,{fullWidth:!0,label:this.props.i18n.t("Начальная строка"),type:"number",onChange:this.onStartLineChanged,value:this.props.read.startLine.getOrElse(function(){return 0})}),m.createElement(w.a,{fullWidth:!0,label:this.props.i18n.t("Конечная строка"),type:"number",onChange:this.onEndLineChanged,value:this.props.read.endLine.getOrElse(function(){return 0})}))}}]),t}(m.Component);te=ee([g.autobind],te);var ne,re=Object(y.connect)(function(e,t){return{i18n:e.i18n}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n},areStatePropsEqual:function(e,t){return e.i18n===t.i18n}})(te),ae=function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":h()(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},oe=(ne={},f()(ne,v.DataFormatCsv.$Type.value,function(e){return m.createElement(F,{readerFormat:e})}),f()(ne,v.DataFormatExcel.$Type.value,function(e){return m.createElement(T,{readerFormat:e})}),f()(ne,v.DataFormatJson.$Type.value,function(e){return m.createElement(R,{readerFormat:e})}),f()(ne,v.DataFormatText.$Type.value,function(e){return m.createElement(q,{readerFormat:e})}),ne),ie=function(e){function t(){return a()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s()(t,e),i()(t,[{key:"renderDataFormatSettings",value:function(){var e=this;Object(N.b)(this.props.readStage.readerFormat.tpe.value)(oe).matchWith(function(t){return t(e.props.readStage.readerFormat)},function(){throw"unknown reader format"})}},{key:"render",value:function(){return m.createElement("div",null,m.createElement("h4",null,this.props.i18n.t("Настройки формата")),m.createElement("div",{style:{marginLeft:"20px"}},m.createElement(Y,{read:this.props.readStage}),this.renderDataFormatSettings(),m.createElement(re,{read:this.props.readStage})))}}]),t}(m.Component);ie=ae([g.autobind],ie);t.a=Object(y.connect)(function(e,t){return{i18n:e.i18n}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n},areStatePropsEqual:function(e,t){return e.i18n===t.i18n}})(ie)}}]);