(window.webpackJsonpwww=window.webpackJsonpwww||[]).push([[66],{1588:function(t,n,e){"use strict";var r=e(17),o=e(6),c=e.n(o),i=e(7),u=e.n(i),a=e(8),s=e.n(a),f=e(18),l="Administration.SuperAdmin",p=function(t){function n(){return c()(this,n),u()(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,l,"AccountList",{}))}return s()(n,t),n}(f.a),d=function(t){function n(){return c()(this,n),u()(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,l,"AccountOrganisationsList",{}))}return s()(n,t),n}(f.a),h=function(t){function n(t){return c()(this,n),u()(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,l,"OrganisationResolve",{orgId:t}))}return s()(n,t),n}(f.a),m=function(t){function n(t){return c()(this,n),u()(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,l,"ResolveUser",{userId:t}))}return s()(n,t),n}(f.a),O=(function(t){function n(t){return c()(this,n),u()(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,l,"AccountUsersList",{accountId:t}))}s()(n,t)}(f.a),function(t){function n(t){return c()(this,n),u()(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,l,"OrganisationUsersList",{orgId:t}))}return s()(n,t),n}(f.a)),b=function(t){function n(t,e){return c()(this,n),u()(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,l,"AccountAddUser",{accountId:t,userId:e}))}return s()(n,t),n}(f.a),g=function(t){function n(t,e){return c()(this,n),u()(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,l,"AccountRemoveUser",{accountId:t,userId:e}))}return s()(n,t),n}(f.a),_=(function(t){function n(t,e){return c()(this,n),u()(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,l,"OrganisationUpdateJourneyLimits",{orgId:t,journeyLimits:e}))}s()(n,t)}(f.a),function(t){function n(t){return c()(this,n),u()(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,l,"PaymentConfigList",{orgId:t}))}s()(n,t)}(f.a),function(t){function n(t,e){return c()(this,n),u()(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,l,"AccountUpdateEmail",{accountId:t,email:e}))}return s()(n,t),n}(f.a)),j=function(t){function n(t,e){return c()(this,n),u()(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,l,"AccountUpdateAuthType",{accountId:t,authType:e}))}return s()(n,t),n}(f.a),y=function(t){function n(t,e){return c()(this,n),u()(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,l,"AccountUpdatePassword",{accountId:t,password:e}))}return s()(n,t),n}(f.a),v=function(t){function n(t,e){return c()(this,n),u()(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,l,"AccountUpdateName",{accountId:t,name:e}))}return s()(n,t),n}(f.a),w=function(t){function n(t,e,r,o,i,a,s,f){return c()(this,n),u()(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,l,"OrganisationUpdateSettings",{orgId:t,name:e,payment:r,currency:o,logo:i,httpTimeout:a,zoneId:s.map(function(t){return t.name}),uiConfig:f}))}return s()(n,t),n}(f.a),P=e(21);e.d(n,"b",function(){return E}),e.d(n,"c",function(){return A}),e.d(n,"d",function(){return I}),e.d(n,"a",function(){return k}),e.d(n,"e",function(){return C}),e.d(n,"l",function(){return S}),e.d(n,"j",function(){return R}),e.d(n,"i",function(){return x}),e.d(n,"k",function(){return U}),e.d(n,"h",function(){return N}),e.d(n,"f",function(){return T}),e.d(n,"g",function(){return D});var E=function(){return r.a.send(new p,function(t){return t})},A=function(){return r.a.send(new d,Object(P.g)())},I=function(t){return r.a.send(new O(t),function(t){return t})},k=function(t,n){return r.a.send(new b(t,n),Object(P.f)())},C=function(t,n){return r.a.send(new g(t,n),Object(P.f)())},S=function(t,n,e,o,c,i,u,a){return r.a.send(new w(t,n,e,o,c,i,u,a),Object(P.f)())},R=function(t,n){return r.a.send(new v(t,n),Object(P.f)())},x=function(t,n){return r.a.send(new _(t,n),Object(P.f)())},U=function(t,n){return r.a.send(new y(t,n),Object(P.f)())},N=function(t,n){return r.a.send(new j(t,n),Object(P.f)())},T=function(t){return r.a.send(new h(t),Object(P.e)())},D=function(t){return r.a.send(new m(t),Object(P.e)())}},1600:function(t,n,e){"use strict";e.d(n,"a",function(){return a}),e.d(n,"c",function(){return s}),e.d(n,"d",function(){return f}),e.d(n,"b",function(){return l}),e.d(n,"e",function(){return p});var r=e(135),o=e(1588),c=e(169),i=e(130),u=e(436),a=function(){return function(t){return t(Object(r.u)()),o.b().then(function(n){return t(Object(r.v)(n)),n}).catch(function(n){throw t(Object(r.t)(n)),n})}},s=function(){return function(t){return t(Object(r.z)()),o.c().then(function(n){return t(Object(r.A)(n.list)),n.list}).catch(function(n){throw t(Object(r.y)(n)),n})}},f=function(t){return function(n){return n(Object(c.h)()),o.d(t).then(function(t){return n(Object(c.i)(t)),t}).catch(function(t){throw n(Object(c.g)(t)),t})}},l=function(t){return function(n){return n(Object(r.w)()),o.f(t).then(function(t){return n(Object(r.x)(t.record)),t}).catch(function(t){throw n(Object(i.o)(t)),t})}},p=function(t){return function(n){return n(Object(u.e)()),o.d(t).then(function(t){return n(Object(u.f)(t.list)),t}).catch(function(t){throw n(Object(u.d)(t)),t})}}},2667:function(t,n,e){var r=e(2668);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};e(121)(r,o);r.locals&&(t.exports=r.locals)},2668:function(t,n,e){(t.exports=e(120)(!1)).push([t.i,".AccountConfig {\n  display: flex;\n  height: 100%; }\n\n.AccountConfig__menu {\n  width: 256px;\n  margin: 4px 4px 4px 0;\n  height: fit-content; }\n\n.AccountConfig__content {\n  flex: 1;\n  margin: 4px 0 4px 4px; }\n",""])},2745:function(t,n,e){"use strict";e.r(n);var r=e(6),o=e.n(r),c=e(10),i=e.n(c),u=e(7),a=e.n(u),s=e(8),f=e.n(s),l=e(11),p=e.n(l),d=e(2),h=e(13),m=e(14),O=e(160),b=e.n(O),g=e(52),_=e.n(g),j=e(218),y=e.n(j),v=e(19),w=e.n(v),P=e(1467),E=e(136),A=e(1461),I=e(98),k=e.n(I),C=e(107),S=e.n(C),R=e(54),x=e.n(R),U=e(93),N=e.n(U),T=e(1),D=e(1588),M=e(3),F=(e(2667),e(2035)),L=e(2036),$=e(2042),z=e(2043),J=e(71),B=e(135),V=function(t,n,e,r){var o,c=arguments.length,i=c<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,e):r;if("object"===("undefined"==typeof Reflect?"undefined":p()(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,n,e,r);else for(var u=t.length-1;u>=0;u--)(o=t[u])&&(i=(c<3?o(i):c>3?o(n,e,i):o(n,e))||i);return c>3&&i&&Object.defineProperty(n,e,i),i},q=function(t,n){if("object"===("undefined"==typeof Reflect?"undefined":p()(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,n)},H=0,G=function(t){function n(t){o()(this,n);var e=a()(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e.state={activeMenu:H},e}return f()(n,t),i()(n,[{key:"handleMenuSelect",value:function(t){this.setState(M(this.state,{activeMenu:{$set:t}}))}},{key:"handleUpdate",value:function(t){var n=this;this.props.superadmin.account.data.foreach(function(e){n.props.dispatch(Object(B.s)(t(e)))})}},{key:"onPasswordSave",value:function(t){var n=this;return new Promise(function(e,r){Object(D.k)(n.props.accountId,t.newPassword).then(function(t){n.props.dispatch(Object(J.h)(n.props.i18n.t("Изменения успешно сохранены")))})})}},{key:"onSecuritySave",value:function(t){var n=this;return new Promise(function(e,r){Object(D.h)(n.props.accountId,t.twoFactorAuthentication?new T.AuthTypeTwoFactor(!!t.twoFactorAuthenticationBySms,!0):new T.AuthTypeNormal).then(function(t){n.props.dispatch(Object(J.h)(n.props.i18n.t("Изменения успешно сохранены")))})})}},{key:"onPersonalSettingsSave",value:function(t){var n=this;return new Promise(function(e,r){var o=n.props.accountName.map(function(n){return n!==t.name}),c=n.props.accountEmail.map(function(n){return n!==t.email});Promise.all([o.filter(function(t){return t}).map(function(e){return Object(D.j)(n.props.accountId,t.name)}).getOrElse(function(){return new Promise(function(t,n){return n()})}),c.filter(function(t){return t}).map(function(e){return Object(D.i)(n.props.accountId,t.email)}).getOrElse(function(){return new Promise(function(t,n){return n()})})]).then(function(e){n.handleUpdate(function(n){return M(n,{name:{$set:t.name},email:{$set:t.email}})}),n.props.dispatch(Object(J.h)(n.props.i18n.t("Изменения успешно сохранены")))})})}},{key:"renderContent",value:function(){switch(this.state.activeMenu){case H:return d.createElement(F.a,{onSubmit:this.onPersonalSettingsSave,initialValues:{name:this.props.accountName.getOrElse(function(){return""}),email:this.props.accountEmail.getOrElse(function(){return""})}});case 2:return d.createElement($.a,{onSubmit:this.onPasswordSave});case 3:return d.createElement(z.a,{onSubmit:this.onSecuritySave,initialValues:{twoFactorAuthentication:this.props.twoFactorAuthentication}});case 1:return d.createElement(L.a,{handleDialogClose:this.props.handleDialogClose,openDialog:this.props.openDialog});default:throw new Error("unknown content id")}}},{key:"render",value:function(){var t=this;return d.createElement("div",{className:"AccountConfig"},d.createElement(N.a,{className:"AccountConfig__menu"},d.createElement(k.a,null,d.createElement(S.a,{button:!0,onClick:function(){return t.handleMenuSelect(H)},style:this.state.activeMenu===H?{backgroundColor:"#ccc"}:{}},d.createElement(x.a,{primary:this.props.i18n.t("Пресональные данные")})),d.createElement(S.a,{button:!0,onClick:function(){return t.handleMenuSelect(2)},style:2===this.state.activeMenu?{backgroundColor:"#ccc"}:{}},d.createElement(x.a,{primary:this.props.i18n.t("Настройки пароля")})),d.createElement(S.a,{button:!0,onClick:function(){return t.handleMenuSelect(3)},style:3===this.state.activeMenu?{backgroundColor:"#ccc"}:{}},d.createElement(x.a,{primary:this.props.i18n.t("Настройки безопасности")})))),d.createElement(N.a,{className:"AccountConfig__content"},this.renderContent()))}}]),n}(d.Component);G=V([h.autobind,q("design:paramtypes",[Object])],G);var K=Object(m.connect)(function(t){return{i18n:t.i18n,superadmin:t.superadmin,accountName:t.superadmin.account.data.map(function(t){return t.name}),accountEmail:t.superadmin.account.data.map(function(t){return t.email}),twoFactorAuthentication:t.account.profile.map(function(t){return t.authType.tpe.value===T.AuthTypeTwoFactor.$Type.value}).getOrElse(function(){return!1})}})(G),Q=e(79),W=(e(2044),e(1600)),X=e(0);e.d(n,"resolveAccountDesc",function(){return nt});var Y=function(t,n,e,r){var o,c=arguments.length,i=c<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,e):r;if("object"===("undefined"==typeof Reflect?"undefined":p()(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,n,e,r);else for(var u=t.length-1;u>=0;u--)(o=t[u])&&(i=(c<3?o(i):c>3?o(n,e,i):o(n,e))||i);return c>3&&i&&Object.defineProperty(n,e,i),i},Z=function(t,n){if("object"===("undefined"==typeof Reflect?"undefined":p()(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,n)},tt=function(t){function n(t){return o()(this,n),a()(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,P.a.screenInitialState()))}return f()(n,t),i()(n,[{key:"renderNavigation",value:function(){return d.createElement("div",null)}},{key:"openOrganisationsPage",value:function(){this.props.dispatch(Object(Q.tb)())}},{key:"render",value:function(){var t=this;return this.props.superadmin.account.data.map(function(n){return t.renderScreenBody({className:"AccountProfilePage"},d.createElement("div",null,d.createElement(y.a,{className:"AccountProfilePage-nav"},d.createElement(w.a,{onClick:t.openOrganisationsPage},t.props.i18n.t("К списку аккаунтов")),d.createElement("div",{style:{flex:1,textAlign:"center"}},t.props.superadmin.account.data.isEmpty()?d.createElement(b.a,{style:{marginTop:"6px"},size:36}):d.createElement(_.a,{variant:"title",style:{lineHeight:"48px"}},t.props.i18n.t("Профиль")+" - "+t.props.superadmin.account.data.map(function(t){return t.name}).getOrElse(function(){return""})))),d.createElement(K,{accountId:n.id,openDialog:t.openDialog,handleDialogClose:t.handleDialogClose})))}).getOrNull()}}]),n}(P.a);tt=Y([h.autobind,Z("design:paramtypes",[Object])],tt);var nt=function(t,n){t.dispatch(Object(W.a)()).then(function(e){Object(X.headOption)(e.filter(function(t){return t.id.value===n.value})).foreach(function(n){t.dispatch(Object(B.s)(n))})})};n.default=Object(m.connect)(function(t){return{i18n:t.i18n,superadmin:t.superadmin}})(Object(A.a)(Object(E.a)(function(){},function(t){t.isTokenChecked&&t.superadmin.account.data.isEmpty()&&T.Id.createId(t.params.accountId).foreach(function(n){nt(t,n)})},function(t,n){Object(X.isEqual)(T.Id.createId(t.params.organisationId).map(function(t){return t.value}),T.Id.createId(n.params.organisationId).map(function(t){return t.value}))})(tt)))}}]);