(window.webpackJsonpwww=window.webpackJsonpwww||[]).push([[69],{2736:function(t,e,n){"use strict";n.r(e);var o=n(6),r=n.n(o),a=n(10),i=n.n(a),u=n(7),l=n.n(u),s=n(8),c=n.n(s),p=n(2),d=n(14),f=n(1453),h=n(1452),y=n(1455),b=n(1),v=n(215),O=n(0),k=function(t){function e(){return r()(this,e),l()(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return c()(e,t),i()(e,[{key:"render",value:function(){return p.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.value.map(function(t){return t.toString()}).getOrElse(function(){return""})}})}}]),e}(p.Component),m=Object(d.connect)(function(t,e){return{value:Object(v.d)(t.dataOutput,e.blockRendererId,e.output).map(function(t){return t.value}).filter(function(t){return t instanceof b.ValueStr})}},function(t,e){return{}},function(t,e,n){return Object.assign({},t,e,n)},{areStatesEqual:function(t,e){return t.dataOutput===e.dataOutput},areStatePropsEqual:function(t,e){return Object(O.isEqual)(t.value,e.value)}})(k),S=n(11),g=n.n(S),C=n(13),E=n(16),w=n(32),j=n.n(w),R=n(1454),I=n(424),H=n(292),_=n(266),q=n(3),P=function(t,e,n,o){var r,a=arguments.length,i=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===("undefined"==typeof Reflect?"undefined":g()(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var u=t.length-1;u>=0;u--)(r=t[u])&&(i=(a<3?r(i):a>3?r(e,n,i):r(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},T=function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":g()(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},L={flex:"1"},B=function(t){function e(t){r()(this,e);var n=l()(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={editorState:new O.None,editorStateHtml:new O.None,showHtml:!1},n}return c()(e,t),i()(e,[{key:"setEditorState",value:function(t){var e=Object(_.a)(t,new E.CompositeDecorator([]),[],[],[],this.props.i18n.t);this.setState(q(this.state,{editorState:{$set:Object(O.toOption)(e)},editorStateHtml:{$set:Object(O.toOption)(t)}}))}},{key:"componentDidMount",value:function(){var t=this;this.props.value.filter(function(t){return""!==t.value}).matchWith(function(e){t.setEditorState(e.value)},function(){t.setEditorState("<div></div>")})}},{key:"componentWillReceiveProps",value:function(t){var e=this;Object(O.isEqual)(this.props.value.map(function(t){return t.value}),t.value.map(function(t){return t.value}))||Object(O.isEqual)(this.state.editorStateHtml,t.value.map(function(t){return t.value}))||t.value.foreach(function(t){e.setEditorState(t.value)})}},{key:"onChange",value:function(t){this.props.onChange(new b.ValueStr(t),this.props.output)}},{key:"onBlur",value:function(){this.props.onControlBlur()}},{key:"wrapControl",value:function(t){return p.createElement(j.a,{fullWidth:!0},t,p.createElement(R.a,{formHelper:!0,display:this.props.display,error:this.props.error,blockStyle:this.props.blockStyle}))}},{key:"onEditorStateChange",value:function(t){var e=this;this.setState(q(this.state,{editorState:{$set:Object(O.toOption)(t)}}),function(){setTimeout(function(){if(e.state.editorState.map(function(e){return e===t}).getOrElse(function(){return!1})&&!e.state.showHtml){var n=Object(E.convertToRaw)(t.getCurrentContent()),o=Object(H.a)(n);e.setState(q(e.state,{editorStateHtml:{$set:Object(O.toOption)(o)}}),function(){e.onChange(Object(H.a)(n))})}},500)})}},{key:"onShowHTMLChange",value:function(t){this.setState(q(this.state,{showHtml:{$set:t}}))}},{key:"onUrlLinksChange",value:function(){}},{key:"onAttachmentsChange",value:function(){}},{key:"onInsertionsChange",value:function(){}},{key:"render",value:function(){var t=this;this.props.display.elementAttributes.flatMap(function(t){return t.title}).getOrElse(function(){return new b.ElementTitle});return this.state.editorState.map(function(e){return t.wrapControl(p.createElement(h.a,{display:t.props.display,style:L,blockStyle:t.props.blockStyle},p.createElement(I.a,{showInsertionButtons:!1,fields:[],formId:new O.None,organisationId:new O.None,html:t.props.value.map(function(t){return t.toString()}).getOrElse(function(){return""}),insertions:[],attachments:[],urlLinks:[],showHtml:t.state.showHtml,editorState:e,onChange:t.onEditorStateChange,onAttachmentsChange:t.onAttachmentsChange,onInsertionsChange:t.onInsertionsChange,onUrlLinksChange:t.onUrlLinksChange,onShowHTMLChange:t.onShowHTMLChange,onHtmlChange:t.onChange})))}).getOrNull()}}]),e}(p.Component);B=P([C.autobind,T("design:paramtypes",[Object])],B);var M=Object(d.connect)(function(t,e){return{i18n:t.i18n,value:Object(v.k)(t.dataOutput,e.blockRendererId,e.output).map(function(t){return t.value}).filter(function(t){return t instanceof b.ValueStr}),error:Object(v.m)(t.dataOutput,e.blockRendererId,e.display.id)}},function(t,e){return{}},function(t,e,n){return Object.assign({},t,e,n)},{areStatesEqual:function(t,e){return t.dataOutput===e.dataOutput&&t.i18n===e.i18n},areStatePropsEqual:function(t,e){return Object(O.isEqual)(t.value,e.value)&&Object(O.isEqual)(t.error,e.error)&&t.i18n===e.i18n},areOwnPropsEqual:function(t,e){return t.blockRendererId===e.blockRendererId&&t.output===e.output&&t.display===e.display&&t.control===e.control&&Object(O.isEqual)(t.blockStyle,e.blockStyle)}})(B),D=function(t){function e(){return r()(this,e),l()(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return c()(e,t),i()(e,[{key:"renderDisplayControl",value:function(){return p.createElement(h.a,{display:this.props.display,blockStyle:this.props.blockStyle},p.createElement(m,{output:this.props.output,blockRendererId:this.props.blockRendererId}))}},{key:"renderEditControl",value:function(){return p.createElement(M,{display:this.props.display,blockRendererId:this.props.blockRendererId,output:this.props.output,control:this.props.control,onControlBlur:this.props.onControlBlur,onChange:this.props.onChange,blockStyle:this.props.blockStyle})}},{key:"renderEditByClickControl",value:function(){return p.createElement(y.a,{display:this.props.display,blockRendererId:this.props.blockRendererId,output:this.props.output,displayComponent:this.renderDisplayControl(),editComponent:this.renderEditControl(),onChange:this.props.onChange})}}]),e}(f.a);e.default=Object(d.connect)(function(t,e){return{i18n:t.i18n}},function(t,e){return{dispatch:t}},function(t,e,n){return Object.assign({},t,e,n)},{areOwnPropsEqual:function(t,e){return t.blockRendererId===e.blockRendererId&&t.display===e.display&&t.control===e.control&&t.output===e.output&&t.blockType===e.blockType&&Object(O.isEqual)(t.blockStyle,t.blockStyle)}})(D)}}]);