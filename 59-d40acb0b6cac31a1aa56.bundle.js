(window.webpackJsonpwww=window.webpackJsonpwww||[]).push([[59],{1459:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return u});var i=n(79),r=n(104),o=n(82),a=function(){return function(e,t){return e(o.default.isA5000?Object(i.Mb)():Object(i.h)())}},u=function(e,t){return function(n,o){return o().eventLine.data.foreach(function(a){Object(r.e)(o().forms,e).foreach(function(r){n(Object(i.H)(a.id,r.entity.formType.getFormTypeId(),e,t))})})}}},1461:function(e,t,n){"use strict";var i=n(6),r=n.n(i),o=n(10),a=n.n(o),u=n(7),c=n.n(u),d=n(8),l=n.n(d),s=n(2),f=n(14),p=n(1469),h=n(1459),v=n(320),m=n(69),g=n(0),O=n(624);t.a=function(e){return Object(f.connect)(function(e){return{auth:e.auth,websocket:e.websocket,routing:e.routing}})(function(e){return function(t){function n(){return r()(this,n),c()(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return l()(n,t),a()(n,[{key:"componentWillMount",value:function(){var e=this;this.props.auth.signedOut||this.props.websocket.active&&(this.props.auth.checking||this.props.auth.checked&&this.props.auth.signedIn||this.props.auth.signingIn||this.props.auth.signedIn||Object(g.toOption)(this.props.routing.location).map(function(t){Object(g.liftKey)(Object(O.a)(t.search),"token").map(function(t){t.map(function(t){e.props.dispatch(Object(p.d)(t)).catch(function(t){e.signOut()})})}).getOrElse(function(){e.props.auth.token.map(function(t){e.props.dispatch(Object(p.d)(t)).catch(function(t){e.signOut()})}).getOrElse(function(){e.signOut()})})}))}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.auth.signedOut||e.websocket.active&&(e.auth.checking||(e.auth.checked&&e.auth.signedIn||e.auth.signingIn||e.auth.signedIn)&&(!e.websocket.active||this.props.websocket.active)||e.auth.token.map(function(n){e.dispatch(Object(p.d)(n)).catch(function(e){t.signOut()})}).getOrElse(function(){t.signOut()}))}},{key:"signOut",value:function(){this.props.dispatch(Object(m.r)()),this.props.dispatch(Object(v.c)()),this.props.dispatch(Object(h.b)())}},{key:"render",value:function(){return this.props.auth.signedIn&&!this.props.auth.signingIn?s.createElement(e,this.props):s.createElement("div",null)}}]),n}(s.Component)}(e))}},1462:function(e,t,n){"use strict";var i=n(855);Object.defineProperty(t,"__esModule",{value:!0});var r={};Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o.default}});var o=i(n(1464));Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))})},1463:function(e,t,n){"use strict";var i=n(855),r=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(36)),a=r(n(2)),u=(r(n(31)),i(n(1462))),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var n=e.breakpoint,i=void 0===n?"sm":n;return(0,u.default)()(function(e){return a.default.createElement(t,(0,o.default)({fullScreen:(0,u.isWidthDown)(i,e.width)},e))})}};t.default=c},1464:function(e,t,n){"use strict";var i=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.isWidthDown=t.isWidthUp=void 0;var r=i(n(36)),o=i(n(39)),a=i(n(73)),u=i(n(74)),c=i(n(76)),d=i(n(77)),l=i(n(78)),s=i(n(2)),f=(i(n(31)),i(n(217))),p=i(n(373)),h=(n(61),i(n(539))),v=i(n(263)),m=n(859),g=i(n(860));t.isWidthUp=function(e,t){return arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?m.keys.indexOf(e)<m.keys.indexOf(t):m.keys.indexOf(e)<=m.keys.indexOf(t)};t.isWidthDown=function(e,t){return arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?m.keys.indexOf(t)<m.keys.indexOf(e):m.keys.indexOf(t)<=m.keys.indexOf(e)};var O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var n=e.withTheme,i=void 0!==n&&n,O=e.noSSR,b=void 0!==O&&O,y=e.initialWidth,k=e.resizeInterval,w=void 0===k?166:k,j=function(e){function n(e){var t;return(0,a.default)(this,n),(t=(0,c.default)(this,(0,d.default)(n).call(this,e))).state={width:b?t.getWidth():void 0},"undefined"!=typeof window&&(t.handleResize=(0,p.default)(function(){var e=t.getWidth();e!==t.state.width&&t.setState({width:e})},w)),t}return(0,l.default)(n,e),(0,u.default)(n,[{key:"componentDidMount",value:function(){var e=this.getWidth();e!==this.state.width&&this.setState({width:e})}},{key:"componentWillUnmount",value:function(){this.handleResize.clear()}},{key:"getWidth",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.innerWidth,t=this.props.theme.breakpoints,n=null,i=1;null===n&&i<m.keys.length;){var r=m.keys[i];if(e<t.values[r]){n=m.keys[i-1];break}i+=1}return n=n||"xl"}},{key:"render",value:function(){var e=(0,g.default)({theme:this.props.theme,name:"MuiWithWidth",props:(0,r.default)({},this.props)}),n=e.initialWidth,a=e.theme,u=e.width,c=(0,o.default)(e,["initialWidth","theme","width"]),d=(0,r.default)({width:u||this.state.width||n||y},c);return void 0===d.width?null:(i&&(d.theme=a),s.default.createElement(s.default.Fragment,null,s.default.createElement(t,d),s.default.createElement(f.default,{target:"window",onResize:this.handleResize})))}}]),n}(s.default.Component);return(0,h.default)(j,t),(0,v.default)()(j)}};t.default=O},1465:function(e,t,n){"use strict";var i=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.isHorizontal=k,t.getAnchor=w,t.default=t.styles=void 0;var r=i(n(36)),o=i(n(55)),a=i(n(39)),u=i(n(73)),c=i(n(74)),d=i(n(76)),l=i(n(77)),s=i(n(78)),f=i(n(2)),p=(i(n(31)),i(n(47))),h=i(n(625)),v=i(n(38)),m=i(n(858)),g=i(n(93)),O=n(110),b=n(321),y={left:"right",right:"left",top:"down",bottom:"up"};function k(e){return-1!==["left","right"].indexOf(e.anchor)}function w(e){return"rtl"===e.theme.direction&&k(e)?y[e.anchor]:e.anchor}var j=function(e){return{root:{},docked:{flex:"0 0 auto"},paper:{overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:e.zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:"none"},paperAnchorLeft:{left:0,right:"auto"},paperAnchorRight:{left:"auto",right:0},paperAnchorTop:{top:0,left:0,bottom:"auto",right:0,height:"auto",maxHeight:"100%"},paperAnchorBottom:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},paperAnchorDockedLeft:{borderRight:"1px solid ".concat(e.palette.divider)},paperAnchorDockedTop:{borderBottom:"1px solid ".concat(e.palette.divider)},paperAnchorDockedRight:{borderLeft:"1px solid ".concat(e.palette.divider)},paperAnchorDockedBottom:{borderTop:"1px solid ".concat(e.palette.divider)},modal:{}}};t.styles=j;var P=function(e){function t(){var e,n;(0,u.default)(this,t);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(n=(0,d.default)(this,(e=(0,l.default)(t)).call.apply(e,[this].concat(r)))).mounted=!1,n}return(0,s.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"render",value:function(){var e=this.props,t=(e.anchor,e.BackdropProps),n=e.children,i=e.classes,u=e.className,c=e.elevation,d=e.ModalProps,l=(d=void 0===d?{}:d).BackdropProps,s=(0,a.default)(d,["BackdropProps"]),v=e.onClose,b=e.open,k=e.PaperProps,j=e.SlideProps,P=(e.theme,e.transitionDuration),R=e.variant,x=(0,a.default)(e,["anchor","BackdropProps","children","classes","className","elevation","ModalProps","onClose","open","PaperProps","SlideProps","theme","transitionDuration","variant"]),_=w(this.props),S=f.default.createElement(g.default,(0,r.default)({elevation:"temporary"===R?c:0,square:!0,className:(0,p.default)(i.paper,i["paperAnchor".concat((0,O.capitalize)(_))],(0,o.default)({},i["paperAnchorDocked".concat((0,O.capitalize)(_))],"temporary"!==R))},k),n);if("permanent"===R)return f.default.createElement("div",(0,r.default)({className:(0,p.default)(i.root,i.docked,u)},x),S);var W=f.default.createElement(m.default,(0,r.default)({in:b,direction:y[_],timeout:P,appear:this.mounted},j),S);return"persistent"===R?f.default.createElement("div",(0,r.default)({className:(0,p.default)(i.root,i.docked,u)},x),W):f.default.createElement(h.default,(0,r.default)({BackdropProps:(0,r.default)({},t,l,{transitionDuration:P}),className:(0,p.default)(i.root,i.modal,u),open:b,onClose:v},x,s),W)}}]),t}(f.default.Component);P.defaultProps={anchor:"left",elevation:16,open:!1,transitionDuration:{enter:b.duration.enteringScreen,exit:b.duration.leavingScreen},variant:"temporary"};var R=(0,v.default)(j,{name:"MuiDrawer",flip:!1,withTheme:!0})(P);t.default=R},1473:function(e,t,n){"use strict";var i=n(12);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.default}});var r=i(n(1463))},1474:function(e,t,n){"use strict";var i=n(12);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.default}});var r=i(n(1465))},2714:function(e,t,n){"use strict";n.r(t);var i=n(6),r=n.n(i),o=n(10),a=n.n(o),u=n(7),c=n.n(u),d=n(8),l=n.n(d),s=n(11),f=n.n(s),p=n(2),h=n(14),v=n(13),m=n(1),g=n(1467),O=n(627),b=n(0),y=n(79),k=n(1461),w=n(3),j=n(71),P=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var u=e.length-1;u>=0;u--)(r=e[u])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},R=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},x=function(e){function t(e){return r()(this,t),c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,Object.assign(g.a.screenInitialState(),{isSingleFormPageOpened:!1})))}return l()(t,e),a()(t,[{key:"componentDidMount",value:function(){this.shouldRedirectToSingleRolesForm(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.shouldRedirectToSingleRolesForm(e)}},{key:"shouldRedirectToSingleRolesForm",value:function(e){var t=this,n=function(t){return Object(b.headOption)(e.forms.list.filter(function(e){return e.id.value===t.value})).map(function(e){return e.entity.formType})},i=function(t){return function(e){return Object(b.headOption)(e.entity.permissions.filter(function(e){var t=e.operation;return t.tpe.value===m.PermissionOperationFormProperties.$Type.value&&n(t.formId).map(function(e){return m.FormType.isForm(e)}).getOrNull()}))}(t).map(function(t){var i,r=t.operation;(i=r.formId,Object(b.headOption)(e.forms.list.filter(function(e){return e.id.value===i.value})).flatMap(function(t){return Object(b.headOption)(e.eventLines.list.filter(function(e){return t.entity.eventLineId.value===e.id.value}))})).map(function(t){return n(r.formId).map(function(n){return e.dispatch(Object(y.J)(t.id,n.getFormTypeId(),r.formId))})})}).getOrElse(function(){return e.dispatch(Object(j.h)(e.i18n.t("Отсутствуют доступные формы")))})};e.forms.fetching||e.eventLines.fetching||this.state.isSingleFormPageOpened||e.user.userRole.map(function(n){n.entity.showSidebar(e.forms.list)||(i(n),t.setState(w(t.state,{isSingleFormPageOpened:{$set:!0}})))})}},{key:"renderNavigation",value:function(){return p.createElement(O.a,null)}},{key:"render",value:function(){return this.renderScreenBody({className:"dashboardPage"},p.createElement("div",null))}}]),t}(g.a);x=P([v.autobind,R("design:paramtypes",[Object])],x),t.default=Object(h.connect)(function(e){return{forms:e.forms,eventLines:e.eventLines,user:e.user,i18n:e.i18n}})(Object(k.a)(x))}}]);