(window.webpackJsonpwww=window.webpackJsonpwww||[]).push([[16],{1459:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return c});var o=n(79),r=n(104),i=n(82),a=function(){return function(e,t){return e(i.default.isA5000?Object(o.Mb)():Object(o.h)())}},c=function(e,t){return function(n,i){return i().eventLine.data.foreach(function(a){Object(r.e)(i().forms,e).foreach(function(r){n(Object(o.H)(a.id,r.entity.formType.getFormTypeId(),e,t))})})}}},1461:function(e,t,n){"use strict";var o=n(6),r=n.n(o),i=n(10),a=n.n(i),c=n(7),u=n.n(c),s=n(8),l=n.n(s),p=n(2),f=n(14),d=n(1469),h=n(1459),m=n(320),g=n(69),b=n(0),v=n(624);t.a=function(e){return Object(f.connect)(function(e){return{auth:e.auth,websocket:e.websocket,routing:e.routing}})(function(e){return function(t){function n(){return r()(this,n),u()(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return l()(n,t),a()(n,[{key:"componentWillMount",value:function(){var e=this;this.props.auth.signedOut||this.props.websocket.active&&(this.props.auth.checking||this.props.auth.checked&&this.props.auth.signedIn||this.props.auth.signingIn||this.props.auth.signedIn||Object(b.toOption)(this.props.routing.location).map(function(t){Object(b.liftKey)(Object(v.a)(t.search),"token").map(function(t){t.map(function(t){e.props.dispatch(Object(d.d)(t)).catch(function(t){e.signOut()})})}).getOrElse(function(){e.props.auth.token.map(function(t){e.props.dispatch(Object(d.d)(t)).catch(function(t){e.signOut()})}).getOrElse(function(){e.signOut()})})}))}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.auth.signedOut||e.websocket.active&&(e.auth.checking||(e.auth.checked&&e.auth.signedIn||e.auth.signingIn||e.auth.signedIn)&&(!e.websocket.active||this.props.websocket.active)||e.auth.token.map(function(n){e.dispatch(Object(d.d)(n)).catch(function(e){t.signOut()})}).getOrElse(function(){t.signOut()}))}},{key:"signOut",value:function(){this.props.dispatch(Object(g.r)()),this.props.dispatch(Object(m.c)()),this.props.dispatch(Object(h.b)())}},{key:"render",value:function(){return this.props.auth.signedIn&&!this.props.auth.signingIn?p.createElement(e,this.props):p.createElement("div",null)}}]),n}(p.Component)}(e))}},1627:function(e,t,n){e.exports=n(97)(363)},1837:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"c",function(){return u}),n.d(t,"d",function(){return s}),n.d(t,"b",function(){return l});var o=n(1964),r=n.n(o),i=n(485),a=n(82),c="https://www.facebook.com/v2.11/dialog/oauth",u="https://accounts.google.com/o/oauth2/v2/auth",s="https://www.linkedin.com/oauth/v2/authorization",l=function(){return function(e){e(Object(i.e)()),r()({method:"post",url:a.default.server_address+"/api/oauth/params"}).then(function(t){e(Object(i.f)({facebook:{clientId:t.data.facebook.clientId,redirectUrl:t.data.facebook.redirectUrl},google:{clientId:t.data.google.clientId,redirectUrl:t.data.google.redirectUrl},linkedIn:{clientId:t.data.linkedin.clientId,redirectUrl:t.data.linkedin.redirectUrl}}))}).catch(function(t){e(Object(i.d)(t))})}}},1962:function(e,t,n){"use strict";var o=n(2),r=n(94),i=n.n(r);t.a=function(e){return o.createElement(i.a,Object.assign({},e),o.createElement("path",{d:"M17,2V2H17V6H15C14.31,6 14,6.81 14,7.5V10H14L17,10V14H14V22H10V14H7V10H10V6A4,4 0 0,1 14,2H17Z"}))}},1963:function(e,t,n){"use strict";var o=n(2),r=n(94),i=n.n(r);t.a=function(e){return o.createElement(i.a,Object.assign({},e),o.createElement("path",{d:"M21.35,11.1H12.18V13.83H18.69C18.36,17.64 15.19,19.27 12.19,19.27C8.36,19.27 5,16.25 5,12C5,7.9 8.2,4.73 12.2,4.73C15.29,4.73 17.1,6.7 17.1,6.7L19,4.72C19,4.72 16.56,2 12.1,2C6.42,2 2.03,6.8 2.03,12C2.03,17.05 6.16,22 12.25,22C17.6,22 21.5,18.33 21.5,12.91C21.5,11.76 21.35,11.1 21.35,11.1V11.1Z"}))}},2035:function(e,t,n){"use strict";var o=n(6),r=n.n(o),i=n(10),a=n.n(i),c=n(7),u=n.n(c),s=n(8),l=n.n(s),p=n(11),f=n.n(p),d=n(2),h=n(14),m=n(95),g=n(13),b=n(26),v=n.n(b),w=n(156),y=n.n(w),O=n(0),k=n(19),E=n.n(k),j=function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},P=function(e){function t(){return r()(this,t),u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l()(t,e),a()(t,[{key:"render",value:function(){var e=this.props,t=e.fields,n=t.name,o=t.email,r=e.handleSubmit,i=e.onSubmit;return d.createElement("form",{onSubmit:function(e){e.preventDefault(),r(i)},style:{padding:"15px"}},d.createElement(v.a,{autoFocus:!0,style:{display:"block"},value:n.value,onChange:n.onChange,label:this.props.i18n.t("Имя"),error:n.touched&&n.error,helperText:n.touched&&Object(O.toOption)(n.error).map(function(e){return d.createElement(y.a,null,e)}).getOrNull()}),d.createElement(v.a,{style:{display:"block",paddingBottom:"15px"},value:o.value,onChange:o.onChange,label:this.props.i18n.t("Email"),error:o.touched&&o.error,helperText:o.touched&&Object(O.toOption)(o.error).map(function(e){return d.createElement(y.a,null,e)}).getOrNull()}),d.createElement("div",null,d.createElement(E.a,{variant:"raised",color:"primary",type:"submit"},this.props.i18n.t("Сохранить"))))}}]),t}(d.Component);P=j([g.autobind],P),t.a=Object(h.connect)(function(e){return{i18n:e.i18n}},function(e){return{}},function(e,t,n){return Object.assign({},e,n)},{withRef:!0})(Object(m.reduxForm)({form:"accountProfileInfo",fields:["name","email"],validate:function(e,t){var n={};return e.name&&0!==e.name.trim().length||(n.name=t.i18n.t("Обязательное значение")),e.email&&0!==e.email.trim().length||(n.email=t.i18n.t("Обязательное значение")),n}})(P))},2036:function(e,t,n){"use strict";var o=n(6),r=n.n(o),i=n(10),a=n.n(i),c=n(7),u=n.n(c),s=n(8),l=n.n(s),p=n(11),f=n.n(p),d=n(2),h=n(13),m=n(51),g=n(14),b=n(54),v=n.n(b),w=n(203),y=n.n(w),O=n(25),k=n.n(O),E=n(24),j=n.n(E),P=n(189),C=n.n(P),_=n(19),R=n.n(_),S=n(414),I=n.n(S),x=n(1962),A=n(1963),F=n(1),N=(n(2254),n(0)),M=n(216),T=n(415),D=n(71),H=n(136),U=n(1837),V=n(547),W=n(201),L=n(46),G=function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},B=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},q=function(e){function t(e){r()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={profilesSwitchAnchorElement:new N.None},n}return l()(t,e),a()(t,[{key:"getGoogleUrl",value:function(e){var t=this;return this.props.auth.token.flatMap(function(e){return t.props.oauth.data.map(function(e){return e.google}).map(function(t){return U.c+"?client_id="+t.clientId+"&redirect_uri="+t.redirectUrl+"/api/oauth/addprofile/google&response_type=code&state="+e+"&prompt=consent&scope=profile email"})})}},{key:"getFacebookUrl",value:function(e){var t=this;return this.props.auth.token.flatMap(function(e){return t.props.oauth.data.map(function(e){return e.facebook}).map(function(t){return U.a+"?client_id="+t.clientId+"&redirect_uri="+t.redirectUrl+"/api/oauth/addprofile/facebook&scope=public_profile,email&state="+e+"&response_type=code"})})}},{key:"openOauthWindow",value:function(e){var t=this,n=Math.min(window.innerHeight-100,500),o=Math.min(window.innerWidth-100,800),r=(window.innerWidth-o)/2,i=(window.innerHeight-n)/2;Object(N.toOption)(window.open(e,"_blank","toolbar=yes,scrollbars=yes,resizable=yes,top="+i+",left="+r+",width="+o+",height="+n)).foreach(function(e){t.addOauthWindowMessageListener(e)})}},{key:"addOauthWindowMessageListener",value:function(e){var t=this;window.addEventListener("message",function n(o){o.data.data.error?(e.close(),t.props.dispatch(Object(D.h)(t.props.i18n.t("Ошибка при добавлении профиля соцсети!")))):(e.close(),t.props.dispatch(Object(V.a)())),window.removeEventListener("message",n)})}},{key:"onDeleteRequested",value:function(e){var t=this;this.props.openDialog(this.props.i18n.t("Удаление профиля соцсети"),d.createElement("div",null,this.props.i18n.t("Вы действительно хотите удалить профиль соцсети, это действие нельзя будет отменить?")),[d.createElement(R.a,{variant:"raised",style:{marginRight:"10px"},onClick:function(){return t.props.handleDialogClose(!1)}},this.props.i18n.t("Нет")),d.createElement(R.a,{variant:"raised",color:"primary",onClick:function(){Object(V.d)(e).then(function(){t.props.dispatch(Object(V.a)()),t.props.handleDialogClose(!1)}).catch(function(e){t.props.dispatch(Object(W.a)(e))})}},this.props.i18n.t("Да"))])}},{key:"onFacebookProfileAdd",value:function(){var e=this;this.props.account.id.foreach(function(t){e.getFacebookUrl(t).foreach(function(t){e.openOauthWindow(t)})})}},{key:"onGoogleProfileAdd",value:function(){var e=this;this.props.account.id.foreach(function(t){e.getGoogleUrl(t).foreach(function(t){e.openOauthWindow(t)})})}},{key:"getSocialTypeName",value:function(e){switch(e.tpe.value){case F.SocialTypeFacebook.$Type.value:return this.props.i18n.t("Facebook");case F.SocialTypeGoogle.$Type.value:return this.props.i18n.t("Google");default:return this.props.i18n.t("Неизвестная соцсеть")}}},{key:"onProfilesMenuClose",value:function(){this.setState({profilesSwitchAnchorElement:new N.None})}},{key:"onProfilesMenuOpen",value:function(e){this.setState({profilesSwitchAnchorElement:new N.Some(Object(m.findDOMNode)(e.currentTarget))})}},{key:"render",value:function(){var e=this;return d.createElement("div",{className:"SocialProfileList"},d.createElement(M.b,null,d.createElement(R.a,{variant:"raised","aria-owns":this.state.profilesSwitchAnchorElement.map(function(e){return"simple-menu"}).getOrElse(function(){return""}),"aria-haspopup":"true",onClick:this.onProfilesMenuOpen,color:"primary"},this.props.i18n.t("Добавить"))),d.createElement(y.a,{id:"simple-menu",anchorEl:this.state.profilesSwitchAnchorElement.getOrUndefined(),open:this.state.profilesSwitchAnchorElement.nonEmpty(),onClose:this.onProfilesMenuClose},d.createElement(j.a,{onClick:function(){e.onFacebookProfileAdd(),e.onProfilesMenuClose()}},d.createElement(C.a,null,d.createElement(x.a,null)),d.createElement(v.a,{primary:this.props.i18n.t("Facebook")})),d.createElement(j.a,{onClick:function(){e.onGoogleProfileAdd(),e.onProfilesMenuClose()}},d.createElement(C.a,null,d.createElement(A.a,null)),d.createElement(v.a,{primary:this.props.i18n.t("Google")}))),d.createElement(T.a,{showId:!1,error:new N.None,fetching:!1,onRecordSelected:function(){},empty:this.props.account.profile.map(function(e){return 0===e.profiles.length}).getOrElse(function(){return!1}),withActions:!0,headers:[{id:"socialProfileEmail",title:this.props.i18n.t("Email")},{id:"socialProfileType",title:this.props.i18n.t("Соцсеть")}],rows:this.props.account.profile.map(function(e){return e.profiles}).getOrElse(function(){return[]}).map(function(t,n){return{id:t.socialId,payload:t,fields:[t.email,e.getSocialTypeName(t.socialType)],buttons:[d.createElement(k.a,{key:"delete",style:L.f,onClick:function(n){n.stopPropagation(),e.onDeleteRequested(t.socialId)}},d.createElement(I.a,{style:L.g}))]}})}))}}]),t}(d.Component);q=G([h.autobind,B("design:paramtypes",[Object])],q),t.a=Object(g.connect)(function(e){return{i18n:e.i18n,account:e.account,oauth:e.oauth,auth:e.auth}})(Object(H.a)(function(e){e.oauth.data.isEmpty()&&e.dispatch(Object(U.b)())},function(){},function(e,t){!e.oauth.fetching&&e.oauth.error.isEmpty()&&e.oauth.data.isEmpty()&&e.dispatch(Object(U.b)())})(q))},2042:function(e,t,n){"use strict";var o=n(6),r=n.n(o),i=n(10),a=n.n(i),c=n(7),u=n.n(c),s=n(8),l=n.n(s),p=n(11),f=n.n(p),d=n(2),h=n(14),m=n(95),g=n(13),b=n(26),v=n.n(b),w=n(156),y=n.n(w),O=n(0),k=n(19),E=n.n(k),j=function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},P=function(e){function t(){return r()(this,t),u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l()(t,e),a()(t,[{key:"render",value:function(){var e=this.props,t=e.fields,n=t.newPassword,o=t.repeatNewPassword,r=e.handleSubmit,i=e.onSubmit;return d.createElement("form",{onSubmit:function(e){e.preventDefault(),r(i)},style:{padding:"15px"}},d.createElement(v.a,{autoFocus:!0,type:"password",style:{display:"block"},value:n.value,onChange:n.onChange,label:this.props.i18n.t("Новый пароль"),error:n.touched&&n.error,helperText:n.touched&&Object(O.toOption)(n.error).map(function(e){return d.createElement(y.a,null,e)}).getOrNull()}),d.createElement(v.a,{type:"password",style:{display:"block",paddingBottom:"15px"},value:o.value,onChange:o.onChange,label:this.props.i18n.t("Повторите пароль"),error:o.touched&&o.error,helperText:o.touched&&Object(O.toOption)(o.error).map(function(e){return d.createElement(y.a,null,e)}).getOrNull()}),d.createElement("div",null,d.createElement(E.a,{variant:"raised",color:"primary",type:"submit"},this.props.i18n.t("Сохранить"))))}}]),t}(d.Component);P=j([g.autobind],P),t.a=Object(h.connect)(function(e){return{i18n:e.i18n}},function(e){return{}},function(e,t,n){return Object.assign({},e,n)},{withRef:!0})(Object(m.reduxForm)({form:"accountProfilePassword",fields:["newPassword","repeatNewPassword"],validate:function(e,t){var n={};return e.newPassword&&0!==e.newPassword.trim().length||(n.newPassword=t.i18n.t("Обязательное значение")),e.repeatNewPassword&&0!==e.repeatNewPassword.trim().length||(n.repeatNewPassword=t.i18n.t("Обязательное значение")),e.newPassword!==e.repeatNewPassword&&(n.newPassword=t.i18n.t("Пароли не совпадают"),n.repeatNewPassword=t.i18n.t("Пароли не совпадают")),n}})(P))},2043:function(e,t,n){"use strict";var o=n(6),r=n.n(o),i=n(10),a=n.n(i),c=n(7),u=n.n(c),s=n(8),l=n.n(s),p=n(11),f=n.n(p),d=n(2),h=n(14),m=n(95),g=n(13),b=n(33),v=n.n(b),w=n(75),y=n.n(w),O=n(19),k=n.n(O),E=function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},j=function(e){function t(){return r()(this,t),u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l()(t,e),a()(t,[{key:"render",value:function(){var e=this.props,t=e.fields,n=t.twoFactorAuthentication,o=(t.twoFactorAuthenticationBySms,t.twoFactorAuthenticationByEmail,e.handleSubmit),r=e.onSubmit;return d.createElement("form",{onSubmit:function(e){e.preventDefault(),o(r)},style:{padding:"15px"}},d.createElement(v.a,{label:this.props.i18n.t("Двухфакторная аутентификация"),control:d.createElement(y.a,{checked:n.value,onChange:n.onChange})}),d.createElement("div",null,d.createElement(k.a,{variant:"raised",color:"primary",type:"submit"},this.props.i18n.t("Сохранить"))))}}]),t}(d.Component);j=E([g.autobind],j),t.a=Object(h.connect)(function(e){return{i18n:e.i18n}},function(e){return{}},function(e,t,n){return Object.assign({},e,n)},{withRef:!0})(Object(m.reduxForm)({form:"accountProfileSecurity",fields:["twoFactorAuthentication","twoFactorAuthenticationBySms","twoFactorAuthenticationByEmail"],validate:function(e,t){return{}}})(j))},2044:function(e,t,n){var o=n(2274);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(121)(o,r);o.locals&&(e.exports=o.locals)},2254:function(e,t,n){var o=n(2255);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(121)(o,r);o.locals&&(e.exports=o.locals)},2255:function(e,t,n){(e.exports=n(120)(!1)).push([e.i,"",""])},2274:function(e,t,n){(e.exports=n(120)(!1)).push([e.i,".AccountProfilePage-nav {\n  margin-bottom: 20px;\n  background-color: #fff !important;\n  height: 48px !important;\n  flex-shrink: 0; }\n",""])}}]);