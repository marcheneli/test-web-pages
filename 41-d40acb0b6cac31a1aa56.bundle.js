(window.webpackJsonpwww=window.webpackJsonpwww||[]).push([[41],{1459:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return l});var r=n(79),i=n(104),o=n(82),a=function(){return function(e,t){return e(o.default.isA5000?Object(r.Mb)():Object(r.h)())}},l=function(e,t){return function(n,o){return o().eventLine.data.foreach(function(a){Object(i.e)(o().forms,e).foreach(function(i){n(Object(r.H)(a.id,i.entity.formType.getFormTypeId(),e,t))})})}}},1461:function(e,t,n){"use strict";var r=n(6),i=n.n(r),o=n(10),a=n.n(o),l=n(7),s=n.n(l),c=n(8),u=n.n(c),p=n(2),d=n(14),f=n(1469),h=n(1459),m=n(320),v=n(69),g=n(0),y=n(624);t.a=function(e){return Object(d.connect)(function(e){return{auth:e.auth,websocket:e.websocket,routing:e.routing}})(function(e){return function(t){function n(){return i()(this,n),s()(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return u()(n,t),a()(n,[{key:"componentWillMount",value:function(){var e=this;this.props.auth.signedOut||this.props.websocket.active&&(this.props.auth.checking||this.props.auth.checked&&this.props.auth.signedIn||this.props.auth.signingIn||this.props.auth.signedIn||Object(g.toOption)(this.props.routing.location).map(function(t){Object(g.liftKey)(Object(y.a)(t.search),"token").map(function(t){t.map(function(t){e.props.dispatch(Object(f.d)(t)).catch(function(t){e.signOut()})})}).getOrElse(function(){e.props.auth.token.map(function(t){e.props.dispatch(Object(f.d)(t)).catch(function(t){e.signOut()})}).getOrElse(function(){e.signOut()})})}))}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.auth.signedOut||e.websocket.active&&(e.auth.checking||(e.auth.checked&&e.auth.signedIn||e.auth.signingIn||e.auth.signedIn)&&(!e.websocket.active||this.props.websocket.active)||e.auth.token.map(function(n){e.dispatch(Object(f.d)(n)).catch(function(e){t.signOut()})}).getOrElse(function(){t.signOut()}))}},{key:"signOut",value:function(){this.props.dispatch(Object(v.r)()),this.props.dispatch(Object(m.c)()),this.props.dispatch(Object(h.b)())}},{key:"render",value:function(){return this.props.auth.signedIn&&!this.props.auth.signingIn?p.createElement(e,this.props):p.createElement("div",null)}}]),n}(p.Component)}(e))}},1462:function(e,t,n){"use strict";var r=n(855);Object.defineProperty(t,"__esModule",{value:!0});var i={};Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o.default}});var o=r(n(1464));Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))})},1463:function(e,t,n){"use strict";var r=n(855),i=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(36)),a=i(n(2)),l=(i(n(31)),r(n(1462))),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var n=e.breakpoint,r=void 0===n?"sm":n;return(0,l.default)()(function(e){return a.default.createElement(t,(0,o.default)({fullScreen:(0,l.isWidthDown)(r,e.width)},e))})}};t.default=s},1464:function(e,t,n){"use strict";var r=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.isWidthDown=t.isWidthUp=void 0;var i=r(n(36)),o=r(n(39)),a=r(n(73)),l=r(n(74)),s=r(n(76)),c=r(n(77)),u=r(n(78)),p=r(n(2)),d=(r(n(31)),r(n(217))),f=r(n(373)),h=(n(61),r(n(539))),m=r(n(263)),v=n(859),g=r(n(860));t.isWidthUp=function(e,t){return arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?v.keys.indexOf(e)<v.keys.indexOf(t):v.keys.indexOf(e)<=v.keys.indexOf(t)};t.isWidthDown=function(e,t){return arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?v.keys.indexOf(t)<v.keys.indexOf(e):v.keys.indexOf(t)<=v.keys.indexOf(e)};var y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var n=e.withTheme,r=void 0!==n&&n,y=e.noSSR,b=void 0!==y&&y,O=e.initialWidth,k=e.resizeInterval,E=void 0===k?166:k,C=function(e){function n(e){var t;return(0,a.default)(this,n),(t=(0,s.default)(this,(0,c.default)(n).call(this,e))).state={width:b?t.getWidth():void 0},"undefined"!=typeof window&&(t.handleResize=(0,f.default)(function(){var e=t.getWidth();e!==t.state.width&&t.setState({width:e})},E)),t}return(0,u.default)(n,e),(0,l.default)(n,[{key:"componentDidMount",value:function(){var e=this.getWidth();e!==this.state.width&&this.setState({width:e})}},{key:"componentWillUnmount",value:function(){this.handleResize.clear()}},{key:"getWidth",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.innerWidth,t=this.props.theme.breakpoints,n=null,r=1;null===n&&r<v.keys.length;){var i=v.keys[r];if(e<t.values[i]){n=v.keys[r-1];break}r+=1}return n=n||"xl"}},{key:"render",value:function(){var e=(0,g.default)({theme:this.props.theme,name:"MuiWithWidth",props:(0,i.default)({},this.props)}),n=e.initialWidth,a=e.theme,l=e.width,s=(0,o.default)(e,["initialWidth","theme","width"]),c=(0,i.default)({width:l||this.state.width||n||O},s);return void 0===c.width?null:(r&&(c.theme=a),p.default.createElement(p.default.Fragment,null,p.default.createElement(t,c),p.default.createElement(d.default,{target:"window",onResize:this.handleResize})))}}]),n}(p.default.Component);return(0,h.default)(C,t),(0,m.default)()(C)}};t.default=y},1465:function(e,t,n){"use strict";var r=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.isHorizontal=k,t.getAnchor=E,t.default=t.styles=void 0;var i=r(n(36)),o=r(n(55)),a=r(n(39)),l=r(n(73)),s=r(n(74)),c=r(n(76)),u=r(n(77)),p=r(n(78)),d=r(n(2)),f=(r(n(31)),r(n(47))),h=r(n(625)),m=r(n(38)),v=r(n(858)),g=r(n(93)),y=n(110),b=n(321),O={left:"right",right:"left",top:"down",bottom:"up"};function k(e){return-1!==["left","right"].indexOf(e.anchor)}function E(e){return"rtl"===e.theme.direction&&k(e)?O[e.anchor]:e.anchor}var C=function(e){return{root:{},docked:{flex:"0 0 auto"},paper:{overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:e.zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:"none"},paperAnchorLeft:{left:0,right:"auto"},paperAnchorRight:{left:"auto",right:0},paperAnchorTop:{top:0,left:0,bottom:"auto",right:0,height:"auto",maxHeight:"100%"},paperAnchorBottom:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},paperAnchorDockedLeft:{borderRight:"1px solid ".concat(e.palette.divider)},paperAnchorDockedTop:{borderBottom:"1px solid ".concat(e.palette.divider)},paperAnchorDockedRight:{borderLeft:"1px solid ".concat(e.palette.divider)},paperAnchorDockedBottom:{borderTop:"1px solid ".concat(e.palette.divider)},modal:{}}};t.styles=C;var P=function(e){function t(){var e,n;(0,l.default)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=(0,c.default)(this,(e=(0,u.default)(t)).call.apply(e,[this].concat(i)))).mounted=!1,n}return(0,p.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"render",value:function(){var e=this.props,t=(e.anchor,e.BackdropProps),n=e.children,r=e.classes,l=e.className,s=e.elevation,c=e.ModalProps,u=(c=void 0===c?{}:c).BackdropProps,p=(0,a.default)(c,["BackdropProps"]),m=e.onClose,b=e.open,k=e.PaperProps,C=e.SlideProps,P=(e.theme,e.transitionDuration),w=e.variant,j=(0,a.default)(e,["anchor","BackdropProps","children","classes","className","elevation","ModalProps","onClose","open","PaperProps","SlideProps","theme","transitionDuration","variant"]),T=E(this.props),I=d.default.createElement(g.default,(0,i.default)({elevation:"temporary"===w?s:0,square:!0,className:(0,f.default)(r.paper,r["paperAnchor".concat((0,y.capitalize)(T))],(0,o.default)({},r["paperAnchorDocked".concat((0,y.capitalize)(T))],"temporary"!==w))},k),n);if("permanent"===w)return d.default.createElement("div",(0,i.default)({className:(0,f.default)(r.root,r.docked,l)},j),I);var S=d.default.createElement(v.default,(0,i.default)({in:b,direction:O[T],timeout:P,appear:this.mounted},C),I);return"persistent"===w?d.default.createElement("div",(0,i.default)({className:(0,f.default)(r.root,r.docked,l)},j),S):d.default.createElement(h.default,(0,i.default)({BackdropProps:(0,i.default)({},t,u,{transitionDuration:P}),className:(0,f.default)(r.root,r.modal,l),open:b,onClose:m},j,p),S)}}]),t}(d.default.Component);P.defaultProps={anchor:"left",elevation:16,open:!1,transitionDuration:{enter:b.duration.enteringScreen,exit:b.duration.leavingScreen},variant:"temporary"};var w=(0,m.default)(C,{name:"MuiDrawer",flip:!1,withTheme:!0})(P);t.default=w},1473:function(e,t,n){"use strict";var r=n(12);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(1463))},1474:function(e,t,n){"use strict";var r=n(12);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(1465))},1476:function(e,t,n){"use strict";var r=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(2)),o=(0,r(n(44)).default)(i.default.createElement(i.default.Fragment,null,i.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),i.default.createElement("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})),"ArrowBack");t.default=o},1478:function(e,t,n){"use strict";var r=n(6),i=n.n(r),o=n(10),a=n.n(o),l=n(7),s=n.n(l),c=n(8),u=n.n(c),p=n(2),d=n(218),f=n.n(d),h=n(25),m=n.n(h),v=n(1476),g=n.n(v),y=(n(1481),n(52)),b=n.n(y),O=function(e){function t(){return i()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),a()(t,[{key:"render",value:function(){return p.createElement(f.a,{className:"PageHeader__main"},this.props.onGoBackRequested?p.createElement(m.a,{onClick:this.props.onGoBackRequested,style:{flexShrink:0}},p.createElement(g.a,null)):p.createElement("div",{style:{display:"inline-block"}}),p.createElement(b.a,{variant:"title",align:"center",style:{flex:1}},this.props.title),p.createElement("div",{style:{flexShrink:0}},this.props.rightButtonGroup))}}]),t}(p.Component);t.a=O},1481:function(e,t,n){var r=n(1482);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(121)(r,i);r.locals&&(e.exports=r.locals)},1482:function(e,t,n){(e.exports=n(120)(!1)).push([e.i,".PageHeader__main {\n  display: flex;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  margin-bottom: 10px;\n  background-color: #fff !important;\n  height: 48px !important;\n  width: 100% !important;\n  flex-shrink: 0;\n  padding: 0; }\n",""])},1487:function(e,t,n){"use strict";var r=n(6),i=n.n(r),o=n(10),a=n.n(o),l=n(7),s=n.n(l),c=n(8),u=n.n(c),p=n(4),d=n.n(p),f=n(2),h=n(24),m=n.n(h),v=n(38),g=n.n(v),y=n(1),b=n(46),O=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n};function k(e){var t=e.selected?d()({},function(e){if(!e.tabsPosition)return"borderRight";switch(e.tabsPosition.tpe.value){case y.TabsPositionLeft.$Type.value:return"borderRight";case y.TabsPositionRight.$Type.value:return"borderLeft";default:return"borderRight"}}(e),"2px solid"):{};return{root:Object.assign({},t)}}var E=function(e){function t(){i()(this,t);var e=s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.handleClick=function(t){t.preventDefault(),t.stopPropagation(),e.props.onClick&&e.props.onClick(e.props.value,t,e)},e.getColorByMuiTheme=function(e){var t=e.flatMap(function(e){return e.color}).getOrElse(function(){return"primary"}),n=e.flatMap(function(e){return e.palette}),r=e.flatMap(function(e){return e.selectable});switch(t){case"secondary":return[{color:n.map(function(e){return e.secondaryColor}).getOrElse(function(){return b.c})},{color:b.b}];case"custom":return[{color:r.map(function(e){return e.afterSelect}).getOrElse(function(){return b.a})},{color:r.map(function(e){return e.beforeSelect}).getOrElse(function(){return b.c})}];case"primary":default:return[{color:n.map(function(e){return e.primaryColor}).getOrElse(function(){return b.a})},{color:b.b}]}},e}return u()(t,e),a()(t,[{key:"render",value:function(){var e=this.props,t=e.icon,n=(e.index,e.onActive,e.onClick,e.selected),r=e.label,i=e.buttonStyle,o=e.style,a=(e.value,e.width,e.classes),l=(e.tabsPosition,e.elementMuiTheme),s=O(e,["icon","index","onActive","onClick","selected","label","buttonStyle","style","value","width","classes","tabsPosition","elementMuiTheme"]),c=k(this.props),u=void 0;if(t&&f.isValidElement(t)&&(u=f.cloneElement(t,{style:{fontSize:24,color:t.props&&t.props.style&&t.props.style.color?t.props.style.color:"#fff",marginBottom:r?5:0}})),l){var p=this.getColorByMuiTheme(l),d=n?p[0]:p[1];return f.createElement(m.a,Object.assign({},s,{style:Object.assign(c.root,o,d),onClick:this.handleClick}),f.createElement("div",{style:Object.assign({},i,d)},u,r))}return f.createElement(m.a,Object.assign({},s,{style:Object.assign(c.root,o),onClick:this.handleClick}),f.createElement("div",{style:i,className:n?a.root:a.default},u,r))}}]),t}(f.Component);E.muiName="Tab",E.propTypes={},E.contextTypes={},t.a=g()(function(e){return{default:{color:e.palette.text.secondary},root:{color:e.palette.primary.main}}})(E)},1488:function(e,t,n){"use strict";var r=n(6),i=n.n(r),o=n(10),a=n.n(o),l=n(7),s=n.n(l),c=n(8),u=n.n(c),p=n(4),d=n.n(p),f=n(2),h=n(62),m=n.n(h),v=n(1),g=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n};function y(e){if(!e.tabsPosition)return"borderRight";switch(e.tabsPosition.tpe.value){case v.TabsPositionLeft.$Type.value:return"borderRight";case v.TabsPositionRight.$Type.value:return"borderLeft";default:return"borderRight"}}var b=function(e){function t(){i()(this,t);var e=s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.state={selectedIndex:0},e.handleTabClick=function(t,n,r){n.preventDefault();var i=e.getValueLink(e.props),o=r.props.index;(i.value&&i.value!==t||e.state.selectedIndex!==o)&&i.requestChange(t,n,r),e.setState({selectedIndex:o}),r.props.onActive&&r.props.onActive(r)},e}return u()(t,e),a()(t,[{key:"componentWillMount",value:function(){var e=this.getValueLink(this.props),t=this.props.initialSelectedIndex||0;this.setState({selectedIndex:void 0!==e.value?this.getSelectedIndex(this.props):t<this.getTabCount()?t:0})}},{key:"componentWillReceiveProps",value:function(e,t){}},{key:"getTabs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=[];return f.Children.forEach(e.children,function(e){f.isValidElement(e)&&t.push(e)}),t}},{key:"getTabCount",value:function(){return this.getTabs().length}},{key:"getValueLink",value:function(e){return e.valueLink||{value:e.value,requestChange:e.onChange}}},{key:"getSelectedIndex",value:function(e){var t=this.getValueLink(e),n=-1;return this.getTabs(e).forEach(function(e,r){t.value===e.props.value&&(n=r)}),n}},{key:"getSelected",value:function(e,t){var n=this.getValueLink(this.props);return n.value?n.value===e.props.value:this.state.selectedIndex===t}},{key:"getTabContent",value:function(e,t,n,r){return t.push(e.props.children?f.createElement(n||O,{key:r,selected:this.getSelected(e,r)},e.props.children):void 0)}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.contentContainerClassName,i=n.contentContainerStyle,o=(n.initialSelectedIndex,n.onChange,n.style),a=n.tabItemContainerStyle,l=n.tabTemplate,s=n.prerenderTabContainers,c=n.menuTopChildren,u=n.menuBottomChildren,p=(n.tabsPosition,g(n,["contentContainerClassName","contentContainerStyle","initialSelectedIndex","onChange","style","tabItemContainerStyle","tabTemplate","prerenderTabContainers","menuTopChildren","menuBottomChildren","tabsPosition"])),h=(e=this.props,{wrapper:{display:"flex",height:"100%",width:"100%"},tabItemContainer:d()({display:"flex",flexDirection:"column",flex:"0 0 150px",margin:"4px 4px 4px 0"},y(e),"1px solid ".concat(m.a[300])),tabMenuItemContainer:{display:"flex",flexDirection:"column",flex:"0 0 150px",margin:"4px 4px 4px 0"},tabContentContainer:{flex:1,margin:"4px 0 4px 4px"}}),v=(this.getValueLink(this.props).value,[]),b=100/this.getTabCount(),O=this.getTabs().map(function(e,n){return s?t.getTabContent(e,v,l,n):t.getSelected(e,n)&&t.getTabContent(e,v,l,n),f.cloneElement(e,{key:n,index:n,selected:t.getSelected(e,n),width:b+"%",onClick:t.handleTabClick})});return f.createElement("div",Object.assign({style:Object.assign(h.wrapper,o)},p),!this.props.tabItemContainerOnRight&&f.createElement("div",{style:Object.assign(h.tabItemContainer,a)},f.createElement("div",null,c),O,f.createElement("div",null,u)),f.createElement("div",{style:Object.assign(h.tabContentContainer,i),className:r},v),this.props.tabItemContainerOnRight&&f.createElement("div",{style:Object.assign(h.tabItemContainer,a)},f.createElement("div",null,c),O,f.createElement("div",null,u)))}}]),t}(f.Component);b.defaultProps={initialSelectedIndex:0,onChange:function(){}},b.contextTypes={};var O=function(e){function t(){return i()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),a()(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.selected,r=e.style,i=Object.assign({},r,{display:"flex",height:"100%"});return n||(i.height=0,i.overflow="hidden"),f.createElement("div",{style:i},t)}}]),t}(f.PureComponent);t.a=b},1775:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return l});var r=n(483),i=n(553),o=n(672),a=function(e){return function(t){return t(Object(r.e)()),i.e(e).then(function(e){return t(Object(r.f)(e.record)),e.record}).catch(function(e){throw t(Object(r.d)(e)),e})}},l=function(e){return function(t,n){return n().role.data.matchWith(function(e){return new Promise(function(t,n){return t(e)})},function(){return Object(o.b)(n().roles,e).matchWith(function(e){return t(Object(r.f)(e)),new Promise(function(t,n){return t(e)})},function(){return t(a(e))})})}}},1887:function(e,t,n){"use strict";var r=n(17),i=n(21),o=n(6),a=n.n(o),l=n(7),s=n.n(l),c=n(8),u=n.n(c),p=n(18),d=function(e){function t(e){return a()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Metrics.Dashboard","Create",{entity:e}))}return u()(t,e),t}(p.a),f=function(e){function t(e){return a()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Metrics.Dashboard","Update",{entity:e}))}return u()(t,e),t}(p.a),h=function(e){function t(e){return a()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Metrics.Dashboard","Delete",{id:e}))}return u()(t,e),t}(p.a),m=function(e){function t(e){return a()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Metrics.Dashboard","Resolve",{id:e}))}return u()(t,e),t}(p.a),v=function(e){function t(e){return a()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Metrics.Dashboard","ListEventLine",{eventLineId:e}))}return u()(t,e),t}(p.a);n.d(t,"e",function(){return g}),n.d(t,"a",function(){return y}),n.d(t,"b",function(){return b}),n.d(t,"d",function(){return O}),n.d(t,"c",function(){return k});var g=function(e){return r.a.send(new f(e),Object(i.f)())},y=function(e){return r.a.send(new d(e),Object(i.c)())},b=function(e){return r.a.send(new h(e),Object(i.f)())},O=function(e){return r.a.send(new m(e),Object(i.e)())},k=function(e){return r.a.send(new v(e),Object(i.g)())}},1907:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return l});var r=n(1887),i=n(499),o=n(498),a=function(e){return function(t,n){return t(Object(i.e)()),r.c(e).then(function(e){return t(Object(i.f)(e.list))}).catch(function(e){return t(Object(i.d)(e))})}},l=function(e){return function(t,n){return t(Object(o.e)()),r.d(e).then(function(e){return t(Object(o.f)(e.record))}).catch(function(e){return t(Object(o.d)(e))})}}},2354:function(e,t,n){var r=n(2355);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(121)(r,i);r.locals&&(e.exports=r.locals)},2355:function(e,t,n){(e.exports=n(120)(!1)).push([e.i,".RoleEditForm {\n  display: flex;\n  height: 100%;\n  color: black; }\n\n.RoleEditForm__menu {\n  width: 256px;\n  margin: 4px 4px 4px 0;\n  height: fit-content; }\n\n.RoleEditForm__content {\n  flex: 1;\n  margin: 4px 0 4px 4px; }\n",""])},2731:function(e,t,n){"use strict";n.r(t);var r=n(6),i=n.n(r),o=n(10),a=n.n(o),l=n(7),s=n.n(l),c=n(8),u=n.n(c),p=n(11),d=n.n(p),f=n(2),h=n(14),m=n(13),v=n(1),g=n(1775),y=n(1467),b=n(627),O=n(1478),k=n(541),E=n(425),C=n(220),P=n.n(C),w=n(25),j=n.n(w),T=n(98),I=n.n(T),S=n(107),x=n.n(S),F=n(93),M=n.n(F),R=n(857),L=n.n(R),A=n(856),_=n.n(A),D=n(54),W=n.n(D),$=n(863),H=n.n($),B=n(219),N=n.n(B),V=n(868),q=n.n(V),z=n(75),G=n.n(z),U=n(30),J=n.n(U),K=n(24),X=n.n(K),Y=n(34),Q=n.n(Y),Z=n(32),ee=n.n(Z),te=n(33),ne=n.n(te),re=n(26),ie=n.n(re),oe=n(19),ae=n.n(oe),le=n(115),se=n.n(le),ce=n(543),ue=n.n(ce),pe=n(104),de=n(103),fe=n(0),he=n(3),me=n(200),ve=n(45),ge=n.n(ve),ye=n(71),be=n(553),Oe=n(84),ke=n(1907),Ee=n(136),Ce=n(82),Pe=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":d()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},we=function(e){function t(){return i()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),a()(t,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(me.s)(this.getOperation()))}},{key:"getOperation",value:function(){var e=this;return Object(fe.headOption)(this.getRole().map(function(t){return t.entity.permissions.filter(function(t){return t.operation instanceof v.PermissionOperationEventLineProperties&&t.operation.eventLineId.value===e.props.eventLineId.value})}).getOrElse(function(){return[]})).map(function(e){return e.operation})}},{key:"getRole",value:function(){return this.props.role.data}},{key:"handleAdminToggle",value:function(){var e=this;this.props.roleForm.currentEventOperation.foreach(function(t){e.props.dispatch(Object(me.o)(he(t.adminPerms,{accessDenied:{$set:!t.adminPerms.accessDenied}})))})}},{key:"onMetricsDashboardChanged",value:function(e){this.props.dispatch(Object(me.p)(Object(fe.toOption)(e.target.value).filter(function(e){return""!==e}).map(function(e){return new v.Id(e)})))}},{key:"roleFormSettingPropsChanged",value:function(e,t){var n=this;this.props.roleForm.currentEventOperation.foreach(function(r){n.props.dispatch(Object(me.o)(he(r.adminPerms,{perms:{$set:t?r.adminPerms.perms.concat(e):r.adminPerms.perms.filter(function(t){return t.tpe.value!==e.tpe.value})}})))})}},{key:"handleSettingsFormsChanged",value:function(e,t){this.roleFormSettingPropsChanged(new v.AdminEventLineServiceForms,t)}},{key:"handleSettingsMetricsChanged",value:function(e,t){this.roleFormSettingPropsChanged(new v.AdminEventLineServiceMetrics,t)}},{key:"handleSettingsApplicationsChanged",value:function(e,t){this.roleFormSettingPropsChanged(new v.AdminEventLineServiceApplications,t)}},{key:"handleSettingsAcChanged",value:function(e,t){this.roleFormSettingPropsChanged(new v.AdminEventLineServiceInteractions,t)}},{key:"handleSettingsGeneratorsChanged",value:function(e,t){this.roleFormSettingPropsChanged(new v.AdminEventLineServiceGenerators,t)}},{key:"handleSettingsJourneysChanged",value:function(e,t){this.roleFormSettingPropsChanged(new v.AdminEventLineServiceJourneys,t)}},{key:"onSaveRequested",value:function(){var e=this;this.props.roleForm.currentEventOperation.foreach(function(t){return e.getRole().foreach(function(n){var r=n.entity.permissions.filter(function(t){return!(t.operation instanceof v.PermissionOperationEventLineProperties&&t.operation.eventLineId.value===e.props.eventLineId.value)}),i=he(r,{$push:[new v.Permission(new v.PermissionPredicateAllow,t)]});Object(be.f)(he(n,{entity:{$set:new v.Role(n.entity.name,n.entity.organisationId,i,n.entity.mainPageConfig,n.entity.uiConfig,n.entity.linkedEvent)}})).then(function(t){e.props.dispatch(Object(ye.h)(e.props.i18n.t("Сохранение успешно завершено"))),e.props.dispatch(Object(g.b)(new v.Id(e.props.params.roleId))),e.props.dispatch(Object(Oe.g)())}).catch(function(t){e.props.dispatch(Object(ye.h)(e.props.i18n.t("Сохранение завершилось ошибкой")))})})})}},{key:"renderAdminSettings",value:function(e){return f.createElement("div",null,f.createElement(ne.a,{label:this.props.i18n.t("Администрирование проекта"),control:f.createElement(G.a,{onChange:this.handleAdminToggle,checked:!e.adminPerms.accessDenied})}),!e.adminPerms.accessDenied&&f.createElement("div",{style:{marginBottom:"20px"}},f.createElement(ne.a,{label:this.props.i18n.t("Формы"),control:f.createElement(ge.a,{checked:e.adminPerms.perms.filter(function(e){return e.tpe.value===v.AdminEventLineServiceForms.$Type.value}).length>0,onChange:this.handleSettingsFormsChanged})}),f.createElement(ne.a,{label:this.props.i18n.t("Цепочки"),control:f.createElement(ge.a,{checked:e.adminPerms.perms.filter(function(e){return e.tpe.value===v.AdminEventLineServiceJourneys.$Type.value}).length>0,onChange:this.handleSettingsJourneysChanged})}),f.createElement(ne.a,{label:this.props.i18n.t("Приложения"),control:f.createElement(ge.a,{checked:e.adminPerms.perms.filter(function(e){return e.tpe.value===v.AdminEventLineServiceApplications.$Type.value}).length>0,onChange:this.handleSettingsApplicationsChanged})}),f.createElement(ne.a,{label:this.props.i18n.t("Генераторы"),control:f.createElement(ge.a,{checked:e.adminPerms.perms.filter(function(e){return e.tpe.value===v.AdminEventLineServiceGenerators.$Type.value}).length>0,onChange:this.handleSettingsGeneratorsChanged})}),f.createElement(ne.a,{label:this.props.i18n.t("Взаимодействия"),control:f.createElement(ge.a,{checked:e.adminPerms.perms.filter(function(e){return e.tpe.value===v.AdminEventLineServiceInteractions.$Type.value}).length>0,onChange:this.handleSettingsAcChanged})}),f.createElement(ne.a,{label:this.props.i18n.t("Метрики"),control:f.createElement(ge.a,{checked:e.adminPerms.perms.filter(function(e){return e.tpe.value===v.AdminEventLineServiceMetrics.$Type.value}).length>0,onChange:this.handleSettingsMetricsChanged})})))}},{key:"render",value:function(){var e=this;return this.props.roleForm.currentEventOperation.map(function(t){return f.createElement("div",null,e.renderAdminSettings(t),!Ce.default.isA5000&&f.createElement(ee.a,{fullWidth:!0},f.createElement(Q.a,null,e.props.i18n.t("Список метрики")),f.createElement(J.a,{fullWidth:!0,native:!0,value:t.metricsDashboard.map(function(e){return e.value}).getOrElse(function(){return""}),onChange:e.onMetricsDashboardChanged},f.createElement("option",{value:""}),e.props.metricsDashboards.list.map(function(e,t){return f.createElement("option",{key:t,value:e.id.value},e.entity.name)}))),f.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:8}},f.createElement(ae.a,{onClick:e.onSaveRequested,color:"primary",variant:"raised"},e.props.i18n.t("Сохранить"))))}).getOrNull()}}]),t}(f.Component);we=Pe([m.autobind],we);var je=Object(h.connect)(function(e){return{i18n:e.i18n,roleForm:e.roleForm,role:e.role,metricsDashboards:e.metricsDashboards}})(Object(Ee.a)(function(e){e.isTokenChecked&&!Ce.default.isA5000&&e.dispatch(Object(ke.b)(e.eventLineId))})(we)),Te=n(649),Ie=n(79),Se=n(201),xe=n(188),Fe=n(1488),Me=n(1487),Re=n(83),Le=n(43),Ae=n.n(Le),_e=n(86),De=n.n(_e),We=n(414),$e=n.n(We),He=n(437),Be=n.n(He),Ne=n(432),Ve=n.n(Ne),qe=n(216),ze=n(415),Ge=n(46),Ue=n(23),Je=n(95),Ke=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":d()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Xe=function(e){function t(){return i()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),a()(t,[{key:"getEventLineMarked",value:function(e){return this.props.role.data.map(function(t){return 0!==t.entity.permissions.filter(function(t){return t.operation instanceof v.PermissionOperationEventLineProperties&&t.operation.eventLineId.value===e.value}).length}).getOrElse(function(){return!1})}},{key:"getFormMarked",value:function(e){return this.props.role.data.map(function(t){return 0!==t.entity.permissions.filter(function(t){return t.operation instanceof v.PermissionOperationFormProperties&&t.operation.formId.value===e.value}).length}).getOrElse(function(){return!1})}},{key:"getTextWidth",value:function(e,t){var n=document.createElement("canvas");return Object(Ue.toOption)(n.getContext("2d")).map(function(n){n.font=t;var r=n.measureText(e);return Math.ceil(r.width)})}},{key:"getFormNameUpperCase",value:function(){var e=this;return Object(Ue.headOption)(this.props.forms.list.filter(function(t){return t.id.value===e.props.fields.formId.value})).map(function(e){return e.entity.name}).getOrElse(function(){return e.props.i18n.t("Значение не найдено")}).toUpperCase()}},{key:"onFormIdChange",value:function(e){var t=this,n=e.target.value;this.props.fields.formId.onChange(n),Object(Ue.headOption)(this.props.forms.list.filter(function(e){return e.id.value===n})).foreach(function(e){return t.props.fields.buttonWidth.onChange(t.getTextWidth(e.entity.name.toUpperCase(),"16px Roboto, sans-serif, serif"))})}},{key:"render",value:function(){var e=this,t=this.props,n=t.fields,r=n.eventLineId,i=n.formId,o=n.buttonWidth,a=t.handleSubmit;return f.createElement("form",{onSubmit:a},f.createElement(ee.a,{fullWidth:!0},f.createElement(Q.a,null,this.props.i18n.t("Проект")),f.createElement(J.a,{value:r.value,onChange:r.onChange,fullWidth:!0},this.props.eventLines.list.filter(function(t){return e.getEventLineMarked(t.id)}).map(function(e){return f.createElement(X.a,{key:e.id.value,value:e.id.value},e.entity.name)}))),f.createElement(ee.a,{fullWidth:!0},f.createElement(Q.a,null,this.props.i18n.t("Форма")),f.createElement(J.a,{value:i.value,onChange:this.onFormIdChange,fullWidth:!0},Object(Ue.headOption)(this.props.eventLines.list.filter(function(e){return e.id.value===r.value})).map(function(t){return Object(pe.f)(e.props.forms,t.id).filter(function(t){return e.getFormMarked(t.id)}).map(function(e){return f.createElement(X.a,{key:e.id.value,value:e.id.value},e.entity.name)})}).getOrElse(function(){return[]}))),f.createElement(ie.a,{fullWidth:!0,label:this.props.i18n.t("Ширина кнопки"),value:o.value,onChange:o.onChange,type:"number",InputProps:{inputProps:{min:0}}}),f.createElement("div",{style:{height:"64px",lineHeight:"64px",overflowX:"hidden",display:"inline-block",textOverflow:"ellipsis",whiteSpace:"nowrap",textAlign:"center",verticalAlign:"bottom",padding:"0 15px 0 15px",marginTop:"15px",width:o.value+"px",backgroundColor:"#4285f4",color:"white"}},this.getFormNameUpperCase()))}}]),t}(f.Component);Xe=Ke([m.autobind],Xe);var Ye=Object(h.connect)(function(e){return{i18n:e.i18n,user:e.user,eventLines:e.eventLines,forms:e.forms,role:e.role}},function(e){return{}},function(e,t,n){return Object.assign({},e,n)},{withRef:!0})(Object(Je.reduxForm)({form:"roleTopMenuConfigForm",fields:["eventLineId","formId","buttonWidth"]})(Xe)),Qe=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":d()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Ze=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":d()(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},et=function(e){function t(e){i()(this,t);var n=s()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showTopMenuArr:e.showTopMenuArr},n}return u()(t,e),a()(t,[{key:"onShowTopMenuValueChanged",value:function(e){var t=this;this.setState(he(this.state,{showTopMenuArr:{$set:e}}),function(){return t.props.onShowTopMenuArrChange(t.state.showTopMenuArr)})}},{key:"onSwapActions",value:function(e,t,n){if(void 0!==e[t]&&void 0!==e[n]){var r=t>n?n:t,i=t>n?t:n,o=[].concat(Ae()(e.slice(0,r)),[e[i]],Ae()(e.slice(r+1,i)),[e[r]],Ae()(e.slice(i+1)));this.onShowTopMenuValueChanged(o)}}},{key:"openRoleTopMenuConfigForm",value:function(e,t,n){var r=this,i=void 0,o=this.props.openDialog(e,f.createElement(Ye,{ref:function(e){return i=Object(Ue.toOption)(e).flatMap(function(e){return Object(Ue.toOption)(e.wrappedInstance)})},initialValues:n,onSubmit:function(e){return t(e,o)}}),[f.createElement(ae.a,{variant:"raised",onClick:function(){return function(e){return r.props.handleDialogClose(e)}(o)},style:{marginRight:"10px"}},this.props.i18n.t("Закрыть")),f.createElement(ae.a,{variant:"raised",onClick:function(){return i.map(function(e){return e.submit()})},color:"primary"},this.props.i18n.t("Сохранить"))])}},{key:"onCreateRequested",value:function(){var e=this;this.openRoleTopMenuConfigForm(this.props.i18n.t("Создать конфигурацию"),function(t,n){return new Promise(function(r,i){var o=e.getMenuConfigs(),a=he(o,{$push:[new v.RoleTopMenuConfig(new v.Id(t.formId),new v.Id(t.eventLineId),t.buttonWidth)]});e.onShowTopMenuValueChanged(a),e.props.handleDialogClose(n)})},{})}},{key:"onEdit",value:function(e,t){var n=this;this.openRoleTopMenuConfigForm(this.props.i18n.t("Редактировать конфигурацию"),function(e,r){return new Promise(function(i,o){var a=n.getMenuConfigs(),l=he(a,{$splice:[[t,1,new v.RoleTopMenuConfig(new v.Id(e.formId),new v.Id(e.eventLineId),e.buttonWidth)]]});n.onShowTopMenuValueChanged(l),n.props.handleDialogClose(r)})},{eventLineId:e.eventLineId.value,formId:e.formId.value,buttonWidth:e.buttonWidth})}},{key:"onDelete",value:function(e){var t=this.getMenuConfigs(),n=he(t,{$splice:[[e,1]]});this.onShowTopMenuValueChanged(n)}},{key:"getMenuConfigs",value:function(){return this.state.showTopMenuArr}},{key:"getEventLineName",value:function(e){var t=this;return Object(Ue.headOption)(this.props.eventLines.list.filter(function(t){return t.id.value===e.value})).map(function(e){return e.entity.name}).getOrElse(function(){return t.props.i18n.t("Значение не найдено")})}},{key:"getFormName",value:function(e){var t=this;return Object(Ue.headOption)(this.props.forms.list.filter(function(t){return t.id.value===e.value})).map(function(e){return e.entity.name}).getOrElse(function(){return t.props.i18n.t("Значение не найдено")})}},{key:"render",value:function(){var e=this,t=this.getMenuConfigs();return f.createElement(f.Fragment,null,f.createElement(qe.b,null,f.createElement(ae.a,{variant:"raised",onClick:this.onCreateRequested,color:"primary"},this.props.i18n.t("Создать"))),f.createElement(ze.a,{showId:!0,error:new Ue.None,fetching:!1,onRecordSelected:this.onEdit,empty:0===t.length,withActions:!0,headers:[{id:"zoneRuleForm",title:this.props.i18n.t("Проект")},{id:"zoneRuleDate",title:this.props.i18n.t("table|Форма")}],rows:t.map(function(n,r){return{id:r.toString(),payload:n,fields:[e.getEventLineName(n.eventLineId),e.getFormName(n.formId)],buttons:[f.createElement(j.a,{style:Ge.f,key:"edit",onClick:function(t){t.stopPropagation(),e.onEdit(n,r)}},f.createElement(De.a,{style:Ge.g})),f.createElement(j.a,{style:Ge.f,key:"delete",onClick:function(t){t.stopPropagation(),e.onDelete(r)}},f.createElement($e.a,{style:Ge.g})),f.createElement(j.a,{style:Ge.f,onClick:function(){return e.onSwapActions(t,r,r-1)}},f.createElement(Be.a,{style:Ge.g})),f.createElement(j.a,{style:Ge.f,onClick:function(){return e.onSwapActions(t,r,r+1)}},f.createElement(Ve.a,{style:Ge.g}))]}})}))}}]),t}(f.Component);et=Qe([m.autobind,Ze("design:paramtypes",[Object])],et);var tt=Object(h.connect)(function(e){return{i18n:e.i18n,eventLines:e.eventLines,forms:e.forms}})(Object(Re.a)(et)),nt=n(418),rt=(n(2354),n(59)),it=n(161),ot=n(137),at=n(147),lt=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":d()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},st=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":d()(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ct=v.Id.createId(rt.v4()),ut=function(e){function t(e){i()(this,t);var n=s()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={formId:new fe.None,generatedFilter:new fe.None},n}return u()(t,e),a()(t,[{key:"onFormIdChange",value:function(e){var t=this;v.Id.createId(e.target.value).foreach(function(e){return t.setState(he(t.state,{formId:{$set:Object(fe.toOption)(e)}}))})}},{key:"onGenerateRequest",value:function(){var e=this;Object(at.c)(ct.flatMap(function(t){return Object(ot.b)(e.props.filtersForm,t)})).then(function(t){return e.setState(he(e.state,{generatedFilter:{$set:Object(fe.toOption)(t.r)}}))}).catch(function(t){return e.props.dispatch(Object(ye.h)(e.props.i18n.t("Ошибка")))})}},{key:"render",value:function(){var e=this;return f.createElement(f.Fragment,null,f.createElement(ee.a,{fullWidth:!0,style:{marginBottom:15}},f.createElement(Q.a,null,this.props.i18n.t("Форма")),f.createElement(J.a,{native:!0,value:this.state.formId.map(function(e){return e.value}).getOrElse(function(){return""}),onChange:this.onFormIdChange},f.createElement("option",{value:""}),this.props.forms.list.map(function(e){return f.createElement("option",{value:e.id.value},e.entity.name)}))),this.state.formId.map(function(t){return ct.map(function(n){return f.createElement(f.Fragment,null,f.createElement(it.a,{formId:t,filterId:n}),f.createElement(ae.a,{color:"primary",style:{marginTop:15},onClick:e.onGenerateRequest},e.props.i18n.t("Сгенерировать запрос")),f.createElement(ie.a,{fullWidth:!0,value:e.state.generatedFilter.getOrElse(function(){return""})}))}).getOrNull()}).getOrNull())}}]),t}(f.Component);ut=lt([m.autobind,st("design:paramtypes",[Object])],ut);var pt=Object(h.connect)(function(e){return{i18n:e.i18n,forms:e.forms,filtersForm:e.filtersForm}},function(e){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n&&e.forms===t.forms&&e.filtersForm===t.filtersForm},areStatePropsEqual:function(e,t){return e.i18n===t.i18n&&e.forms===t.forms&&e.filtersForm===t.filtersForm}})(ut),dt=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":d()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},ft=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":d()(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ht={display:"inline-block",width:"calc(100% - 48px)",verticalAlign:"middle",boxSizing:"border-box"},mt={verticalAlign:"middle"},vt=function(e){function t(e){i()(this,t);var n=s()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={selectedIndex:n.selectedIndex(),nestedSelectedIndex:n.nestedSelectedIndex()},n}return u()(t,e),a()(t,[{key:"componentDidMount",value:function(){this.setScrollTop(),this.props.dispatch(Object(me.t)(this.props.initialValues))}},{key:"componentWillUnmount",value:function(){this.saveScrollTop(),this.props.dispatch(Object(me.n)())}},{key:"saveScrollTop",value:function(){var e=this;this.props.contentDivRef.foreach(function(t){return e.props.onScrollTopChange(t.scrollTop)})}},{key:"setScrollTop",value:function(){var e=this;this.props.contentDivRef.foreach(function(t){return t.scrollTop=e.props.prevScrollTop})}},{key:"selectedIndex",value:function(){return-1!==location.href.indexOf("/commonSetting")?4:-1!==location.href.indexOf("/permissions")?5:-1!==location.href.indexOf("/uiConfig")?6:4}},{key:"nestedSelectedIndex",value:function(){return-1!==location.href.indexOf("permissions/forms")?1:-1!==location.href.indexOf("permissions/serviceForms")?3:-1!==location.href.indexOf("permissions/dictionaries")?2:1}},{key:"onSelected",value:function(e){switch(e){case 4:this.props.dispatch(Object(Ie.vb)(new v.Id(this.props.params.roleId)));break;case 5:this.props.dispatch(Object(Ie.zb)(new v.Id(this.props.params.roleId)));break;case 6:this.props.dispatch(Object(Ie.Bb)(new v.Id(this.props.params.roleId)))}this.setState(he(this.state,{selectedIndex:{$set:e}}))}},{key:"onNestedSelected",value:function(e){switch(e){case 1:this.props.dispatch(Object(Ie.yb)(new v.Id(this.props.params.roleId)));break;case 3:this.props.dispatch(Object(Ie.Ab)(new v.Id(this.props.params.roleId)));break;case 2:this.props.dispatch(Object(Ie.xb)(new v.Id(this.props.params.roleId)))}this.setState(he(this.state,{nestedSelectedIndex:{$set:e}}))}},{key:"getEventLineMarked",value:function(e){return this.props.role.data.map(function(t){return 0!==t.entity.permissions.filter(function(t){return t.operation instanceof v.PermissionOperationEventLineProperties&&t.operation.eventLineId.value===e.value}).length}).getOrElse(function(){return!1})}},{key:"getFormMarked",value:function(e){return this.props.role.data.map(function(t){return 0!==t.entity.permissions.filter(function(t){return t.operation instanceof v.PermissionOperationFormProperties&&t.operation.formId.value===e.value}).length}).getOrElse(function(){return!1})}},{key:"onNameValueChanged",value:function(e){this.props.dispatch(Object(me.r)(e.target.value))}},{key:"onAdminToggled",value:function(){this.props.dispatch(Object(me.m)())}},{key:"onControlVisibleToggled",value:function(){this.props.dispatch(Object(me.u)(he(this.props.roleForm.uiConfig,{controlsVisible:{$set:!this.props.roleForm.uiConfig.controlsVisible}})))}},{key:"onHideSidebarToggled",value:function(){this.props.dispatch(Object(me.u)(he(this.props.roleForm.uiConfig,{hideSidebar:{$set:!this.props.roleForm.uiConfig.hideSidebar}})))}},{key:"onShowTopMenuToggled",value:function(){this.props.dispatch(Object(me.u)(he(this.props.roleForm.uiConfig,{showTopMenu:{enabled:{$set:!this.props.roleForm.uiConfig.showTopMenu.enabled}}})))}},{key:"onShowTopMenuValueChange",value:function(e){this.props.dispatch(Object(me.u)(he(this.props.roleForm.uiConfig,{showTopMenu:{configs:{$set:e}}})))}},{key:"onHideOrgNameToggled",value:function(){this.props.dispatch(Object(me.u)(he(this.props.roleForm.uiConfig,{hideOrgName:{$set:!this.props.roleForm.uiConfig.hideOrgName}})))}},{key:"onAutoHideTopMenuToggled",value:function(){this.props.dispatch(Object(me.u)(he(this.props.roleForm.uiConfig,{autoHideTopMenu:{$set:!this.props.roleForm.uiConfig.autoHideTopMenu}})))}},{key:"onWorkingPanelTypeFormChanged",value:function(e){var t=this,n=e.target.value,r=Object(pe.e)(this.props.forms,new v.Id(n));Object(fe.headOption)(this.props.eventLines.list.filter(function(e){return r.matchWith(function(t){return t.entity.eventLineId.value===e.id.value},function(){return!1})})).foreach(function(e){Object(fe.headOption)(t.props.forms.list.filter(function(e){return e.id.value===n})).foreach(function(r){t.props.dispatch(Object(me.l)(he(t.props.roleForm.mainPageConfig,{workingPanel:{formId:{$set:new v.Id(n)},eventLineId:{$set:e.id},formTypeId:{$set:r.entity.formType}}})))})})}},{key:"onWorkingPanelTypeBlockChanged",value:function(e){this.props.dispatch(Object(me.l)(he(this.props.roleForm.mainPageConfig,{workingPanel:{blockId:{$set:new v.Id(e.target.value)}}})))}},{key:"onPanelTypeChanged",value:function(e){this.props.dispatch(Object(me.l)(he(this.props.roleForm.mainPageConfig,{workingPanel:{$set:this.getPanelType(new fe.TypeId(e.target.value))}})))}},{key:"getPanelType",value:function(e){var t=this;switch(e.value){case v.PanelTypeDefaultPanel.$Type.value:return new v.PanelTypeDefaultPanel;case v.PanelTypeBlockPanel.$Type.value:return Object(fe.headOption)(this.props.forms.list.filter(function(e){return v.FormType.isForm(e.entity.formType)})).flatMap(function(e){return Object(fe.headOption)(t.props.eventLines.list.filter(function(t){return e.entity.eventLineId.value===t.id.value})).map(function(t){return new v.PanelTypeBlockPanel(e.id,t.id,e.entity.formType,new v.Id(""))})}).getOrElse(function(){return new v.PanelTypeDefaultPanel});case v.PanelTypeListPanel.$Type.value:return Object(fe.headOption)(this.props.forms.list).flatMap(function(e){return Object(fe.headOption)(t.props.eventLines.list.filter(function(t){return e.entity.eventLineId.value===t.id.value})).map(function(t){return new v.PanelTypeListPanel(e.id,t.id,e.entity.formType)})}).getOrElse(function(){return new v.PanelTypeDefaultPanel});default:throw"Unknown panel type"}}},{key:"onEventLineToggled",value:function(e){var t=this;this.props.role.data.foreach(function(n){var r=n.entity.permissions,i=t.getEventLineMarked(e.id)?r.filter(function(t){return!(t.operation instanceof v.PermissionOperationEventLineProperties&&t.operation.eventLineId.value===e.id.value)}):r.concat([new v.Permission(new v.PermissionPredicateAllow,new v.PermissionOperationEventLineProperties(e.id))]);t.updateRolePermissions(n,i)})}},{key:"onFormToggled",value:function(e){var t=this;this.props.role.data.foreach(function(n){var r=n.entity.permissions,i=t.getFormMarked(e.id)?r.filter(function(t){return!(t.operation instanceof v.PermissionOperationFormProperties&&t.operation.formId.value===e.id.value)}):r.concat([new v.Permission(new v.PermissionPredicateAllow,new v.PermissionOperationFormProperties(e.id))]);t.updateRolePermissions(n,i)})}},{key:"updateRolePermissions",value:function(e,t){var n=this;return Object(be.f)(he(e,{entity:{$set:new v.Role(e.entity.name,e.entity.organisationId,t,e.entity.mainPageConfig,e.entity.uiConfig,e.entity.linkedEvent)}})).then(function(e){n.props.dispatch(Object(g.b)(new v.Id(n.props.params.roleId))),n.props.dispatch(Object(Oe.g)())}).catch(function(e){n.props.dispatch(Object(Se.a)(e))})}},{key:"onFormSettingsRequested",value:function(e){var t=this;this.props.role.data.foreach(function(n){t.props.dispatch(Object(Ie.ub)(n.id,e))})}},{key:"onEventLineSettingsRequested",value:function(e){this.props.openDialog(this.props.i18n.t("Редактирование "),f.createElement(je,{eventLineId:e.id,params:this.props.params}),[])}},{key:"isSelectedFormType",value:function(e){switch(this.state.nestedSelectedIndex){case 1:return v.FormType.isForm(e);case 2:return v.FormType.isAnyDictionary(e);case 3:return v.FormType.isService(e);default:return!1}}},{key:"openTopMenuSettings",value:function(){var e=this,t=this.props.openDialog(this.props.i18n.t("Настройки верхнего меню"),f.createElement(tt,{showTopMenuArr:this.props.roleForm.uiConfig.showTopMenu.configs,onShowTopMenuArrChange:this.onShowTopMenuValueChange}),[f.createElement(ae.a,{variant:"raised",style:{marginRight:"10px"},onClick:function(){return e.props.handleDialogClose(t)}},this.props.i18n.t("Закрыть"))])}},{key:"onSettingsSaveRequested",value:function(){var e=this,t=this.props.roleForm,n=t.mainPageConfig,r=t.name,i=t.isAdministrator,o=t.uiConfig,a=t.linkedEventLineId;this.props.role.data.foreach(function(t){Object(be.f)(he(t,{entity:{$set:new v.Role(r,t.entity.organisationId,t.entity.permissions.filter(function(e){return!!i||e.operation.tpe.value!==v.PermissionOperationAdministrator.$Type.value}).concat(i?[new v.Permission(new v.PermissionPredicateAllow,new v.PermissionOperationAdministrator)]:[]),n,o,a)}})).then(function(t){e.props.dispatch(Object(ye.h)(e.props.i18n.t("Сохранение успешно завершено"))),e.props.dispatch(Object(g.b)(new v.Id(e.props.params.roleId))),e.props.dispatch(Object(Te.c)()),e.props.dispatch(Object(Oe.g)())}).catch(function(t){e.props.dispatch(Object(ye.h)(e.props.i18n.t("Сохранение завершилось ошибкой")))})})}},{key:"getApiMethodStatus",value:function(e){return this.props.role.data.flatMap(function(t){return Object(fe.headOption)(t.entity.permissions.filter(function(e){return e.operation instanceof v.PermissionOperationHttpApiAccess})).map(function(t){return t.operation.methods.filter(function(t){return t.tpe.value===e.tpe.value}).length>0})}).getOrElse(function(){return!1})}},{key:"hasOperationHttpApiAccessPermission",value:function(){return this.props.role.data.map(function(e){return e.entity.permissions.filter(function(e){return e.operation instanceof v.PermissionOperationHttpApiAccess}).length>0}).getOrElse(function(){return!1})}},{key:"onHttpApiMethodToggled",value:function(e,t){var n=this;this.props.role.data.foreach(function(r){var i=r.entity.permissions,o=Object(fe.headOption)(i.map(function(e,t){return{_1:e,_2:t}}).filter(function(e){return e._1.operation instanceof v.PermissionOperationHttpApiAccess})).matchWith(function(n){return Object(fe.toOption)(e).filter(function(e){return e}).matchWith(function(){return he(i,{$splice:[[n._2,1,he(n._1,{operation:{methods:{$push:[t]}}})]]})},function(){return he(i,{$splice:[[n._2,1,he(n._1,{operation:{methods:{$set:n._1.operation.methods.filter(function(e){return e.tpe.value!==t.tpe.value})}}})]]})})},function(){return r.entity.permissions.concat([new v.Permission(new v.PermissionPredicateAllow,new v.PermissionOperationHttpApiAccess([t]))])});n.updateRolePermissions(r,o)})}},{key:"onLinkedEventLineId",value:function(e){this.props.dispatch(Object(me.q)(v.Id.createId(e.target.value)))}},{key:"onHttpMethodDialogRequest",value:function(){var e=this,t=this.props.openDialog(this.props.i18n.t("Генерация запроса"),f.createElement(pt,null),[f.createElement(ae.a,{key:"close",onClick:function(){return e.props.handleDialogClose(t)},color:"primary",variant:"raised"},this.props.i18n.t("Закрыть"))])}},{key:"getMethodTooltipTitle",value:function(e){switch(e.tpe.value){case v.HttpApiMethodFormDataSendEvents.$Type.value:return this.props.i18n.t("Метод позволяет сгенерировать события для списка указанных анкет");case v.HttpApiMethodFormDataChildrenRefs.$Type.value:return this.props.i18n.t("Метод позволяет добавлять или удалять значения в ссылочное поле")}}},{key:"getHttpLabel",value:function(e){return this.props.i18n.t(e.tpe.value.replace("HttpApiMethod.",""))}},{key:"getMethodLabel",value:function(e){switch(e.tpe.value){case v.HttpApiMethodFormDataSendEvents.$Type.value:case v.HttpApiMethodFormDataChildrenRefs.$Type.value:return f.createElement(f.Fragment,null,this.getHttpLabel(e),f.createElement(se.a,{title:this.getMethodTooltipTitle(e)},f.createElement(j.a,null,f.createElement(nt.a,null))));case v.HttpApiMethodFormDataFilter.$Type.value:return f.createElement(f.Fragment,null,this.getHttpLabel(e),f.createElement(j.a,{onClick:this.onHttpMethodDialogRequest},f.createElement(nt.a,null)));default:return this.getHttpLabel(e)}}},{key:"renderTabContents",value:function(){var e=this;switch(this.state.selectedIndex){case 4:return f.createElement(M.a,{style:{padding:"10px"}},f.createElement(ie.a,{fullWidth:!0,value:this.props.roleForm.name,onChange:this.onNameValueChanged,label:this.props.i18n.t("Имя")}),f.createElement(q.a,null,f.createElement(ne.a,{label:this.props.i18n.t("Администрирование системы"),control:f.createElement(G.a,{checked:this.props.roleForm.isAdministrator,onChange:function(t,n){return e.onAdminToggled()}})})),f.createElement(ee.a,{fullWidth:!0},f.createElement(Q.a,null,this.props.i18n.t("Привязка к проекту")),f.createElement(J.a,{fullWidth:!0,value:this.props.roleForm.linkedEventLineId.map(function(e){return e.value}).getOrElse(function(){return""}),onChange:this.onLinkedEventLineId},f.createElement(X.a,{value:""}),this.props.eventLines.list.map(function(e){return f.createElement(X.a,{key:e.id.value,value:e.id.value},e.entity.name)}))),f.createElement("p",null,this.props.i18n.t("Главная страница (отображать после логина)")),f.createElement(ee.a,{fullWidth:!0},f.createElement(Q.a,null,this.props.i18n.t("Тип")),f.createElement(J.a,{value:this.props.roleForm.mainPageConfig.workingPanel.tpe.value,onChange:this.onPanelTypeChanged,fullWidth:!0},f.createElement(X.a,{value:v.PanelTypeDefaultPanel.$Type.value},this.props.i18n.t("По умолчанию")),f.createElement(X.a,{value:v.PanelTypeListPanel.$Type.value},this.props.i18n.t("Список")),f.createElement(X.a,{value:v.PanelTypeBlockPanel.$Type.value},this.props.i18n.t("Блок")))),(this.props.roleForm.mainPageConfig.workingPanel.tpe.value===v.PanelTypeListPanel.$Type.value||this.props.roleForm.mainPageConfig.workingPanel.tpe.value===v.PanelTypeBlockPanel.$Type.value)&&f.createElement(ee.a,{fullWidth:!0},f.createElement(Q.a,null,this.props.i18n.t("Форма")),f.createElement(J.a,{value:this.props.roleForm.mainPageConfig.workingPanel.formId.value,onChange:this.onWorkingPanelTypeFormChanged,fullWidth:!0},this.props.forms.list.map(function(e){return f.createElement(X.a,{key:e.id.value,value:e.id.value},e.entity.name)}))),this.props.roleForm.mainPageConfig.workingPanel.tpe.value===v.PanelTypeBlockPanel.$Type.value&&f.createElement(ee.a,{fullWidth:!0},f.createElement(Q.a,null,this.props.i18n.t("Блок")),f.createElement(J.a,{value:this.props.roleForm.mainPageConfig.workingPanel.blockId.value,onChange:this.onWorkingPanelTypeBlockChanged,fullWidth:!0},Object(de.c)(this.props.blocks,this.props.roleForm.mainPageConfig.workingPanel.formId).getOrElse(function(){return[]}).map(function(e){return f.createElement(X.a,{key:e.id.toString(),value:e.id.toString()},e.name)}))),f.createElement("h4",null,this.props.i18n.t("Доступ к API")),f.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},v.httpApiMethods.map(function(t){return f.createElement(q.a,null,f.createElement(ne.a,{label:e.getMethodLabel(t),control:f.createElement(G.a,{checked:e.getApiMethodStatus(t),onChange:function(n,r){return e.onHttpApiMethodToggled(r,t)}})}))})),f.createElement(ae.a,{onClick:this.onSettingsSaveRequested,color:"primary",variant:"raised"},this.props.i18n.t("Сохранить")));case 5:return f.createElement(M.a,{style:{display:"flex",flex:1}},f.createElement(Fe.a,{value:this.state.nestedSelectedIndex,onChange:this.onNestedSelected},f.createElement(Me.a,{value:1,label:this.props.i18n.t("Формы")},this.renderProjectsFromsContent()),f.createElement(Me.a,{value:2,label:this.props.i18n.t("Словари")},this.renderProjectsFromsContent()),f.createElement(Me.a,{value:3,label:this.props.i18n.t("Служебные")},this.renderProjectsFromsContent())));case 6:return f.createElement(M.a,{style:{padding:"10px"}},f.createElement(q.a,null,f.createElement(ne.a,{label:this.props.i18n.t("Отображать элементы управления"),control:f.createElement(G.a,{checked:this.props.roleForm.uiConfig.controlsVisible,onChange:this.onControlVisibleToggled})}),f.createElement(ne.a,{label:this.props.i18n.t("Скрыть сайдбар"),control:f.createElement(G.a,{checked:this.props.roleForm.uiConfig.hideSidebar,onChange:this.onHideSidebarToggled})}),f.createElement("div",{style:{display:"flex",flexWrap:"nowrap",alignItems:"center"}},f.createElement(ne.a,{label:this.props.i18n.t("Отображать верхнее меню"),control:f.createElement(G.a,{checked:this.props.roleForm.uiConfig.showTopMenu.enabled,onChange:this.onShowTopMenuToggled})}),this.props.roleForm.uiConfig.showTopMenu.enabled&&f.createElement("div",null,f.createElement(ae.a,{onClick:this.openTopMenuSettings,variant:"raised",size:"small",style:{marginTop:0}},this.props.i18n.t("Настройка")))),f.createElement(ne.a,{label:this.props.i18n.t("Скрывать название организации"),control:f.createElement(G.a,{checked:this.props.roleForm.uiConfig.hideOrgName,onChange:this.onHideOrgNameToggled})}),f.createElement(ne.a,{label:this.props.i18n.t("Автоматически скрывать верхнюю панель управления"),control:f.createElement(G.a,{checked:this.props.roleForm.uiConfig.autoHideTopMenu,onChange:this.onAutoHideTopMenuToggled})})),f.createElement(ae.a,{onClick:this.onSettingsSaveRequested,color:"primary",variant:"raised"},this.props.i18n.t("Сохранить")));default:return f.createElement("div",null,"unknown content")}}},{key:"renderProjectsFromsContent",value:function(){var e=this;return f.createElement(I.a,{style:{display:"flex",flexDirection:"column",flex:1}},this.props.eventLines.fetching?[]:this.props.eventLines.list.map(function(t){return f.createElement("div",{style:{position:"relative"}},f.createElement("div",null,f.createElement(x.a,{key:t.id.value,style:ht},f.createElement(N.a,null,f.createElement(G.a,{checked:e.getEventLineMarked(t.id),onChange:function(){return e.onEventLineToggled(t)}})),f.createElement(W.a,{primary:t.entity.name}))),e.getEventLineMarked(t.id)&&f.createElement(j.a,{style:{position:"absolute",right:0,top:0},onClick:function(){return e.onEventLineSettingsRequested(t)}},f.createElement(ue.a,null)),f.createElement(H.a,{style:{marginLeft:15}},e.props.forms.fetching?[]:Object(pe.f)(e.props.forms,t.id).filter(function(t){return e.isSelectedFormType(t.entity.formType)}).map(function(t){return f.createElement("div",null,f.createElement("div",{style:ht},f.createElement(x.a,{key:t.id.value},f.createElement(N.a,null,f.createElement(G.a,{checked:e.getFormMarked(t.id),onChange:function(){return e.onFormToggled(t)}})),f.createElement(W.a,{primary:t.entity.name})),f.createElement(P.a,null)),e.getFormMarked(t.id)&&f.createElement(j.a,{style:mt,onClick:function(n){return e.onFormSettingsRequested(t.id)}},f.createElement(ue.a,null)))})))}))}},{key:"render",value:function(){var e=this;return f.createElement("div",{style:{color:"black"}},f.createElement(L.a,{value:this.state.selectedIndex,onChange:function(t,n){return e.onSelected(n)},indicatorColor:"primary",textColor:"primary",fullWidth:!0},f.createElement(_.a,{value:4,label:this.props.i18n.t("Общие настройки")}),f.createElement(_.a,{value:5,label:this.props.i18n.t("Проекты/формы")}),f.createElement(_.a,{value:6,label:this.props.i18n.t("Отображение")})),this.renderTabContents())}}]),t}(f.Component);vt=dt([m.autobind,ft("design:paramtypes",[Object])],vt);var gt=Object(h.connect)(function(e){return{i18n:e.i18n,eventLines:e.eventLines,forms:e.forms,role:e.role,roleForm:e.roleForm,user:e.user,blocks:e.blocks}})(Object(Ee.a)(function(e){if(e.isTokenChecked){var t=e.roleForm.mainPageConfig.workingPanel;t instanceof v.PanelTypeBlockPanel&&e.dispatch(Object(xe.b)(t.formId))}},function(){},function(e,t){if(e.isTokenChecked){var n=e.roleForm.mainPageConfig.workingPanel,r=t.roleForm.mainPageConfig.workingPanel;n!==r&&(n instanceof v.PanelTypeBlockPanel&&!(r instanceof v.PanelTypeBlockPanel)&&""!==n.formId.value&&e.dispatch(Object(xe.b)(n.formId)),n instanceof v.PanelTypeBlockPanel&&r instanceof v.PanelTypeBlockPanel&&n.formId.value!==r.formId.value&&""!==n.formId.value&&e.dispatch(Object(xe.b)(n.formId)))}})(Object(Re.a)(vt))),yt=n(1461),bt=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":d()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Ot=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":d()(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},kt=function(e){function t(e){return i()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,Object.assign(y.a.screenInitialState(),{prevScrollTop:0})))}return u()(t,e),a()(t,[{key:"onScrollTopChange",value:function(e){this.setState(he(this.state,{prevScrollTop:{$set:e}}))}},{key:"renderNavigation",value:function(){return f.createElement(b.a,null)}},{key:"onGoBackRequested",value:function(){this.props.dispatch(Object(Ie.jb)())}},{key:"getInitialValues",value:function(e){var t=e.entity.permissions.filter(function(e){return e.operation.tpe.value===v.PermissionOperationEventLineProperties.$Type.value&&e.predicate.tpe.value===v.PermissionPredicateAllow.$Type.value}).map(function(e){return e.operation}),n=e.entity.permissions.filter(function(e){return e.operation.tpe.value===v.PermissionOperationFormProperties.$Type.value&&e.predicate.tpe.value===v.PermissionPredicateAllow.$Type.value}).map(function(e){return e.operation}),r=Object(fe.headOption)(e.entity.permissions.filter(function(e){return e.operation.tpe.value===v.PermissionOperationAdministrator.$Type.value&&e.predicate.tpe.value===v.PermissionPredicateAllow.$Type.value})).nonEmpty();return{name:e.entity.name,isAdministrator:r,organisationId:new fe.Some(e.entity.organisationId),eventLines:t,forms:n,mainPageConfig:e.entity.mainPageConfig,uiConfig:e.entity.uiConfig,linkedEventLineId:e.entity.linkedEvent}}},{key:"render",value:function(){var e=this,t=this.props.role.data;return this.renderScreenBody({className:"RolePage"},f.createElement("div",{style:{height:"100%"}},f.createElement(O.a,{title:this.props.i18n.t("Настройки роли")+" "+t.map(function(e){return e.entity.name}).getOrElse(function(){return""}),onGoBackRequested:this.onGoBackRequested,rightButtonGroup:[f.createElement("div",null)]}),f.createElement("div",{style:{height:"calc(100% - 68px)"},className:"DefaultPage__paper",ref:function(t){return e.contentDiv=Object(fe.toOption)(t)}},t.map(function(t){return f.createElement(gt,{params:e.props.params,initialValues:e.getInitialValues(t),openDialog:e.openDialog,handleDialogClose:e.handleDialogClose,contentDivRef:e.contentDiv,prevScrollTop:e.state.prevScrollTop,onScrollTopChange:e.onScrollTopChange})}).getOrNull())))}}]),t}(y.a);kt=bt([m.autobind,Ot("design:paramtypes",[Object])],kt);t.default=Object(h.connect)(function(e){return{i18n:e.i18n,role:e.role,roleForm:e.roleForm,organisations:e.organisations}})(Object(yt.a)(Object(Ee.a)(function(e){e.isTokenChecked&&(e.dispatch(Object(k.c)()),e.dispatch(Object(g.a)(new v.Id(e.params.roleId))),e.dispatch(Object(E.g)()))},function(){},function(e,t){e.params.roleId!==t.params.roleId&&e.isTokenChecked&&(e.dispatch(Object(k.c)()),e.dispatch(Object(g.a)(new v.Id(e.params.roleId))),e.dispatch(Object(E.g)())),e.isTokenChecked&&!t.isTokenChecked&&(e.dispatch(Object(k.c)()),e.dispatch(Object(g.a)(new v.Id(e.params.roleId))),e.dispatch(Object(E.g)()))})(kt)))}}]);