(window.webpackJsonpwww=window.webpackJsonpwww||[]).push([[60],{1916:function(e,t,r){"use strict";r.d(t,"a",function(){return k});var n,o=r(6),a=r.n(o),i=r(10),u=r.n(i),l=r(7),c=r.n(l),s=r(8),p=r.n(s),d=r(11),f=r.n(d),h=r(2),b=r(14),y=r(13),m=r(1999),v=(r(2002),r(1)),g=function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i};!function(e){e[e.Default=0]="Default",e[e.Rounded=1]="Rounded",e[e.Outline=2]="Outline"}(n||(n={}));var k=function(e){switch(e.tpe){case v.TagsListStyleDefault.$Type:return n.Default;case v.TagsListStyleRounded.$Type:return n.Rounded;case v.TagsListStyleOutLine.$Type:return n.Outline}},O=function(e){function t(){return a()(this,t),c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p()(t,e),u()(t,[{key:"colorIsLight",value:function(e,t,r){return 1-(.299*e+.587*t+.114*r)/255<.5}},{key:"getClass",value:function(){switch(this.props.labelStyle){case n.Rounded:return"Label__rounded";case n.Outline:return"Label__outline";default:return"Label__default"}}},{key:"getStyle",value:function(){if(!this.props.color)return{};if(this.props.labelStyle===n.Outline)return{borderColor:this.props.color};var e=m(this.props.color).rgb;return Object.assign({backgroundColor:this.props.color},e?{color:this.colorIsLight(e[0],e[1],e[2])?"#000":"#fff"}:{})}},{key:"render",value:function(){return h.createElement("div",{className:"Label "+this.getClass(),style:this.getStyle()},this.props.children)}}]),t}(h.PureComponent);O=g([y.autobind],O),t.b=Object(b.connect)(function(e){return{i18n:e.i18n}})(O)},1999:function(e,t,r){var n=r(2e3);e.exports=function(e){var t,r,o,a;if(t=/^((?:rgb|hs[lv]|cmyk|xyz|lab)a?)\s*\(([^\)]*)\)/.exec(e)){var i=t[1],u="cmyk"===(l=i.replace(/a$/,""))?4:3;r=n[l],o=t[2].replace(/^\s+|\s+$/g,"").split(/\s*,\s*/).map(function(e,t){return/%$/.test(e)&&t===u?parseFloat(e)/100:(/%$/.test(e),parseFloat(e))}),i===l&&o.push(1),a=void 0===o[u]?1:o[u],o=o.slice(0,u),r[l]=function(){return o}}else if(/^#[A-Fa-f0-9]+$/.test(e)){var l;u=(l=e.replace(/^#/,"")).length;r=n.rgb,o=(o=l.split(3===u?/(.)/:/(..)/)).filter(Boolean).map(function(e){return 3===u?parseInt(e+e,16):parseInt(e,16)}),a=1,r.rgb=function(){return o},o[0]||(o[0]=0),o[1]||(o[1]=0),o[2]||(o[2]=0)}else(r=n.keyword).keyword=function(){return e},o=e,a=1;var c={rgb:void 0,hsl:void 0,hsv:void 0,cmyk:void 0,keyword:void 0,hex:void 0};try{c.rgb=r.rgb(o)}catch(e){}try{c.hsl=r.hsl(o)}catch(e){}try{c.hsv=r.hsv(o)}catch(e){}try{c.cmyk=r.cmyk(o)}catch(e){}try{c.keyword=r.keyword(o)}catch(e){}return c.rgb&&(c.hex="#"+c.rgb.map(function(e){var t=e.toString(16);return 1===t.length?"0"+t:t}).join("")),c.rgb&&(c.rgba=c.rgb.concat(a)),c.hsl&&(c.hsla=c.hsl.concat(a)),c.hsv&&(c.hsva=c.hsv.concat(a)),c.cmyk&&(c.cmyka=c.cmyk.concat(a)),c}},2000:function(e,t,r){var n=r(2001),o=function(){return new c};for(var a in n){o[a+"Raw"]=function(e){return function(t){return"number"==typeof t&&(t=Array.prototype.slice.call(arguments)),n[e](t)}}(a);var i=/(\w+)2(\w+)/.exec(a),u=i[1],l=i[2];(o[u]=o[u]||{})[l]=o[a]=function(e){return function(t){"number"==typeof t&&(t=Array.prototype.slice.call(arguments));var r=n[e](t);if("string"==typeof r||void 0===r)return r;for(var o=0;o<r.length;o++)r[o]=Math.round(r[o]);return r}}(a)}var c=function(){this.convs={}};c.prototype.routeSpace=function(e,t){var r=t[0];return void 0===r?this.getValues(e):("number"==typeof r&&(r=Array.prototype.slice.call(t)),this.setValues(e,r))},c.prototype.setValues=function(e,t){return this.space=e,this.convs={},this.convs[e]=t,this},c.prototype.getValues=function(e){var t=this.convs[e];if(!t){var r=this.space,n=this.convs[r];t=o[r][e](n),this.convs[e]=t}return t},["rgb","hsl","hsv","cmyk","keyword"].forEach(function(e){c.prototype[e]=function(t){return this.routeSpace(e,arguments)}}),e.exports=o},2001:function(e,t){function n(e){var t,r,n=e[0]/255,o=e[1]/255,a=e[2]/255,i=Math.min(n,o,a),u=Math.max(n,o,a),l=u-i;return u==i?t=0:n==u?t=(o-a)/l:o==u?t=2+(a-n)/l:a==u&&(t=4+(n-o)/l),(t=Math.min(60*t,360))<0&&(t+=360),r=(i+u)/2,[t,100*(u==i?0:r<=.5?l/(u+i):l/(2-u-i)),100*r]}function o(e){var t,r,n=e[0],o=e[1],a=e[2],i=Math.min(n,o,a),u=Math.max(n,o,a),l=u-i;return r=0==u?0:l/u*1e3/10,u==i?t=0:n==u?t=(o-a)/l:o==u?t=2+(a-n)/l:a==u&&(t=4+(n-o)/l),(t=Math.min(60*t,360))<0&&(t+=360),[t,r,u/255*1e3/10]}function a(e){var t=e[0],r=e[1],o=e[2];return[n(e)[0],100*(1/255*Math.min(t,Math.min(r,o))),100*(o=1-1/255*Math.max(t,Math.max(r,o)))]}function i(e){var t,r=e[0]/255,n=e[1]/255,o=e[2]/255;return[100*((1-r-(t=Math.min(1-r,1-n,1-o)))/(1-t)||0),100*((1-n-t)/(1-t)||0),100*((1-o-t)/(1-t)||0),100*t]}function u(e){return j[JSON.stringify(e)]}function l(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*t+.7152*r+.0722*n),100*(.0193*t+.1192*r+.9505*n)]}function c(e){var t=l(e),r=t[0],n=t[1],o=t[2];return n/=100,o/=108.883,r=(r/=95.047)>.008856?Math.pow(r,1/3):7.787*r+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(r-n),200*(n-(o=o>.008856?Math.pow(o,1/3):7.787*o+16/116))]}function s(e){var t,r,n,o,a,i=e[0]/360,u=e[1]/100,l=e[2]/100;if(0==u)return[a=255*l,a,a];t=2*l-(r=l<.5?l*(1+u):l+u-l*u),o=[0,0,0];for(var c=0;c<3;c++)(n=i+1/3*-(c-1))<0&&n++,n>1&&n--,a=6*n<1?t+6*(r-t)*n:2*n<1?r:3*n<2?t+(r-t)*(2/3-n)*6:t,o[c]=255*a;return o}function p(e){var t=e[0]/60,r=e[1]/100,n=e[2]/100,o=Math.floor(t)%6,a=t-Math.floor(t),i=255*n*(1-r),u=255*n*(1-r*a),l=255*n*(1-r*(1-a));n*=255;switch(o){case 0:return[n,l,i];case 1:return[u,n,i];case 2:return[i,n,l];case 3:return[i,u,n];case 4:return[l,i,n];case 5:return[n,i,u]}}function d(e){var t,n,o,a,i=e[0]/360,u=e[1]/100,l=e[2]/100,c=u+l;switch(c>1&&(u/=c,l/=c),o=6*i-(t=Math.floor(6*i)),0!=(1&t)&&(o=1-o),a=u+o*((n=1-l)-u),t){default:case 6:case 0:r=n,g=a,b=u;break;case 1:r=a,g=n,b=u;break;case 2:r=u,g=n,b=a;break;case 3:r=u,g=a,b=n;break;case 4:r=a,g=u,b=n;break;case 5:r=n,g=u,b=a}return[255*r,255*g,255*b]}function f(e){var t=e[0]/100,r=e[1]/100,n=e[2]/100,o=e[3]/100;return[255*(1-Math.min(1,t*(1-o)+o)),255*(1-Math.min(1,r*(1-o)+o)),255*(1-Math.min(1,n*(1-o)+o))]}function h(e){var t,r,n,o=e[0]/100,a=e[1]/100,i=e[2]/100;return r=-.9689*o+1.8758*a+.0415*i,n=.0557*o+-.204*a+1.057*i,t=(t=3.2406*o+-1.5372*a+-.4986*i)>.0031308?1.055*Math.pow(t,1/2.4)-.055:t*=12.92,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r*=12.92,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,[255*(t=Math.min(Math.max(0,t),1)),255*(r=Math.min(Math.max(0,r),1)),255*(n=Math.min(Math.max(0,n),1))]}function y(e){var t=e[0],r=e[1],n=e[2];return r/=100,n/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(t-r),200*(r-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]}function m(e){var t,r,n,o,a=e[0],i=e[1],u=e[2];return a<=8?o=(r=100*a/903.3)/100*7.787+16/116:(r=100*Math.pow((a+16)/116,3),o=Math.pow(r/100,1/3)),[t=t/95.047<=.008856?t=95.047*(i/500+o-16/116)/7.787:95.047*Math.pow(i/500+o,3),r,n=n/108.883<=.008859?n=108.883*(o-u/200-16/116)/7.787:108.883*Math.pow(o-u/200,3)]}function v(e){var t,r=e[0],n=e[1],o=e[2];return(t=360*Math.atan2(o,n)/2/Math.PI)<0&&(t+=360),[r,Math.sqrt(n*n+o*o),t]}function k(e){return h(m(e))}function O(e){var t,r=e[0],n=e[1];return t=e[2]/360*2*Math.PI,[r,n*Math.cos(t),n*Math.sin(t)]}function w(e){return R[e]}e.exports={rgb2hsl:n,rgb2hsv:o,rgb2hwb:a,rgb2cmyk:i,rgb2keyword:u,rgb2xyz:l,rgb2lab:c,rgb2lch:function(e){return v(c(e))},hsl2rgb:s,hsl2hsv:function(e){var t=e[0],r=e[1]/100,n=e[2]/100;if(0===n)return[0,0,0];return[t,100*(2*(r*=(n*=2)<=1?n:2-n)/(n+r)),100*((n+r)/2)]},hsl2hwb:function(e){return a(s(e))},hsl2cmyk:function(e){return i(s(e))},hsl2keyword:function(e){return u(s(e))},hsv2rgb:p,hsv2hsl:function(e){var t,r,n=e[0],o=e[1]/100,a=e[2]/100;return t=o*a,[n,100*(t=(t/=(r=(2-o)*a)<=1?r:2-r)||0),100*(r/=2)]},hsv2hwb:function(e){return a(p(e))},hsv2cmyk:function(e){return i(p(e))},hsv2keyword:function(e){return u(p(e))},hwb2rgb:d,hwb2hsl:function(e){return n(d(e))},hwb2hsv:function(e){return o(d(e))},hwb2cmyk:function(e){return i(d(e))},hwb2keyword:function(e){return u(d(e))},cmyk2rgb:f,cmyk2hsl:function(e){return n(f(e))},cmyk2hsv:function(e){return o(f(e))},cmyk2hwb:function(e){return a(f(e))},cmyk2keyword:function(e){return u(f(e))},keyword2rgb:w,keyword2hsl:function(e){return n(w(e))},keyword2hsv:function(e){return o(w(e))},keyword2hwb:function(e){return a(w(e))},keyword2cmyk:function(e){return i(w(e))},keyword2lab:function(e){return c(w(e))},keyword2xyz:function(e){return l(w(e))},xyz2rgb:h,xyz2lab:y,xyz2lch:function(e){return v(y(e))},lab2xyz:m,lab2rgb:k,lab2lch:v,lch2lab:O,lch2xyz:function(e){return m(O(e))},lch2rgb:function(e){return k(O(e))}};var R={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},j={};for(var I in R)j[JSON.stringify(R[I])]=I},2002:function(e,t,r){var n=r(2003);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};r(121)(n,o);n.locals&&(e.exports=n.locals)},2003:function(e,t,r){(e.exports=r(120)(!1)).push([e.i,".Label {\n  padding: .25em .6em .25em;\n  color: #333;\n  background-color: #e4e7ea; }\n\n.Label__default {\n  border-radius: .30em; }\n\n.Label__rounded {\n  border-radius: 60px; }\n\n.Label__outline {\n  background-color: transparent;\n  border: solid 1px #e4e7ea;\n  border-radius: .30em; }\n",""])},2111:function(e,t,r){var n=r(2699);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};r(121)(n,o);n.locals&&(e.exports=n.locals)},2699:function(e,t,r){(e.exports=r(120)(!1)).push([e.i,".TagsListControl {\n  margin: .5em 0;\n  display: flex; }\n  .TagsListControl > * {\n    margin: .3em; }\n",""])},2739:function(e,t,r){"use strict";r.r(t);var n=r(6),o=r.n(n),a=r(10),i=r.n(a),u=r(7),l=r.n(u),c=r(8),s=r.n(c),p=r(2),d=r(14),f=r(29),h=r(0),b=r(1453),y=r(43),m=r.n(y),v=r(11),g=r.n(v),k=r(13),O=r(143),w=r(19),R=r.n(w),j=r(241),I=r.n(j),E=r(243),M=r.n(E),S=r(242),F=r.n(S),V=r(261),x=r.n(V),q=r(1),C=r(100),_=r(621),D=r(215),P=r(3),T=(r(2111),r(1916)),$=r(174),L=r(1454),A=r(322),N=function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":g()(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i},z=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":g()(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},B=function(e){function t(e){o()(this,t);var r=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={dialog:{open:!1,actions:[],title:new h.None,body:new h.None,width:new h.None},saveBlock:!1,markedFormRecords:[],currentPage:0,rowPerPage:20,searchValue:""},r}return s()(t,e),i()(t,[{key:"onChange",value:function(e){this.props.onChange(e,this.props.output)}},{key:"handleDialogClose",value:function(){this.setState(P(this.state,{dialog:{open:{$set:!1},width:{$set:new h.None}}}))}},{key:"openDialog",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments[3];this.setState(P(this.state,{dialog:{$set:{open:!0,title:new h.Some(e),body:new h.Some(t),actions:r||[],width:Object(h.toOption)(n)}}}))}},{key:"onAddClick",value:function(){var e=this;this.props.dispatch(Object($.c)(this.props.formId,this.props.output.formField)).foreach(function(t){e.openDialog(e.props.i18n.t("Добавление ссылки на запись"),p.createElement(A.a,{params:{},componentProps:{childFormId:e.props.objRefFormId,objRefsField:t,parentFormId:e.props.formId,displayFields:[].concat(m()(e.props.control.colorField.map(function(e){return[new q.DisplayFieldByField(e,"")]}).getOrElse(function(){return[]})),m()(e.props.control.valueField.map(function(e){return[new q.DisplayFieldByField(e,"")]}).getOrElse(function(){return[]}))),displayFieldsForAdding:[],blockRendererId:e.props.blockRendererId,display:e.props.display,output:e.props.output,value:e.props.value.getOrElse(function(){return new q.ValueObjectRefs([])}),input:e.props.input,onObjRefAdd:e.onAddValue,onObjRefsAdd:e.onAddValues,onObjRefDelete:e.onDeleteValue},load:function(){return r.e(8).then(r.bind(null,2753))}}),[p.createElement(R.a,{onClick:e.handleDialogClose,style:{marginRight:"10px"}},e.props.i18n.t("Закрыть"))],"85%")})}},{key:"onAddValue",value:function(e){var t=this;return new Promise(function(r,n){t.onChange(t.props.value.filter(function(e){return e.tpe.value===q.ValueObjectRefs.$Type.value}).map(function(t){return new q.ValueObjectRefs(t.id.concat(e.id))}).getOrElse(function(){return new q.ValueObjectRefs([e.id])}));t.props.dataInput.map(function(e){return e.formRecords}).getOrElse(function(){return[]}).filter(function(t){return t.id.value===e.id.value});t.props.displayValues.foreach(function(r){t.props.dispatch(Object(C.w)({id:t.props.display.id,blockRendererId:t.props.blockRendererId,display:r.concat(e)}))}),r()})}},{key:"onAddValues",value:function(e){var t=this;return new Promise(function(r,n){t.onChange(t.props.value.filter(function(e){return e.tpe.value===q.ValueObjectRefs.$Type.value}).map(function(t){return new q.ValueObjectRefs(t.id.concat(e.map(function(e){return e.id})))}).getOrElse(function(){return new q.ValueObjectRefs(e.map(function(e){return e.id}))}));t.props.dataInput.map(function(e){return e.formRecords}).getOrElse(function(){return[]}).filter(function(t){return e.filter(function(e){return e.id.value===t.id.value}).length>0});t.props.displayValues.foreach(function(r){t.props.dispatch(Object(C.w)({id:t.props.display.id,blockRendererId:t.props.blockRendererId,display:r.concat(e)}))}),r()})}},{key:"onDeleteValue",value:function(e){var t=this;this.onChange(this.props.value.map(function(t){return new q.ValueObjectRefs(t.id.filter(function(t){return t.value!==e.id.value}))}).getOrElse(function(){return new q.ValueObjectRefs([])}));this.props.dataInput.map(function(e){return e.formRecords}).getOrElse(function(){return[]}).filter(function(t){return t.id.value===e.id.value});return this.props.displayValues.foreach(function(r){t.props.dispatch(Object(C.w)({id:t.props.display.id,blockRendererId:t.props.blockRendererId,display:r.filter(function(t){return t.id.value!==e.id.value})}))}),new Promise(function(e,t){return e()})}},{key:"render",value:function(){var e=this,t=(this.props.error,this.props.dataInput.flatMap(function(t){return e.props.value.map(function(e){return t.displayValues.filter(function(t){return Object(O.a)(e.id.map(function(e){return e.value}),t.id.value)})})}).getOrElse(function(){return[]}).filter(function(e){return e instanceof C.t}));return p.createElement("div",null,p.createElement(R.a,{onClick:this.onAddClick,style:{marginRight:"5px"}},this.props.i18n.t("Редактировать")),p.createElement("div",{className:"TagsListControl"},t.map(function(t,r){var n=t.formRecord.entity.attributes.status.tpe.value===q.FormDataStatusDeleted.$Type.value||t.formRecord.entity.attributes.status.tpe.value===q.FormDataStatusNominalDeleted.$Type.value,o=e.props.control.valueField.flatMap(function(e){return Object(h.liftKey)(t.formRecord.entity.values,e.value)}).map(function(e){return e.value.toString()}).getOrElse(function(){return e.props.i18n.t("Не указано поле значения")}),a=e.props.control.colorField.flatMap(function(e){return Object(h.toOption)(t.formRecord.entity.values[e.value])}).map(function(e){return e.value.toString()}).getOrElse(function(){return"#ССС"});return n||p.createElement(T.b,{key:t.id.value,color:a,labelStyle:Object(T.a)(e.props.control.style)},o)}),p.createElement(L.a,{display:this.props.display,error:this.props.error,blockStyle:this.props.blockStyle}),p.createElement(I.a,{fullWidth:!0,open:this.state.dialog.open,title:this.state.dialog.title.getOrElse(function(){return""}),onClose:this.handleDialogClose},p.createElement(x.a,{style:{borderBottom:"none"}},this.state.dialog.title.getOrElse(function(){return""})),p.createElement(F.a,null,this.state.dialog.body.getOrElse(function(){return p.createElement("div",null)})),p.createElement(M.a,{style:{borderTop:"none"}},this.state.dialog.actions))))}}]),t}(p.Component);B=N([k.autobind,z("design:paramtypes",[Object])],B);var J=Object(d.connect)(function(e,t){return{i18n:e.i18n,fields:e.fields,value:Object(D.d)(e.dataOutput,t.blockRendererId,t.output).map(function(e){return e.value}).filter(function(e){return e.tpe.value===q.ValueObjectRefs.$Type.value}),dataInput:Object(_.b)(e.dataInputs,t.display.id),displayValues:Object(D.h)(e.dataOutput,t.blockRendererId,t.display.id),displayValuesFetching:Object(D.i)(e.dataOutput,t.blockRendererId,t.display.id),error:Object(D.m)(e.dataOutput,t.blockRendererId,t.display.id)}},function(e,t){return{dispatch:e}},function(e,t,r){return Object.assign({},e,t,r)},{areStatesEqual:function(e,t){return e.fields.list===t.fields.list&&e.i18n===t.i18n&&e.dataOutput===t.dataOutput&&e.dataInputs===t.dataInputs},areStatePropsEqual:function(e,t){return e.i18n===t.i18n&&Object(h.isEqual)(e.value,t.value)&&Object(h.isEqual)(e.dataInput,t.dataInput)&&Object(h.isEqual)(e.displayValues,t.displayValues)&&Object(h.isEqual)(e.displayValuesFetching,t.displayValuesFetching)&&Object(h.isEqual)(e.error,t.error)},areOwnPropsEqual:function(e,t){return e.blockRendererId===t.blockRendererId&&e.formId.value===t.formId.value&&e.display===t.display&&e.objRefFormId.value===t.objRefFormId.value&&Object(h.isEqual)(e.parentRecordId,e.parentRecordId)}})(B),K=function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":g()(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i},W=function(e){function t(){return o()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s()(t,e),i()(t,[{key:"render",value:function(){var e=this,t=this.props.error,r=this.props.dataInput.flatMap(function(t){return e.props.value.map(function(e){return t.displayValues.filter(function(t){return Object(O.a)(e.id.map(function(e){return e.value}),t.id.value)})})}).getOrElse(function(){return[]}).filter(function(e){return e instanceof C.t});return p.createElement("div",{className:"TagsListControl"},r.map(function(t,r){var n=t.formRecord.entity.attributes.status.tpe.value===q.FormDataStatusDeleted.$Type.value||t.formRecord.entity.attributes.status.tpe.value===q.FormDataStatusNominalDeleted.$Type.value,o=e.props.control.valueField.flatMap(function(e){return Object(h.liftKey)(t.formRecord.entity.values,e.value)}).map(function(e){return e.value.toString()}).getOrElse(function(){return e.props.i18n.t("Не указано поле значения")}),a=e.props.control.colorField.flatMap(function(e){return Object(h.toOption)(t.formRecord.entity.values[e.value])}).map(function(e){return e.value.toString()}).getOrElse(function(){return"#ССС"});return n||p.createElement(T.b,{key:t.id.value,color:a,labelStyle:Object(T.a)(e.props.control.style)},o)}),p.createElement("p",{style:{color:"rgb(244, 67, 54)"}},t.getOrElse(function(){return""})))}}]),t}(p.Component);W=K([k.autobind],W);var G=Object(d.connect)(function(e,t){return{i18n:e.i18n,value:Object(D.d)(e.dataOutput,t.blockRendererId,t.output).map(function(e){return e.value}).filter(function(e){return e.tpe.value===q.ValueObjectRefs.$Type.value}),dataInput:Object(_.b)(e.dataInputs,t.display.id),error:Object(D.m)(e.dataOutput,t.blockRendererId,t.display.id)}},function(e,t){return{}},function(e,t,r){return Object.assign({},e,t,r)},{areStatesEqual:function(e,t){return e.dataOutput===t.dataOutput&&e.dataInputs===t.dataInputs&&e.i18n===t.i18n},areStatePropsEqual:function(e,t){return e.i18n==e.i18n&&Object(h.isEqual)(e.value,t.value)&&Object(h.isEqual)(e.dataInput,t.dataInput)&&Object(h.isEqual)(e.error,t.error)}})(W),H=r(1452),Q=r(620),U=r(1458),X={flex:"1"},Y=function(e){function t(){return o()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s()(t,e),i()(t,[{key:"renderDisplayControl",value:function(){var e=this;return this.props.display.dataInput.map(function(t){return p.createElement(H.a,{display:e.props.display,style:X,blockStyle:e.props.blockStyle},p.createElement(G,{display:e.props.display,blockRendererId:e.props.blockRendererId,control:e.props.control,output:e.props.output,formId:e.props.formId}))}).getOrElse(function(){return p.createElement("div",null,e.props.i18n.t("Не задано поле поставщик данных"))})}},{key:"renderEditControl",value:function(){var e=this;return this.props.display.dataInput.map(function(t){return p.createElement(H.a,{display:e.props.display,style:X,blockStyle:e.props.blockStyle},e.props.objRefFormId.map(function(r){return p.createElement(J,{display:e.props.display,blockRendererId:e.props.blockRendererId,objRefFormId:r,blockId:e.props.blockId,control:e.props.control,input:t,output:e.props.output,formId:e.props.formId,parentRecordId:e.props.parentRecordId,onChange:e.props.onChange,blockStyle:e.props.blockStyle})}).getOrElse(function(){return p.createElement("div",null)}))}).getOrElse(function(){return p.createElement("div",null,e.props.i18n.t("Не задано поле поставщик данных"))})}},{key:"renderEditByClickControl",value:function(){return p.createElement("div",null,this.props.i18n.t("Компонент для редактирования по клику не задан"))}}]),t}(b.a);t.default=Object(d.connect)(function(e,t){return{i18n:e.i18n,objRefFormId:Object(f.d)(e,t.formId,t.output.formField).map(function(e){return e.entity.valueType.family})}},function(e,t){return{dispatch:e}},function(e,t,r){return Object.assign({},e,t,r)},{areStatesEqual:function(e,t){return e.fields.list===t.fields.list&&e.i18n===t.i18n&&e.dataOutput===t.dataOutput},areStatePropsEqual:function(e,t){return e.i18n===t.i18n&&Object(h.isEqual)(e.objRefFormId,t.objRefFormId)},areOwnPropsEqual:function(e,t){return e.blockRendererId===t.blockRendererId&&e.formId.value===t.formId.value&&e.display===t.display&&e.blockType===t.blockType&&Object(h.isEqual)(e.parentRecordId,e.parentRecordId)&&Object(h.isEqual)(e.blockStyle,e.blockStyle)}})(Object(Q.a)([function(e){e.dispatch(Object(U.e)(e.blockRendererId,e.display,e.formId))}])(Y))}}]);