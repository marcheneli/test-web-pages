(window.webpackJsonpwww=window.webpackJsonpwww||[]).push([[68],{2252:function(e,t,n){var r=n(2253);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(121)(r,o);r.locals&&(e.exports=r.locals)},2253:function(e,t,n){(e.exports=n(120)(!1)).push([e.i,".AccountProfileSettings {\n  display: flex;\n  height: 100%; }\n\n.AccountProfileSettings__menu {\n  width: 256px;\n  margin: 4px 4px 4px 0;\n  height: fit-content; }\n\n.AccountProfileSettings__content {\n  flex: 1;\n  margin: 4px 0 4px 4px; }\n",""])},2751:function(e,t,n){"use strict";n.r(t);var r=n(6),o=n.n(r),i=n(10),a=n.n(i),c=n(7),u=n.n(c),s=n(8),l=n.n(s),p=n(11),f=n.n(p),h=n(2),m=n(13),d=n(14),g=n(160),y=n.n(g),v=n(52),b=n.n(v),w=n(218),E=n.n(w),O=n(19),P=n.n(O),S=n(1467),j=n(136),k=n(1461),A=n(98),C=n.n(A),R=n(107),_=n.n(R),x=n(54),M=n.n(x),D=n(93),N=n.n(D),T=n(3),F=(n(2252),n(2035)),B=n(2036),I=n(2042),J=n(2043),V=n(547),$=n(71),z=n(1),H=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},q=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},G=0,K=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={activeMenu:G},n}return l()(t,e),a()(t,[{key:"handleMenuSelect",value:function(e){this.setState(T(this.state,{activeMenu:{$set:e}}))}},{key:"onPasswordSave",value:function(e){var t=this;return new Promise(function(n,r){Object(V.h)(e.newPassword).then(function(e){t.props.dispatch(Object(V.a)()),t.props.dispatch(Object($.h)(t.props.i18n.t("Изменения успешно сохранены")))})})}},{key:"onSecuritySave",value:function(e){var t=this;return new Promise(function(n,r){Object(V.e)(e.twoFactorAuthentication?new z.AuthTypeTwoFactor(!!e.twoFactorAuthenticationBySms,!0):new z.AuthTypeNormal).then(function(e){t.props.dispatch(Object(V.a)()),t.props.dispatch(Object($.h)(t.props.i18n.t("Изменения успешно сохранены")))})})}},{key:"onPersonalSettingsSave",value:function(e){var t=this;return new Promise(function(n,r){var o=t.props.accountName.map(function(t){return t!==e.name}),i=t.props.accountEmail.map(function(t){return t!==e.email});Promise.all([o.filter(function(e){return e}).map(function(t){return Object(V.g)(e.name)}).getOrElse(function(){return new Promise(function(e,t){return t()})}),i.filter(function(e){return e}).map(function(t){return Object(V.f)(e.email)}).getOrElse(function(){return new Promise(function(e,t){return t()})})]).then(function(e){t.props.dispatch(Object(V.a)()),t.props.dispatch(Object($.h)(t.props.i18n.t("Изменения успешно сохранены")))})})}},{key:"renderContent",value:function(){switch(this.state.activeMenu){case G:return h.createElement(F.a,{onSubmit:this.onPersonalSettingsSave,initialValues:{name:this.props.accountName.getOrElse(function(){return""}),email:this.props.accountEmail.getOrElse(function(){return""})}});case 2:return h.createElement(I.a,{onSubmit:this.onPasswordSave});case 3:return h.createElement(J.a,{onSubmit:this.onSecuritySave,initialValues:{twoFactorAuthentication:this.props.twoFactorAuthentication}});case 1:return h.createElement(B.a,{handleDialogClose:this.props.handleDialogClose,openDialog:this.props.openDialog});default:throw new Error("unknown content id")}}},{key:"render",value:function(){var e=this;return h.createElement("div",{className:"AccountProfileSettings"},h.createElement(N.a,{className:"AccountProfileSettings__menu"},h.createElement(C.a,null,h.createElement(_.a,{button:!0,onClick:function(){return e.handleMenuSelect(G)},style:this.state.activeMenu===G?{backgroundColor:"#ccc"}:{}},h.createElement(M.a,{primary:this.props.i18n.t("Пресональные данные")})),h.createElement(_.a,{button:!0,onClick:function(){return e.handleMenuSelect(2)},style:2===this.state.activeMenu?{backgroundColor:"#ccc"}:{}},h.createElement(M.a,{primary:this.props.i18n.t("Настройки пароля")})),h.createElement(_.a,{button:!0,onClick:function(){return e.handleMenuSelect(3)},style:3===this.state.activeMenu?{backgroundColor:"#ccc"}:{}},h.createElement(M.a,{primary:this.props.i18n.t("Настройки безопасности")})),h.createElement(_.a,{button:!0,onClick:function(){return e.handleMenuSelect(1)},style:1===this.state.activeMenu?{backgroundColor:"#ccc"}:{}},h.createElement(M.a,{primary:this.props.i18n.t("Профили соцсетей")})))),h.createElement(N.a,{className:"AccountProfileSettings__content"},this.renderContent()))}}]),t}(h.Component);K=H([m.autobind,q("design:paramtypes",[Object])],K);var L=Object(d.connect)(function(e){return{i18n:e.i18n,organisation:e.organisation,organisations:e.organisations,accountName:e.account.profile.map(function(e){return e.name}),accountEmail:e.account.profile.map(function(e){return e.email}),twoFactorAuthentication:e.account.profile.map(function(e){return e.authType.tpe.value===z.AuthTypeTwoFactor.$Type.value}).getOrElse(function(){return!1})}})(K),Q=n(79),U=(n(2044),function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}),W=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},X=function(e){function t(e){return o()(this,t),u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,S.a.screenInitialState()))}return l()(t,e),a()(t,[{key:"renderNavigation",value:function(){return h.createElement("div",null)}},{key:"openOrganisationsPage",value:function(){this.props.dispatch(Object(Q.tb)())}},{key:"render",value:function(){this.props.i18n;return this.renderScreenBody({className:"AccountProfilePage"},h.createElement("div",null,h.createElement(E.a,{className:"AccountProfilePage-nav"},h.createElement(P.a,{onClick:this.openOrganisationsPage},this.props.i18n.t("К списку организации")),h.createElement("div",{style:{flex:1,textAlign:"center"}},this.props.account.profile.isEmpty()?h.createElement(y.a,{style:{marginTop:"6px"},size:36}):h.createElement(b.a,{variant:"title",style:{lineHeight:"48px"}},this.props.i18n.t("Профиль")+" - "+this.props.account.profile.map(function(e){return e.name}).getOrElse(function(){return""})))),h.createElement(L,{openDialog:this.openDialog,handleDialogClose:this.handleDialogClose})))}}]),t}(S.a);X=U([m.autobind,W("design:paramtypes",[Object])],X);t.default=Object(d.connect)(function(e){return{i18n:e.i18n,account:e.account}})(Object(k.a)(Object(j.a)(function(e){})(X)))}}]);