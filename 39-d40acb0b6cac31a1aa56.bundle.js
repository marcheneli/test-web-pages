(window.webpackJsonpwww=window.webpackJsonpwww||[]).push([[39],{1459:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return c});var r=n(79),i=n(104),o=n(82),a=function(){return function(e,t){return e(o.default.isA5000?Object(r.Mb)():Object(r.h)())}},c=function(e,t){return function(n,o){return o().eventLine.data.foreach(function(a){Object(i.e)(o().forms,e).foreach(function(i){n(Object(r.H)(a.id,i.entity.formType.getFormTypeId(),e,t))})})}}},1461:function(e,t,n){"use strict";var r=n(6),i=n.n(r),o=n(10),a=n.n(o),c=n(7),l=n.n(c),s=n(8),u=n.n(s),d=n(2),p=n(14),f=n(1469),h=n(1459),m=n(320),g=n(69),v=n(0),b=n(624);t.a=function(e){return Object(p.connect)(function(e){return{auth:e.auth,websocket:e.websocket,routing:e.routing}})(function(e){return function(t){function n(){return i()(this,n),l()(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return u()(n,t),a()(n,[{key:"componentWillMount",value:function(){var e=this;this.props.auth.signedOut||this.props.websocket.active&&(this.props.auth.checking||this.props.auth.checked&&this.props.auth.signedIn||this.props.auth.signingIn||this.props.auth.signedIn||Object(v.toOption)(this.props.routing.location).map(function(t){Object(v.liftKey)(Object(b.a)(t.search),"token").map(function(t){t.map(function(t){e.props.dispatch(Object(f.d)(t)).catch(function(t){e.signOut()})})}).getOrElse(function(){e.props.auth.token.map(function(t){e.props.dispatch(Object(f.d)(t)).catch(function(t){e.signOut()})}).getOrElse(function(){e.signOut()})})}))}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.auth.signedOut||e.websocket.active&&(e.auth.checking||(e.auth.checked&&e.auth.signedIn||e.auth.signingIn||e.auth.signedIn)&&(!e.websocket.active||this.props.websocket.active)||e.auth.token.map(function(n){e.dispatch(Object(f.d)(n)).catch(function(e){t.signOut()})}).getOrElse(function(){t.signOut()}))}},{key:"signOut",value:function(){this.props.dispatch(Object(g.r)()),this.props.dispatch(Object(m.c)()),this.props.dispatch(Object(h.b)())}},{key:"render",value:function(){return this.props.auth.signedIn&&!this.props.auth.signingIn?d.createElement(e,this.props):d.createElement("div",null)}}]),n}(d.Component)}(e))}},1462:function(e,t,n){"use strict";var r=n(855);Object.defineProperty(t,"__esModule",{value:!0});var i={};Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o.default}});var o=r(n(1464));Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))})},1463:function(e,t,n){"use strict";var r=n(855),i=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(36)),a=i(n(2)),c=(i(n(31)),r(n(1462))),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var n=e.breakpoint,r=void 0===n?"sm":n;return(0,c.default)()(function(e){return a.default.createElement(t,(0,o.default)({fullScreen:(0,c.isWidthDown)(r,e.width)},e))})}};t.default=l},1464:function(e,t,n){"use strict";var r=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.isWidthDown=t.isWidthUp=void 0;var i=r(n(36)),o=r(n(39)),a=r(n(73)),c=r(n(74)),l=r(n(76)),s=r(n(77)),u=r(n(78)),d=r(n(2)),p=(r(n(31)),r(n(217))),f=r(n(373)),h=(n(61),r(n(539))),m=r(n(263)),g=n(859),v=r(n(860));t.isWidthUp=function(e,t){return arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?g.keys.indexOf(e)<g.keys.indexOf(t):g.keys.indexOf(e)<=g.keys.indexOf(t)};t.isWidthDown=function(e,t){return arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?g.keys.indexOf(t)<g.keys.indexOf(e):g.keys.indexOf(t)<=g.keys.indexOf(e)};var b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var n=e.withTheme,r=void 0!==n&&n,b=e.noSSR,y=void 0!==b&&b,O=e.initialWidth,E=e.resizeInterval,k=void 0===E?166:E,j=function(e){function n(e){var t;return(0,a.default)(this,n),(t=(0,l.default)(this,(0,s.default)(n).call(this,e))).state={width:y?t.getWidth():void 0},"undefined"!=typeof window&&(t.handleResize=(0,f.default)(function(){var e=t.getWidth();e!==t.state.width&&t.setState({width:e})},k)),t}return(0,u.default)(n,e),(0,c.default)(n,[{key:"componentDidMount",value:function(){var e=this.getWidth();e!==this.state.width&&this.setState({width:e})}},{key:"componentWillUnmount",value:function(){this.handleResize.clear()}},{key:"getWidth",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.innerWidth,t=this.props.theme.breakpoints,n=null,r=1;null===n&&r<g.keys.length;){var i=g.keys[r];if(e<t.values[i]){n=g.keys[r-1];break}r+=1}return n=n||"xl"}},{key:"render",value:function(){var e=(0,v.default)({theme:this.props.theme,name:"MuiWithWidth",props:(0,i.default)({},this.props)}),n=e.initialWidth,a=e.theme,c=e.width,l=(0,o.default)(e,["initialWidth","theme","width"]),s=(0,i.default)({width:c||this.state.width||n||O},l);return void 0===s.width?null:(r&&(s.theme=a),d.default.createElement(d.default.Fragment,null,d.default.createElement(t,s),d.default.createElement(p.default,{target:"window",onResize:this.handleResize})))}}]),n}(d.default.Component);return(0,h.default)(j,t),(0,m.default)()(j)}};t.default=b},1465:function(e,t,n){"use strict";var r=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.isHorizontal=E,t.getAnchor=k,t.default=t.styles=void 0;var i=r(n(36)),o=r(n(55)),a=r(n(39)),c=r(n(73)),l=r(n(74)),s=r(n(76)),u=r(n(77)),d=r(n(78)),p=r(n(2)),f=(r(n(31)),r(n(47))),h=r(n(625)),m=r(n(38)),g=r(n(858)),v=r(n(93)),b=n(110),y=n(321),O={left:"right",right:"left",top:"down",bottom:"up"};function E(e){return-1!==["left","right"].indexOf(e.anchor)}function k(e){return"rtl"===e.theme.direction&&E(e)?O[e.anchor]:e.anchor}var j=function(e){return{root:{},docked:{flex:"0 0 auto"},paper:{overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:e.zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:"none"},paperAnchorLeft:{left:0,right:"auto"},paperAnchorRight:{left:"auto",right:0},paperAnchorTop:{top:0,left:0,bottom:"auto",right:0,height:"auto",maxHeight:"100%"},paperAnchorBottom:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},paperAnchorDockedLeft:{borderRight:"1px solid ".concat(e.palette.divider)},paperAnchorDockedTop:{borderBottom:"1px solid ".concat(e.palette.divider)},paperAnchorDockedRight:{borderLeft:"1px solid ".concat(e.palette.divider)},paperAnchorDockedBottom:{borderTop:"1px solid ".concat(e.palette.divider)},modal:{}}};t.styles=j;var C=function(e){function t(){var e,n;(0,c.default)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=(0,s.default)(this,(e=(0,u.default)(t)).call.apply(e,[this].concat(i)))).mounted=!1,n}return(0,d.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"render",value:function(){var e=this.props,t=(e.anchor,e.BackdropProps),n=e.children,r=e.classes,c=e.className,l=e.elevation,s=e.ModalProps,u=(s=void 0===s?{}:s).BackdropProps,d=(0,a.default)(s,["BackdropProps"]),m=e.onClose,y=e.open,E=e.PaperProps,j=e.SlideProps,C=(e.theme,e.transitionDuration),P=e.variant,_=(0,a.default)(e,["anchor","BackdropProps","children","classes","className","elevation","ModalProps","onClose","open","PaperProps","SlideProps","theme","transitionDuration","variant"]),F=k(this.props),w=p.default.createElement(v.default,(0,i.default)({elevation:"temporary"===P?l:0,square:!0,className:(0,f.default)(r.paper,r["paperAnchor".concat((0,b.capitalize)(F))],(0,o.default)({},r["paperAnchorDocked".concat((0,b.capitalize)(F))],"temporary"!==P))},E),n);if("permanent"===P)return p.default.createElement("div",(0,i.default)({className:(0,f.default)(r.root,r.docked,c)},_),w);var I=p.default.createElement(g.default,(0,i.default)({in:y,direction:O[F],timeout:C,appear:this.mounted},j),w);return"persistent"===P?p.default.createElement("div",(0,i.default)({className:(0,f.default)(r.root,r.docked,c)},_),I):p.default.createElement(h.default,(0,i.default)({BackdropProps:(0,i.default)({},t,u,{transitionDuration:C}),className:(0,f.default)(r.root,r.modal,c),open:y,onClose:m},_,d),I)}}]),t}(p.default.Component);C.defaultProps={anchor:"left",elevation:16,open:!1,transitionDuration:{enter:y.duration.enteringScreen,exit:y.duration.leavingScreen},variant:"temporary"};var P=(0,m.default)(j,{name:"MuiDrawer",flip:!1,withTheme:!0})(C);t.default=P},1473:function(e,t,n){"use strict";var r=n(12);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(1463))},1474:function(e,t,n){"use strict";var r=n(12);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(1465))},1476:function(e,t,n){"use strict";var r=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(2)),o=(0,r(n(44)).default)(i.default.createElement(i.default.Fragment,null,i.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),i.default.createElement("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})),"ArrowBack");t.default=o},1477:function(e,t,n){"use strict";var r=n(17),i=n(21),o=n(6),a=n.n(o),c=n(7),l=n.n(c),s=n(8),u=n.n(s),d=n(18),p=function(e){function t(e){return a()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Documents","Create",{document:e}))}return u()(t,e),t}(d.a),f=function(e){function t(e){return a()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Documents","Update",{document:e}))}return u()(t,e),t}(d.a),h=function(e){function t(e){return a()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Documents","Delete",{id:e}))}return u()(t,e),t}(d.a),m=function(e){function t(e){return a()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Documents","List",{form:e}))}return u()(t,e),t}(d.a),g=function(e){function t(e,n){return a()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Documents","ListFormData",{formId:e,formDataId:n}))}return u()(t,e),t}(d.a),v=function(e){function t(e){return a()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Documents","ListIds",{ids:e}))}return u()(t,e),t}(d.a),b=n(193);n.d(t,"c",function(){return y}),n.d(t,"d",function(){return O}),n.d(t,"e",function(){return E}),n.d(t,"f",function(){return k}),n.d(t,"a",function(){return j}),n.d(t,"b",function(){return C});var y=function(e){return function(t){return t(Object(b.q)(e)),r.a.send(new m(e),Object(i.g)()).then(function(n){return t(Object(b.r)({formId:e,documents:n.list})),n}).catch(function(n){throw t(Object(b.p)({formId:e,error:n})),n})}},O=function(e){return function(t){return t(Object(b.k)()),r.a.send(new v(e),Object(i.g)()).then(function(e){return t(Object(b.l)(e.list)),e}).catch(function(e){throw t(Object(b.j)(e)),e})}},E=function(e,t){return function(n){return n(Object(b.n)(t)),r.a.send(new g(e,t),Object(i.g)()).then(function(e){return n(Object(b.o)({formDataId:t,documents:e.list})),e}).catch(function(e){throw n(Object(b.m)({formDataId:t,error:e})),e})}},k=function(e){return r.a.send(new f(e),Object(i.f)())},j=function(e){return r.a.send(new p(e),Object(i.f)())},C=function(e){return r.a.send(new h(e),Object(i.f)())}},1478:function(e,t,n){"use strict";var r=n(6),i=n.n(r),o=n(10),a=n.n(o),c=n(7),l=n.n(c),s=n(8),u=n.n(s),d=n(2),p=n(218),f=n.n(p),h=n(25),m=n.n(h),g=n(1476),v=n.n(g),b=(n(1481),n(52)),y=n.n(b),O=function(e){function t(){return i()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),a()(t,[{key:"render",value:function(){return d.createElement(f.a,{className:"PageHeader__main"},this.props.onGoBackRequested?d.createElement(m.a,{onClick:this.props.onGoBackRequested,style:{flexShrink:0}},d.createElement(v.a,null)):d.createElement("div",{style:{display:"inline-block"}}),d.createElement(y.a,{variant:"title",align:"center",style:{flex:1}},this.props.title),d.createElement("div",{style:{flexShrink:0}},this.props.rightButtonGroup))}}]),t}(d.Component);t.a=O},1481:function(e,t,n){var r=n(1482);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(121)(r,i);r.locals&&(e.exports=r.locals)},1482:function(e,t,n){(e.exports=n(120)(!1)).push([e.i,".PageHeader__main {\n  display: flex;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  margin-bottom: 10px;\n  background-color: #fff !important;\n  height: 48px !important;\n  width: 100% !important;\n  flex-shrink: 0;\n  padding: 0; }\n",""])},1487:function(e,t,n){"use strict";var r=n(6),i=n.n(r),o=n(10),a=n.n(o),c=n(7),l=n.n(c),s=n(8),u=n.n(s),d=n(4),p=n.n(d),f=n(2),h=n(24),m=n.n(h),g=n(38),v=n.n(g),b=n(1),y=n(46),O=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n};function E(e){var t=e.selected?p()({},function(e){if(!e.tabsPosition)return"borderRight";switch(e.tabsPosition.tpe.value){case b.TabsPositionLeft.$Type.value:return"borderRight";case b.TabsPositionRight.$Type.value:return"borderLeft";default:return"borderRight"}}(e),"2px solid"):{};return{root:Object.assign({},t)}}var k=function(e){function t(){i()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.handleClick=function(t){t.preventDefault(),t.stopPropagation(),e.props.onClick&&e.props.onClick(e.props.value,t,e)},e.getColorByMuiTheme=function(e){var t=e.flatMap(function(e){return e.color}).getOrElse(function(){return"primary"}),n=e.flatMap(function(e){return e.palette}),r=e.flatMap(function(e){return e.selectable});switch(t){case"secondary":return[{color:n.map(function(e){return e.secondaryColor}).getOrElse(function(){return y.c})},{color:y.b}];case"custom":return[{color:r.map(function(e){return e.afterSelect}).getOrElse(function(){return y.a})},{color:r.map(function(e){return e.beforeSelect}).getOrElse(function(){return y.c})}];case"primary":default:return[{color:n.map(function(e){return e.primaryColor}).getOrElse(function(){return y.a})},{color:y.b}]}},e}return u()(t,e),a()(t,[{key:"render",value:function(){var e=this.props,t=e.icon,n=(e.index,e.onActive,e.onClick,e.selected),r=e.label,i=e.buttonStyle,o=e.style,a=(e.value,e.width,e.classes),c=(e.tabsPosition,e.elementMuiTheme),l=O(e,["icon","index","onActive","onClick","selected","label","buttonStyle","style","value","width","classes","tabsPosition","elementMuiTheme"]),s=E(this.props),u=void 0;if(t&&f.isValidElement(t)&&(u=f.cloneElement(t,{style:{fontSize:24,color:t.props&&t.props.style&&t.props.style.color?t.props.style.color:"#fff",marginBottom:r?5:0}})),c){var d=this.getColorByMuiTheme(c),p=n?d[0]:d[1];return f.createElement(m.a,Object.assign({},l,{style:Object.assign(s.root,o,p),onClick:this.handleClick}),f.createElement("div",{style:Object.assign({},i,p)},u,r))}return f.createElement(m.a,Object.assign({},l,{style:Object.assign(s.root,o),onClick:this.handleClick}),f.createElement("div",{style:i,className:n?a.root:a.default},u,r))}}]),t}(f.Component);k.muiName="Tab",k.propTypes={},k.contextTypes={},t.a=v()(function(e){return{default:{color:e.palette.text.secondary},root:{color:e.palette.primary.main}}})(k)},1488:function(e,t,n){"use strict";var r=n(6),i=n.n(r),o=n(10),a=n.n(o),c=n(7),l=n.n(c),s=n(8),u=n.n(s),d=n(4),p=n.n(d),f=n(2),h=n(62),m=n.n(h),g=n(1),v=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n};function b(e){if(!e.tabsPosition)return"borderRight";switch(e.tabsPosition.tpe.value){case g.TabsPositionLeft.$Type.value:return"borderRight";case g.TabsPositionRight.$Type.value:return"borderLeft";default:return"borderRight"}}var y=function(e){function t(){i()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.state={selectedIndex:0},e.handleTabClick=function(t,n,r){n.preventDefault();var i=e.getValueLink(e.props),o=r.props.index;(i.value&&i.value!==t||e.state.selectedIndex!==o)&&i.requestChange(t,n,r),e.setState({selectedIndex:o}),r.props.onActive&&r.props.onActive(r)},e}return u()(t,e),a()(t,[{key:"componentWillMount",value:function(){var e=this.getValueLink(this.props),t=this.props.initialSelectedIndex||0;this.setState({selectedIndex:void 0!==e.value?this.getSelectedIndex(this.props):t<this.getTabCount()?t:0})}},{key:"componentWillReceiveProps",value:function(e,t){}},{key:"getTabs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=[];return f.Children.forEach(e.children,function(e){f.isValidElement(e)&&t.push(e)}),t}},{key:"getTabCount",value:function(){return this.getTabs().length}},{key:"getValueLink",value:function(e){return e.valueLink||{value:e.value,requestChange:e.onChange}}},{key:"getSelectedIndex",value:function(e){var t=this.getValueLink(e),n=-1;return this.getTabs(e).forEach(function(e,r){t.value===e.props.value&&(n=r)}),n}},{key:"getSelected",value:function(e,t){var n=this.getValueLink(this.props);return n.value?n.value===e.props.value:this.state.selectedIndex===t}},{key:"getTabContent",value:function(e,t,n,r){return t.push(e.props.children?f.createElement(n||O,{key:r,selected:this.getSelected(e,r)},e.props.children):void 0)}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.contentContainerClassName,i=n.contentContainerStyle,o=(n.initialSelectedIndex,n.onChange,n.style),a=n.tabItemContainerStyle,c=n.tabTemplate,l=n.prerenderTabContainers,s=n.menuTopChildren,u=n.menuBottomChildren,d=(n.tabsPosition,v(n,["contentContainerClassName","contentContainerStyle","initialSelectedIndex","onChange","style","tabItemContainerStyle","tabTemplate","prerenderTabContainers","menuTopChildren","menuBottomChildren","tabsPosition"])),h=(e=this.props,{wrapper:{display:"flex",height:"100%",width:"100%"},tabItemContainer:p()({display:"flex",flexDirection:"column",flex:"0 0 150px",margin:"4px 4px 4px 0"},b(e),"1px solid ".concat(m.a[300])),tabMenuItemContainer:{display:"flex",flexDirection:"column",flex:"0 0 150px",margin:"4px 4px 4px 0"},tabContentContainer:{flex:1,margin:"4px 0 4px 4px"}}),g=(this.getValueLink(this.props).value,[]),y=100/this.getTabCount(),O=this.getTabs().map(function(e,n){return l?t.getTabContent(e,g,c,n):t.getSelected(e,n)&&t.getTabContent(e,g,c,n),f.cloneElement(e,{key:n,index:n,selected:t.getSelected(e,n),width:y+"%",onClick:t.handleTabClick})});return f.createElement("div",Object.assign({style:Object.assign(h.wrapper,o)},d),!this.props.tabItemContainerOnRight&&f.createElement("div",{style:Object.assign(h.tabItemContainer,a)},f.createElement("div",null,s),O,f.createElement("div",null,u)),f.createElement("div",{style:Object.assign(h.tabContentContainer,i),className:r},g),this.props.tabItemContainerOnRight&&f.createElement("div",{style:Object.assign(h.tabItemContainer,a)},f.createElement("div",null,s),O,f.createElement("div",null,u)))}}]),t}(f.Component);y.defaultProps={initialSelectedIndex:0,onChange:function(){}},y.contextTypes={};var O=function(e){function t(){return i()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),a()(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.selected,r=e.style,i=Object.assign({},r,{display:"flex",height:"100%"});return n||(i.height=0,i.overflow="hidden"),f.createElement("div",{style:i},t)}}]),t}(f.PureComponent);t.a=y},1509:function(e,t,n){"use strict";n(244);var r=n(17),i=n(6),o=n.n(i),a=n(7),c=n.n(a),l=n(8),s=n.n(l),u=n(18),d=(function(e){function t(){return o()(this,t),c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Export.Config","List",{}))}s()(t,e)}(u.a),function(e){function t(e){return o()(this,t),c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Export.Config","ListForm",{formId:e}))}s()(t,e)}(u.a),function(e){function t(e){return o()(this,t),c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Export.Config","ListFormDescriptions",{formId:e}))}return s()(t,e),t}(u.a)),p=function(e){function t(e){return o()(this,t),c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Export.Config","Update",{config:e}))}return s()(t,e),t}(u.a),f=function(e){function t(e){return o()(this,t),c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Export.Config","Create",{config:e}))}return s()(t,e),t}(u.a),h=function(e){function t(e){return o()(this,t),c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Export.Config","Delete",{configId:e}))}return s()(t,e),t}(u.a),m=function(e){function t(e){return o()(this,t),c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Export.Config","Request",{configId:e}))}return s()(t,e),t}(u.a),g=n(21);n.d(t,"c",function(){return v}),n.d(t,"e",function(){return b}),n.d(t,"d",function(){return y}),n.d(t,"a",function(){return O}),n.d(t,"b",function(){return E});var v=function(e){return r.a.send(new d(e),function(e){return e})},b=function(e){return r.a.send(new p(e),Object(g.f)())},y=function(e){return r.a.send(new m(e),Object(g.e)())},O=function(e){return r.a.send(new f(e),Object(g.f)())},E=function(e){return r.a.send(new h(e),g.d)}},1512:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return c});var r=n(244),i=n(1509),o=n(87),a=function(e){return function(t,n){return t(Object(r.h)({form:e})),i.c(e).then(function(n){return t(Object(r.i)({form:e,resolved:n})),n}).catch(function(n){throw t(Object(r.g)({form:e,error:n})),n})}},c=function(e){return function(t){return t(Object(o.b)(function(e){return!e.exportPipelines.descriptionsFetching&&e.exportPipelines.descriptionsFetching},a(e)))}}},1775:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return c});var r=n(483),i=n(553),o=n(672),a=function(e){return function(t){return t(Object(r.e)()),i.e(e).then(function(e){return t(Object(r.f)(e.record)),e.record}).catch(function(e){throw t(Object(r.d)(e)),e})}},c=function(e){return function(t,n){return n().role.data.matchWith(function(e){return new Promise(function(t,n){return t(e)})},function(){return Object(o.b)(n().roles,e).matchWith(function(e){return t(Object(r.f)(e)),new Promise(function(t,n){return t(e)})},function(){return t(a(e))})})}}},2356:function(e,t,n){var r=n(2357);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(121)(r,i);r.locals&&(e.exports=r.locals)},2357:function(e,t,n){(e.exports=n(120)(!1)).push([e.i,".FieldsTab__row {\n  display: flex;\n  justify-content: space-between;\n  align-items: center; }\n  .FieldsTab__row-heading {\n    margin-bottom: 10px; }\n\n.FieldsTab__field {\n  color: black; }\n\n.FieldsTab__param {\n  width: 50%;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  align-items: center; }\n\n.FieldsTab__params {\n  width: 250px;\n  display: flex; }\n",""])},2358:function(e,t,n){var r=n(2359);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(121)(r,i);r.locals&&(e.exports=r.locals)},2359:function(e,t,n){(e.exports=n(120)(!1)).push([e.i,".RoleFormPage__paper {\n  display: flex;\n  flex-direction: column;\n  min-height: 0;\n  width: 100%; }\n",""])},2726:function(e,t,n){"use strict";n.r(t);var r,i=n(6),o=n.n(i),a=n(10),c=n.n(a),l=n(7),s=n.n(l),u=n(8),d=n.n(u),p=n(11),f=n.n(p),h=n(2),m=n(14),g=n(13),v=n(79),b=n(1),y=n(553),O=n(1775),E=n(1467),k=n(627),j=n(1478),C=n(541),P=n(425),_=n(0),F=n(136),w=n(1461),I=n(3),T=n(59),x=n(1488),R=n(1487),D=(n(2356),n(434)),S=n(160),L=n.n(S),N=n(54),M=n.n(N),B=n(30),A=n.n(B),W=n(24),q=n.n(W),$=n(34),V=n.n($),G=n(32),z=n.n(G),H=n(91),K=n(103),U=n(104),J=n(45),Q=n.n(J),X=n(33),Y=n.n(X),Z=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e[e.true=0]="true",e[e.false=1]="false",e[e.empty=2]="empty"}(r||(r={}));var ee=function(e){function t(){return o()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d()(t,e),c()(t,[{key:"handleDataListModeShowModeIconsChange",value:function(e){var t=e.target.value;this.props.dispatch(Object(H.I)({showModeIcons:t===r.empty?new _.None:Object(_.toOption)(t===r.true)}))}},{key:"handleDataListModeTableIdChange",value:function(e){var t=e.target.value;this.props.dispatch(Object(H.J)({tableId:"!empty"===t?new _.None:Object(_.toOption)(new b.DataListConfigId(t))}))}},{key:"handleDataListModeKanbanIdChange",value:function(e){var t=e.target.value;this.props.dispatch(Object(H.H)({kanbanId:"!empty"===t?new _.None:Object(_.toOption)(new b.DataListConfigId(t))}))}},{key:"handleDataListModeTasksIdChange",value:function(e){var t=e.target.value;this.props.dispatch(Object(H.K)({tasksId:"!empty"===t?new _.None:Object(_.toOption)(new b.DataListConfigId(t))}))}},{key:"handleDataListModeCalendarIdChange",value:function(e){var t=e.target.value;this.props.dispatch(Object(H.F)({calendarId:"!empty"===t?new _.None:Object(_.toOption)(new b.DataListConfigId(t))}))}},{key:"onDefaultTableChanged",value:function(e){this.props.dispatch(Object(H.G)(e.target.checked))}},{key:"render",value:function(){return h.createElement(h.Fragment,null,h.createElement("p",null,this.props.i18n.t("Настройки переключения режимов списка")),h.createElement(z.a,{fullWidth:!0,style:{marginTop:0}},h.createElement(V.a,{htmlFor:"list-config-table"},this.props.i18n.t("Таблица")),h.createElement(A.a,{value:this.props.dataListMode.tableId.map(function(e){return e.id}).getOrElse(function(){return"!empty"}),onChange:this.handleDataListModeTableIdChange,disabled:this.props.dataListMode.defaultTable},h.createElement(q.a,{key:"default",value:"!empty"}),this.props.formsFetching?h.createElement(L.a,null):this.props.form.map(function(e){return e.entity.dataListView.configs.filter(function(e){return e instanceof b.DataListConfigTable}).map(function(e){return h.createElement(q.a,{key:e.id.id,value:e.id.id},h.createElement(M.a,{primary:e.name}))})}).getOrNull())),h.createElement(Y.a,{label:this.props.i18n.t("По умолчанию"),control:h.createElement(Q.a,{checked:this.props.dataListMode.defaultTable,onChange:this.onDefaultTableChanged})}),h.createElement(z.a,{fullWidth:!0},h.createElement(V.a,null,this.props.i18n.t("Канбан")),h.createElement(A.a,{value:this.props.dataListMode.kanbanId.map(function(e){return e.id}).getOrElse(function(){return"!empty"}),onChange:this.handleDataListModeKanbanIdChange},h.createElement(q.a,{key:"default",value:"!empty"}),this.props.formsFetching?h.createElement(L.a,null):this.props.form.map(function(e){return e.entity.dataListView.configs.filter(function(e){return e instanceof b.DataListConfigKanban}).map(function(e){return h.createElement(q.a,{key:e.id.id,value:e.id.id},h.createElement(M.a,{primary:e.name}))})}).getOrNull())),h.createElement(z.a,{fullWidth:!0},h.createElement(V.a,null,this.props.i18n.t("Календарь")),h.createElement(A.a,{value:this.props.dataListMode.calendarId.map(function(e){return e.id}).getOrElse(function(){return"!empty"}),onChange:this.handleDataListModeCalendarIdChange},h.createElement(q.a,{key:"default",value:"!empty"}),this.props.formsFetching?h.createElement(L.a,null):this.props.form.map(function(e){return e.entity.dataListView.configs.filter(function(e){return e instanceof b.DataListConfigCalendar}).map(function(e){return h.createElement(q.a,{key:e.id.id,value:e.id.id},h.createElement(M.a,{primary:e.name}))})}).getOrNull())),h.createElement(z.a,{fullWidth:!0},h.createElement(V.a,null,this.props.i18n.t("Задачи")),h.createElement(A.a,{value:this.props.dataListMode.tasksId.map(function(e){return e.id}).getOrElse(function(){return"!empty"}),onChange:this.handleDataListModeTasksIdChange},h.createElement(q.a,{key:"default",value:"!empty"}),this.props.formsFetching?h.createElement(L.a,null):this.props.form.map(function(e){return e.entity.dataListView.configs.filter(function(e){return e instanceof b.DataListConfigTasks}).map(function(e){return h.createElement(q.a,{key:e.id.id,value:e.id.id},h.createElement(M.a,{primary:e.name}))})}).getOrNull())),h.createElement(z.a,{fullWidth:!0},h.createElement(V.a,null,this.props.i18n.t("Отображать кнопки переключения")),h.createElement(A.a,{value:this.props.dataListMode.showModeIcons.map(function(e){return e?r.true:r.false}).getOrElse(function(){return r.empty}),onChange:this.handleDataListModeShowModeIconsChange},h.createElement(q.a,{value:r.empty}),h.createElement(q.a,{value:r.true},this.props.i18n.t("Отображать")),h.createElement(q.a,{value:r.false},this.props.i18n.t("Не отображать")))))}}]),t}(h.Component);ee=Z([g.autobind],ee);var te,ne=Object(m.connect)(function(e,t){return{i18n:e.i18n,form:Object(U.e)(e.forms,t.formId),formsFetching:e.forms.fetching}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n},areStatePropsEqual:function(e,t){return e.i18n===t.i18n}})(ee),re=n(82),ie=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},oe=te=function(e){function t(){return o()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d()(t,e),c()(t,[{key:"handleCreateBlockChange",value:function(e){this.props.dispatch(Object(H.D)({blockId:te.getSaveBlock(e)}))}},{key:"handleGroupEditBlockChange",value:function(e){this.props.dispatch(Object(H.T)({blockId:te.getSaveBlock(e)}))}},{key:"handleViewBlockChange",value:function(e){this.props.dispatch(Object(H.Z)({blockFilterList:"!none"===e?new _.None:b.Id.createId(e).map(function(e){return new b.BlockFilterList([],e)})}))}},{key:"handleEditBlockChange",value:function(e){this.props.dispatch(Object(H.N)({blockFilterList:"!none"===e?new _.None:b.Id.createId(e).map(function(e){return new b.BlockFilterList([],e)})}))}},{key:"handleDataListConfigId",value:function(e){this.props.dispatch(Object(H.E)({configId:"!none"===e?new _.None:Object(_.toOption)(new b.DataListConfigId(e))}))}},{key:"getBlockTags",value:function(){return Object(D.a)(this.props.blockDescriptions.getOrElse(function(){return[]}).map(function(e){return e.tag}).filter(function(e){return e.nonEmpty()}).map(function(e){return e.getOrElse(function(){return""})}))}},{key:"getBlocksOptionsWithTags",value:function(){var e=this.props.blockDescriptions.getOrElse(function(){return[]});return h.createElement(h.Fragment,null,h.createElement("optgroup",{label:this.props.i18n.t("По умолчанию")},e.filter(function(e){return e.tag.isEmpty()}).map(function(e){return h.createElement("option",{key:e.id.toString(),value:e.id.toString()},e.name)})),this.getBlockTags().map(function(t){return h.createElement("optgroup",{label:t},e.filter(function(e){return e.tag.map(function(e){return e===t}).getOrElse(function(){return!1})}).map(function(e){return h.createElement("option",{key:e.id.toString(),value:e.id.toString()},e.name)}))}))}},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement("p",null,this.props.i18n.t("Настройка блока")),this.props.blockDescriptionsFetching?h.createElement(L.a,null):h.createElement("div",null,h.createElement(z.a,{fullWidth:!0},h.createElement(V.a,null,this.props.i18n.t("Создание")),h.createElement(A.a,{fullWidth:!0,native:!0,value:this.props.blocks.createBlock.map(function(e){return e.value}).getOrElse(function(){return"!none"}),onChange:function(t){return e.handleCreateBlockChange(t.target.value)}},h.createElement("option",{key:"!none",value:"!none"},""),this.getBlocksOptionsWithTags())),h.createElement(z.a,{fullWidth:!0},h.createElement(V.a,null,this.props.i18n.t("Отображение")),h.createElement(A.a,{fullWidth:!0,native:!0,value:this.props.blocks.viewBlock.map(function(e){return e.defaultId.value}).getOrElse(function(){return"!none"}),onChange:function(t){return e.handleViewBlockChange(t.target.value)}},h.createElement("option",{key:"!none",value:"!none"},""),this.getBlocksOptionsWithTags())),h.createElement(z.a,{fullWidth:!0},h.createElement(V.a,null,this.props.i18n.t("Редактирование")),h.createElement(A.a,{fullWidth:!0,native:!0,value:this.props.blocks.editBlock.map(function(e){return e.defaultId.value}).getOrElse(function(){return"!none"}),onChange:function(t){return e.handleEditBlockChange(t.target.value)}},h.createElement("option",{key:"!none",value:"!none"},""),this.getBlocksOptionsWithTags())),h.createElement(z.a,{fullWidth:!0},h.createElement(V.a,null,this.props.i18n.t("Массовое редактирование")),h.createElement(A.a,{fullWidth:!0,native:!0,value:this.props.blocks.groupEditBlock.map(function(e){return e.value}).getOrElse(function(){return"!none"}),onChange:function(t){return e.handleGroupEditBlockChange(t.target.value)}},h.createElement("option",{key:"!none",value:"!none"},""),this.getBlocksOptionsWithTags())),h.createElement(z.a,{fullWidth:!0},h.createElement(V.a,null,this.props.i18n.t("Конфигурация списка")),h.createElement(A.a,{fullWidth:!0,value:this.props.dataListConfigId.map(function(e){return e.id}).getOrElse(function(){return""}),onChange:function(t){return e.handleDataListConfigId(t.target.value)}},h.createElement(q.a,{key:"!none",value:"!none"},h.createElement(M.a,{primary:""})),this.props.formsFetching?h.createElement(L.a,null):this.props.form.map(function(e){return e.entity.dataListView.configs.filter(function(e){return e.tpe.value===b.DataListConfigKanban.$Type.value&&!re.default.isA5000||e.tpe.value===b.DataListConfigCalendar.$Type.value&&!re.default.isA5000||e.tpe.value===b.DataListConfigTasks.$Type.value&&!re.default.isA5000||e.tpe.value===b.DataListConfigTable.$Type.value}).map(function(e){return h.createElement(q.a,{key:e.id.id,value:e.id.id},h.createElement(M.a,{primary:e.name}))})}).getOrNull())),h.createElement(ne,{formId:this.props.formId,dataListMode:this.props.dataListMode})))}}],[{key:"getSaveBlock",value:function(e){return"!none"===e?new _.None:b.Id.createId(e)}}]),t}(h.Component);oe=te=ie([g.autobind],oe);var ae=Object(m.connect)(function(e,t){return{i18n:e.i18n,form:Object(U.e)(e.forms,t.formId),formsFetching:e.forms.fetching,blockDescriptions:Object(K.c)(e.blocks,t.formId),blockDescriptionsFetching:Object(K.h)(e.blocks,t.formId)}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n},areStatePropsEqual:function(e,t){return e.i18n===t.i18n}})(oe),ce=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},le=function(e){function t(){return o()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d()(t,e),c()(t,[{key:"handleFunctionToggle",value:function(e){this.props.dispatch(Object(H.ab)({function:e}))}},{key:"handleFunctionViewToggle",value:function(){this.handleFunctionToggle("view")}},{key:"handleFunctionCreateToggle",value:function(){this.handleFunctionToggle("create")}},{key:"handleFunctionEditToggle",value:function(){this.handleFunctionToggle("edit")}},{key:"handleFunctionRemoveToggle",value:function(){this.handleFunctionToggle("remove")}},{key:"handleFunctionMassPrintToggle",value:function(){this.handleFunctionToggle("massPrint")}},{key:"handleFunctionMassEventGenerationToggle",value:function(){this.handleFunctionToggle("massEventGeneration")}},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement("p",null,this.props.i18n.t("Доступные функции")),h.createElement("div",{style:{marginBottom:"20px"}},h.createElement(Y.a,{label:this.props.i18n.t("Просмотр"),control:h.createElement(Q.a,{checked:this.props.functions.view,onChange:function(){return e.handleFunctionViewToggle()}})}),h.createElement(Y.a,{label:this.props.i18n.t("Создание"),control:h.createElement(Q.a,{checked:this.props.functions.create,onChange:function(){return e.handleFunctionCreateToggle()}})}),h.createElement(Y.a,{label:this.props.i18n.t("Редактирование"),control:h.createElement(Q.a,{checked:this.props.functions.edit,onChange:function(){return e.handleFunctionEditToggle()}})}),h.createElement(Y.a,{label:this.props.i18n.t("Удаление"),control:h.createElement(Q.a,{checked:this.props.functions.remove,onChange:function(){return e.handleFunctionRemoveToggle()}})}),h.createElement(Y.a,{label:this.props.i18n.t("Массовая печать"),control:h.createElement(Q.a,{checked:this.props.functions.massPrint,onChange:function(){return e.handleFunctionMassPrintToggle()}})}),h.createElement(Y.a,{label:this.props.i18n.t("Массовая генерация события"),control:h.createElement(Q.a,{checked:this.props.functions.massEventGeneration,onChange:this.handleFunctionMassEventGenerationToggle})})))}}]),t}(h.Component);le=ce([g.autobind],le);var se=Object(m.connect)(function(e,t){return{i18n:e.i18n}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n},areStatePropsEqual:function(e,t){return e.i18n===t.i18n}})(le),ue=n(75),de=n.n(ue),pe=n(659),fe=n(652),he=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},me=function(e){function t(){return o()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d()(t,e),c()(t,[{key:"handleFunctionToggle",value:function(e){this.props.dispatch(Object(H.ab)({function:e}))}},{key:"handleFunctionQuickImportToggle",value:function(){this.handleFunctionToggle("quickImport")}},{key:"handleFunctionObjRefsEditToggle",value:function(){this.props.dispatch(Object(H.cb)())}},{key:"onObjRefsEditFieldsChanged",value:function(e){this.props.dispatch(Object(H.bb)(e.map(function(e){return e.fieldId})))}},{key:"handleExportEnabledToggle",value:function(){this.props.dispatch(Object(H.O)())}},{key:"getExportPipelineChecked",value:function(e){return Object(_.headOption)(this.props.exportPermission.configs.filter(function(t){return t.value===e})).nonEmpty()}},{key:"handleExportPipelineToggle",value:function(e){this.props.dispatch(Object(H.P)({exportPipelineId:b.Id.createId(e).getOrElse(function(){throw"wrong export pipeline id"})}))}},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement("p",null,this.props.i18n.t("Дополнительные функции")),h.createElement("div",{style:{marginBottom:"20px"}},h.createElement(Y.a,{label:this.props.i18n.t("Быстрый импорт"),control:h.createElement(Q.a,{checked:this.props.functions.quickImport,onChange:function(){return e.handleFunctionQuickImportToggle()}})})),h.createElement("div",{style:{marginBottom:"20px"}},h.createElement(Y.a,{label:this.props.i18n.t("Редактировать ссылочное поле"),control:h.createElement(Q.a,{checked:this.props.functions.objRefsEdit.allowed,onChange:function(){return e.handleFunctionObjRefsEditToggle()}})}),this.props.functions.objRefsEdit.allowed&&h.createElement(pe.a,{hideExportField:!0,exportPipelineFields:this.props.functions.objRefsEdit.fields.map(function(e,t){return new b.ExportConfigField(e,t,new _.None)}),filter:function(e){return e.entity.valueType.tpe.value===b.ValueTypeObjectRefs.$Type.value},formId:this.props.formId.value,onChange:this.onObjRefsEditFieldsChanged,label:this.props.i18n.t("Поля для редактирования")})),h.createElement(Y.a,{label:this.props.i18n.t("Экспорт"),control:h.createElement(de.a,{onChange:this.handleExportEnabledToggle,checked:this.props.exportPermission.enabled})}),this.props.exportPermission.enabled&&(this.props.isExportPipelineDescriptionsFetching.getOrElse(function(){return!0})?h.createElement(L.a,null):this.props.exportPipelineDescriptions.getOrElse(function(){return[]}).map(function(t){return h.createElement(Y.a,{label:t.name,control:h.createElement(Q.a,{key:"export-"+t.id.toString(),checked:e.getExportPipelineChecked(t.id.toString()),onClick:function(){return e.handleExportPipelineToggle(t.id.toString())}})})})))}}]),t}(h.Component);me=he([g.autobind],me);var ge=Object(m.connect)(function(e,t){return{i18n:e.i18n,exportPipelineDescriptions:Object(fe.d)(e.exportPipelines,t.formId),isExportPipelineDescriptionsFetching:Object(fe.f)(e.exportPipelines,t.formId)}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n},areStatePropsEqual:function(e,t){return e.i18n===t.i18n}})(me),ve=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},be=function(e){function t(){return o()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d()(t,e),c()(t,[{key:"handleLimitsEditToggle",value:function(){this.props.dispatch(Object(H.V)())}},{key:"render",value:function(){return h.createElement(h.Fragment,null,h.createElement("p",null,this.props.i18n.t("Настройка ограничений полей ссылок")),h.createElement(Y.a,{label:this.props.i18n.t("Доступ настройки ограничений"),control:h.createElement(de.a,{onClick:this.handleLimitsEditToggle,checked:this.props.functions.memberLimitEdit})}))}}]),t}(h.Component);be=ve([g.autobind],be);var ye=Object(m.connect)(function(e,t){return{i18n:e.i18n}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n},areStatePropsEqual:function(e,t){return e.i18n===t.i18n}})(be),Oe=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Ee=function(e){function t(){return o()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d()(t,e),c()(t,[{key:"handleFormPermsEnabledChanged",value:function(e,t){this.props.dispatch(Object(H.X)(update(this.props.adminPerms,{accessDenied:{$set:!this.props.adminPerms.accessDenied}})))}},{key:"roleFormPermsChanged",value:function(e,t){this.props.dispatch(Object(H.X)(update(this.props.adminPerms,{perms:{$set:t?this.props.adminPerms.perms.concat(e):this.props.adminPerms.perms.filter(function(t){return t.tpe.value!==e.tpe.value})}})))}},{key:"handleFormPermsGeneralChanged",value:function(e,t){this.roleFormPermsChanged(new b.AdminFormServiceFormEdit,t)}},{key:"handleFormPermsFieldsChanged",value:function(e,t){this.roleFormPermsChanged(new b.AdminFormServiceFields,t)}},{key:"handleFormPermsNotifiesChanged",value:function(e,t){this.roleFormPermsChanged(new b.AdminFormServiceNotifies,t)}},{key:"handleFormPermsLimitsChanged",value:function(e,t){this.roleFormPermsChanged(new b.AdminFormServiceLimits,t)}},{key:"handleFormPermsImportsExportsChanged",value:function(e,t){this.roleFormPermsChanged(new b.AdminFormServiceExports,t),this.roleFormPermsChanged(new b.AdminFormServiceImports,t)}},{key:"handleFormPermsBlocksListConfigsChanged",value:function(e,t){this.roleFormPermsChanged(new b.AdminFormServiceDataListViewEdit,t)}},{key:"handleFormPermsReportsChanged",value:function(e,t){this.roleFormPermsChanged(new b.AdminFormServiceReports,t)}},{key:"handleFormPermsDocumentsChanged",value:function(e,t){this.roleFormPermsChanged(new b.AdminFormServiceDocuments,t)}},{key:"handleFormPermsFiltersChanged",value:function(e,t){this.roleFormPermsChanged(new b.AdminFormServiceFiltersEdit,t)}},{key:"render",value:function(){return h.createElement("div",null,h.createElement(Y.a,{label:this.props.i18n.t("Административные настройки"),control:h.createElement(de.a,{onChange:this.handleFormPermsEnabledChanged,checked:!this.props.adminPerms.accessDenied})}),!this.props.adminPerms.accessDenied&&h.createElement("div",{style:{marginBottom:"20px"}},h.createElement(Y.a,{label:this.props.i18n.t("Общие"),control:h.createElement(Q.a,{checked:this.props.adminPerms.perms.filter(function(e){return e.tpe.value===b.AdminFormServiceFormEdit.$Type.value}).length>0,onChange:this.handleFormPermsGeneralChanged})}),h.createElement(Y.a,{label:this.props.i18n.t("Лимиты"),control:h.createElement(Q.a,{checked:this.props.adminPerms.perms.filter(function(e){return e.tpe.value===b.AdminFormServiceLimits.$Type.value}).length>0,onChange:this.handleFormPermsLimitsChanged})}),h.createElement(Y.a,{label:this.props.i18n.t("Поля"),control:h.createElement(Q.a,{checked:this.props.adminPerms.perms.filter(function(e){return e.tpe.value===b.AdminFormServiceFields.$Type.value}).length>0,onChange:this.handleFormPermsFieldsChanged})}),h.createElement(Y.a,{label:this.props.i18n.t("Рассылки"),control:h.createElement(Q.a,{checked:this.props.adminPerms.perms.filter(function(e){return e.tpe.value===b.AdminFormServiceNotifies.$Type.value}).length>0,onChange:this.handleFormPermsNotifiesChanged})}),h.createElement(Y.a,{label:this.props.i18n.t("Импорт")+"/"+this.props.i18n.t("Экспорт"),control:h.createElement(Q.a,{checked:this.props.adminPerms.perms.filter(function(e){return e.tpe.value===b.AdminFormServiceImports.$Type.value}).length>0&&this.props.adminPerms.perms.filter(function(e){return e.tpe.value===b.AdminFormServiceExports.$Type.value}).length>0,onChange:this.handleFormPermsImportsExportsChanged})}),h.createElement(Y.a,{label:this.props.i18n.t("Документы"),control:h.createElement(Q.a,{checked:this.props.adminPerms.perms.filter(function(e){return e.tpe.value===b.AdminFormServiceDocuments.$Type.value}).length>0,onChange:this.handleFormPermsDocumentsChanged})}),h.createElement(Y.a,{label:this.props.i18n.t("Блоки")+"/"+this.props.i18n.t("Списки"),control:h.createElement(Q.a,{checked:this.props.adminPerms.perms.filter(function(e){return e.tpe.value===b.AdminFormServiceBlocks.$Type.value}).length>0&&this.props.adminPerms.perms.filter(function(e){return e.tpe.value===b.AdminFormServiceDataListViewEdit.$Type.value}).length>0,onChange:this.handleFormPermsBlocksListConfigsChanged})}),h.createElement(Y.a,{label:this.props.i18n.t("Отчеты"),control:h.createElement(Q.a,{checked:this.props.adminPerms.perms.filter(function(e){return e.tpe.value===b.AdminFormServiceReports.$Type.value}).length>0,onChange:this.handleFormPermsReportsChanged})}),h.createElement(Y.a,{label:this.props.i18n.t("Системные фильтры"),control:h.createElement(Q.a,{checked:this.props.adminPerms.perms.filter(function(e){return e.tpe.value===b.AdminFormServiceFiltersEdit.$Type.value}).length>0,onChange:this.handleFormPermsFiltersChanged})})))}}]),t}(h.Component);Ee=Oe([g.autobind],Ee);var ke=Object(m.connect)(function(e,t){return{i18n:e.i18n}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n},areStatePropsEqual:function(e,t){return e.i18n===t.i18n}})(Ee),je=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Ce=function(e){function t(){return o()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d()(t,e),c()(t,[{key:"render",value:function(){return h.createElement("div",{style:{flex:1}},h.createElement(ae,{formId:this.props.formId,blocks:this.props.blocks,dataListMode:this.props.dataListMode,dataListConfigId:this.props.dataListConfigId}),h.createElement(se,{functions:this.props.functions}),h.createElement(ge,{formId:this.props.formId,functions:this.props.functions,exportPermission:this.props.exportPermission}),h.createElement(ye,{functions:this.props.functions}),h.createElement(ke,{adminPerms:this.props.adminPerms}))}}]),t}(h.Component);Ce=je([g.autobind],Ce);var Pe=Object(m.connect)(function(e,t){return{i18n:e.i18n}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n},areStatePropsEqual:function(e,t){return e.i18n===t.i18n}})(Ce),_e=n(29),Fe=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},we=function(e){function t(){return o()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d()(t,e),c()(t,[{key:"getFieldChecked",value:function(e,t){return Object(_.headOption)(this.props.restrictedFields[t].filter(function(t){return t.value===e.value})).nonEmpty()}},{key:"getAllFieldsChecked",value:function(e){var t=this,n=this.props.fields.getOrElse(function(){return[]}),r=n.filter(function(n){return t.props.restrictedFields[e].filter(function(e){return n.id.value===e.value}).length>0});return n.length===r.length}},{key:"handleAllFieldsToogle",value:function(e){var t=this;this.props.fields.foreach(function(n){var r=0===t.props.restrictedFields[e].length?n.map(function(e){return e.id}):[];t.props.dispatch(Object(H.R)({fieldIds:r,permission:e}))})}},{key:"handleFieldToggle",value:function(e,t){this.props.dispatch(Object(H.Q)({fieldId:e,permission:t}))}},{key:"render",value:function(){var e=this;return h.createElement("div",{style:{flex:1}},h.createElement("div",{className:"FieldsTab__row FieldsTab__row-heading",style:{borderBottom:"1px #ccc solid",flex:1}},h.createElement("div",null,this.props.i18n.t("Отметьте, если хотите запретить права")),h.createElement("div",{className:"FieldsTab__params",style:{textAlign:"center"}},h.createElement("div",{className:"FieldsTab__param"},this.props.i18n.t("Редактирование"),h.createElement(Q.a,{checked:this.getAllFieldsChecked("edit"),onClick:function(){return e.handleAllFieldsToogle("edit")}})),h.createElement("div",{className:"FieldsTab__param"},this.props.i18n.t("Просмотр"),h.createElement(Q.a,{checked:this.getAllFieldsChecked("view"),onClick:function(){return e.handleAllFieldsToogle("view")}})))),this.props.fieldsLoading?h.createElement(L.a,null):this.props.fields.map(function(t){return t.map(function(t){return h.createElement("div",{className:"FieldsTab__row",key:t.id.value,style:{borderBottom:"1px #ccc solid"}},h.createElement("div",{className:"FieldsTab__field"},t.entity.caption),h.createElement("div",{className:"FieldsTab__params"},["edit","view"].map(function(n){return h.createElement("div",{className:"FieldsTab__param"},h.createElement(Q.a,{key:"perm-"+n+"-field-"+t.id.value,checked:e.getFieldChecked(t.id,n),onClick:function(){return e.handleFieldToggle(t.id,n)}}))})))})}).getOrElse(function(){return[]}))}}]),t}(h.Component);we=Fe([g.autobind],we);var Ie=Object(m.connect)(function(e,t){return{i18n:e.i18n,fields:Object(_e.e)(e.fields,t.formId),fieldsLoading:Object(_e.j)(e.fields,t.formId)}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n},areStatePropsEqual:function(e,t){return e.i18n===t.i18n}})(we),Te=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},xe=function(e){function t(){return o()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d()(t,e),c()(t,[{key:"handleEventLineIdToggle",value:function(e){this.props.dispatch(Object(H.U)(e))}},{key:"getJourneyEventIdChecked",value:function(e){return Object(_.headOption)(this.props.journeyEvents.filter(function(t){return t.value===e.value})).nonEmpty()}},{key:"render",value:function(){var e=this;return h.createElement("div",{style:{flex:1}},h.createElement("div",{className:"FieldsTab__row FieldsTab__row-heading"},h.createElement("div",null,this.props.i18n.t("Отметьте, если хотите разрешить"))),this.props.journeyEventIdsFetching?h.createElement(L.a,null):this.props.journeyEventIds.map(function(t){return h.createElement("div",{className:"FieldsTab__row",key:t.id.value,style:{borderBottom:"1px #ccc solid"}},h.createElement("div",{className:"FieldsTab__field"},t.entity.name),h.createElement("div",{className:"FieldsTab__params"},h.createElement("div",{className:"FieldsTab__param"},h.createElement(Q.a,{key:"perm-journeyEventIds-"+t.id,checked:e.getJourneyEventIdChecked(t.id),onClick:function(){return e.handleEventLineIdToggle(t.id)},style:{width:"auto",marginRight:"-16px"}}))))}))}}]),t}(h.Component);xe=Te([g.autobind],xe);var Re=Object(m.connect)(function(e,t){return{i18n:e.i18n,journeyEventIds:e.journeyEventIds.list,journeyEventIdsFetching:e.journeyEventIds.fetching}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n},areStatePropsEqual:function(e,t){return e.i18n===t.i18n}})(xe),De=n(161),Se=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Le=b.Id.createId(T.v4()).getOrElse(function(){throw"wrong filter id"}),Ne=function(e){function t(){return o()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d()(t,e),c()(t,[{key:"handleFilterChange",value:function(e){this.props.dispatch(Object(H.S)({filter:e}))}},{key:"render",value:function(){return h.createElement("div",null,this.props.fieldsLoading?h.createElement(L.a,null):h.createElement(De.a,{value:this.props.filter,filterId:Le,formId:this.props.formId,onChange:this.handleFilterChange}))}}]),t}(h.Component);Ne=Se([g.autobind],Ne);var Me=Object(m.connect)(function(e,t){return{i18n:e.i18n,fieldsLoading:Object(_e.j)(e.fields,t.formId)}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n&&e.fields===t.fields},areStatePropsEqual:function(e,t){return e.i18n===t.i18n&&e.fieldsLoading===t.fieldsLoading}})(Ne),Be=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Ae=function(e){function t(){return o()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d()(t,e),c()(t,[{key:"getNotifyTemplateChecked",value:function(e){return Object(_.headOption)(this.props.restrictedNotifyTemplates.filter(function(t){return t.value===e})).nonEmpty()}},{key:"handleNotifyTemplateToggle",value:function(e){this.props.dispatch(Object(H.W)({notifyTemplateId:e}))}},{key:"render",value:function(){var e=this;return h.createElement("div",{style:{flex:1}},h.createElement("div",{className:"FieldsTab__row FieldsTab__row-heading"},h.createElement("div",null,this.props.i18n.t("Отметьте, если хотите запретить права"))),this.props.notifyTemplates.descriptionsFetching?h.createElement(L.a,null):this.props.notifyTemplates.descriptionsList.map(function(t){return h.createElement("div",{className:"FieldsTab__row",key:t.id,style:{borderBottom:"1px #ccc solid"}},h.createElement("div",{className:"FieldsTab__field"},t.name),h.createElement("div",{className:"FieldsTab__params"},h.createElement("div",{className:"FieldsTab__param"},h.createElement(Q.a,{key:"perm-notifyTemplate-"+t.id,checked:e.getNotifyTemplateChecked(t.id),onClick:function(){return e.handleNotifyTemplateToggle(new b.Id(t.id))},style:{width:"auto",marginRight:"-16px"}}))))}))}}]),t}(h.Component);Ae=Be([g.autobind],Ae);var We=Object(m.connect)(function(e,t){return{i18n:e.i18n,notifyTemplates:e.notifyTemplates}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n&&e.notifyTemplates===t.notifyTemplates},areStatePropsEqual:function(e,t){return e.i18n===t.i18n&&e.notifyTemplates===t.notifyTemplates}})(Ae),qe=n(651),$e=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Ve=function(e){function t(){return o()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d()(t,e),c()(t,[{key:"getDocumentChecked",value:function(e){return Object(_.headOption)(this.props.restrictedDocuments.filter(function(t){return t.value===e.value})).nonEmpty()}},{key:"handleDocumentToggle",value:function(e){this.props.dispatch(Object(H.M)({documentId:e}))}},{key:"getDocumentSecondPrintChecked",value:function(e){return Object(_.headOption)(this.props.restrictedDocumentSecondPrint.filter(function(t){return t.value===e.value})).nonEmpty()}},{key:"handleDocumentSecondPrintToggle",value:function(e){this.props.dispatch(Object(H.L)({documentId:e}))}},{key:"render",value:function(){var e=this;return h.createElement("div",{style:{flex:1}},h.createElement("div",{className:"FieldsTab__row FieldsTab__row-heading"},h.createElement("div",null,this.props.i18n.t("Отметьте, если хотите запретить права"))),this.props.documentsLoading?h.createElement(L.a,null):this.props.documents.getOrElse(function(){return[]}).map(function(t){return h.createElement("div",{className:"FieldsTab__row",key:t.id.value,style:{borderBottom:"1px #ccc solid"}},h.createElement("div",{className:"FieldsTab__field"},t.entity.name),h.createElement("div",{className:"FieldsTab__params"},h.createElement("div",{className:"FieldsTab__param"},e.props.i18n.t("Печать"),h.createElement(Q.a,{key:"perm-document-"+t.id.value,checked:e.getDocumentChecked(t.id),onClick:function(){return e.handleDocumentToggle(t.id)},style:{width:"auto",marginRight:"-16px"}})),h.createElement("div",{className:"FieldsTab__param"},e.props.i18n.t("Повторная печать"),h.createElement(Q.a,{key:"perm-document-"+t.id.value,checked:e.getDocumentSecondPrintChecked(t.id),onClick:function(){return e.handleDocumentSecondPrintToggle(t.id)},style:{width:"auto",marginRight:"-16px"}}))))}))}}]),t}(h.Component);Ve=$e([g.autobind],Ve);var Ge,ze=Object(m.connect)(function(e,t){return{i18n:e.i18n,documents:Object(qe.b)(e.formDocuments,t.formId),documentsLoading:Object(qe.d)(e.formDocuments,t.formId)}},function(e,t){return{dispatch:e}},function(e,t,n){return Object.assign({},e,n,t)},{areStatesEqual:function(e,t){return e.i18n===t.i18n},areStatePropsEqual:function(e,t){return e.i18n===t.i18n}})(Ve),He=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Ke=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Ue=(b.Id.createId(T.v4()).getOrElse(function(){throw"wrong filter id"}),0);!function(e){e[e.true=0]="true",e[e.false=1]="false",e[e.empty=2]="empty"}(Ge||(Ge={}));var Je=function(e){function t(e){o()(this,t);var n=s()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={selectedIndex:Ue},n}return d()(t,e),c()(t,[{key:"onSelected",value:function(e){this.setState(I(this.state,{selectedIndex:{$set:e}}))}},{key:"render",value:function(){var e=this;return this.props.roleFormConfigForm.operation.map(function(t){return h.createElement(x.a,{value:e.state.selectedIndex,onChange:e.onSelected,contentContainerStyle:{flex:1,overflow:"auto"}},h.createElement(R.a,{value:Ue,label:e.props.i18n.t("Функции")},h.createElement(Pe,{formId:t.formId,functions:t.functions,dataListMode:t.dataListMode,dataListConfigId:t.dataListConfigId,adminPerms:t.adminPerms,exportPermission:t.exportPermission,blocks:t.blocks})),h.createElement(R.a,{value:1,label:e.props.i18n.t("Поля")},h.createElement(Ie,{formId:t.formId,restrictedFields:t.restricted.fields})),h.createElement(R.a,{value:3,label:e.props.i18n.t("Документы")},h.createElement(ze,{formId:t.formId,restrictedDocuments:t.restricted.documents,restrictedDocumentSecondPrint:t.restricted.documentSecondPrint})),h.createElement(R.a,{value:4,label:e.props.i18n.t("Сообщения")},h.createElement(We,{restrictedNotifyTemplates:t.restricted.notifyTemplates})),h.createElement(R.a,{value:2,label:e.props.i18n.t("Фильтрация")},h.createElement(Me,{formId:t.formId,filter:t.filter})),h.createElement(R.a,{value:5,label:e.props.i18n.t("События")},h.createElement(Re,{journeyEvents:t.journeyEvents})))}).getOrNull()}}]),t}(h.Component);Je=He([g.autobind,Ke("design:paramtypes",[Object])],Je);var Qe=Object(m.connect)(function(e){return{i18n:e.i18n,roleFormConfigForm:e.roleFormConfigForm,blocks:e.blocks,fields:e.fields,forms:e.forms,exportPipelines:e.exportPipelines,documents:e.formDocuments,notifyTemplates:e.notifyTemplates}})(Je),Xe=n(188),Ye=n(1512),Ze=n(1477),et=n(176),tt=n(93),nt=n.n(tt),rt=n(71),it=n(84),ot=n(19),at=n.n(ot),ct=n(641),lt=(n(2358),n(405)),st=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},ut=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},dt=function(e){function t(e){return o()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,E.a.screenInitialState()))}return d()(t,e),c()(t,[{key:"componentWillReceiveProps",value:function(e){e.role.data!==this.props.role.data&&this.getOperation(e).foreach(function(t){return e.dispatch(Object(H.Y)(t))})}},{key:"onSaveRequested",value:function(){var e=this;this.props.roleFormConfigForm.operation.foreach(function(t){return e.getRole(e.props).foreach(function(n){var r=n.entity.permissions.filter(function(t){return!(t.operation instanceof b.PermissionOperationFormProperties&&t.operation.formId.value===e.props.params.roleFormId)}),i=I(r,{$push:[new b.Permission(new b.PermissionPredicateAllow,t)]});Object(y.f)(I(n,{entity:{$set:new b.Role(n.entity.name,n.entity.organisationId,i,n.entity.mainPageConfig,n.entity.uiConfig,n.entity.linkedEvent)}})).then(function(t){e.props.dispatch(Object(rt.h)(e.props.i18n.t("Сохранение успешно завершено"))),e.props.dispatch(Object(O.b)(new b.Id(e.props.params.roleId))),e.props.dispatch(Object(it.g)())}).catch(function(t){e.props.dispatch(Object(rt.h)(e.props.i18n.t("Сохранение завершилось ошибкой")))})})})}},{key:"renderNavigation",value:function(){return h.createElement(k.a,null)}},{key:"onGoBackRequested",value:function(){this.props.dispatch(Object(v.zb)(new b.Id(this.props.params.roleId)))}},{key:"getRole",value:function(e){return e.role.data}},{key:"getOperation",value:function(e){return Object(_.headOption)(this.getRole(e).map(function(t){return t.entity.permissions.filter(function(t){return t.operation instanceof b.PermissionOperationFormProperties&&t.operation.formId.value===e.params.roleFormId})}).getOrElse(function(){return[]})).map(function(e){return e.operation})}},{key:"render",value:function(){var e=this,t=this.getRole(this.props),n=t.map(function(e){return e.entity.name}).getOrElse(function(){return""}),r=this.props.currentForm.data.map(function(e){return e.entity.name}).getOrElse(function(){return""}),i=this.props.i18n.t("Настройки формы")+" "+r+" "+this.props.i18n.t("для роли")+" "+n;return this.renderScreenBody({className:"RoleFormPage"},h.createElement("div",{className:"RoleFormPage__paper"},h.createElement(j.a,{title:i,onGoBackRequested:this.onGoBackRequested,rightButtonGroup:[h.createElement(at.a,{variant:"raised",style:{margin:"0 15px"},onClick:function(){return t.foreach(function(t){return e.onSaveRequested()})},color:"primary"},this.props.i18n.t("Сохранить"))]}),h.createElement(nt.a,{style:{flex:1,display:"flex",flexDirection:"column"}},h.createElement(Qe,{params:this.props.params}))))}}]),t}(E.a);dt=st([g.autobind,ut("design:paramtypes",[Object])],dt);t.default=Object(m.connect)(function(e){return{i18n:e.i18n,currentForm:e.currentForm,role:e.role,roleFormConfigForm:e.roleFormConfigForm,organisations:e.organisations}})(Object(w.a)(Object(F.a)(function(e){e.isTokenChecked&&(e.dispatch(Object(C.c)()),e.dispatch(Object(O.b)(new b.Id(e.params.roleId))),e.dispatch(Object(P.g)()),e.dispatch(Object(et.h)(new b.Id(e.params.roleFormId))).then(function(t){e.dispatch(Object(lt.c)(t.entity.eventLineId))}),e.dispatch(Object(Xe.b)(new b.Id(e.params.roleFormId))),e.dispatch(Object(Ye.b)(new b.Id(e.params.roleFormId))),e.dispatch(Object(Ze.c)(new b.Id(e.params.roleFormId))),e.dispatch(Object(ct.b)(new b.Id(e.params.roleFormId))),e.dispatch(Object(ct.b)(new b.Id(e.params.roleFormId))))},function(){},function(e,t){e.isTokenChecked&&!t.isTokenChecked&&(e.dispatch(Object(C.c)()),e.dispatch(Object(O.b)(new b.Id(e.params.roleId))),e.dispatch(Object(P.g)()),e.dispatch(Object(et.h)(new b.Id(e.params.roleFormId))).then(function(t){e.dispatch(Object(lt.c)(t.entity.eventLineId))}),e.dispatch(Object(Xe.b)(new b.Id(e.params.roleFormId))),e.dispatch(Object(Ye.b)(new b.Id(e.params.roleFormId))),e.dispatch(Object(ct.b)(new b.Id(e.params.roleFormId))))})(dt)))}}]);